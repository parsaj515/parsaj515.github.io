<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<meta name="apple-mobile-web-app-capable" content="yes">
<title>Super Chat - Encrypted</title>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<!-- Discord Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Whitney:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Ginto:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">
<style>
/* Add new styles for unread separator */
.unread-separator {
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 15px 0;
  position: relative;
}

.unread-separator::before {
  content: "";
  position: absolute;
  top: 50%;
  left: 0;
  right: 0;
  height: 1px; /* Made thinner */
  background: rgba(255, 0, 0, 0.2); /* Made lighter like day separators */
  z-index: 1;
}

.unread-label {
  background: rgba(255, 255, 255, 0.9);
  padding: 4px 12px;
  border-radius: 12px;
  font-size: 0.7rem;
  color: #666; /* Made lighter like day separators */
  z-index: 2;
  border: 1px solid rgba(255, 0, 0, 0.1); /* Made lighter */
  font-weight: bold;
}

/* Message dropdown styles */
.message-dropdown {
  position: absolute;
  top: -8px;
  right: 8px;
  background: white;
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.2);
  display: none;
  flex-direction: column;
  min-width: 120px;
  z-index: 100;
  overflow: hidden;
}

.message-dropdown-item {
  padding: 8px 12px;
  border: none;
  background: none;
  text-align: left;
  cursor: pointer;
  font-size: 0.8rem;
  display: flex;
  align-items: center;
  gap: 6px;
  color: #2d3748;
  transition: background-color 0.2s ease;
}

.message-dropdown-item:hover {
  background-color: #f7fafc;
}

.message-dropdown-item.delete {
  color: #e53e3e;
}

.message-container {
  position: relative;
}

.message-container:hover .message-dropdown {
  display: flex;
}

/* Game button styles */
#game-btn {
  position: fixed;
  top: 15px;
  right: 290px;
  background-color: #9c27b0;
  border: none;
  color: white;
  padding: 12px;
  border-radius: 50%;
  cursor: pointer;
  font-size: 1rem;
  font-weight: bold;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  transition: background-color 0.2s ease;
  z-index: 1000;
  min-height: 44px;
  min-width: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
}

#game-btn:hover {
  background-color: #7b1fa2;
}

/* Game modal styles */
#game-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.9);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 1012;
  padding: 20px;
}

#game-container {
  background: #1a1a1a;
  border-radius: 20px;
  padding: 0;
  max-width: 900px;
  width: 100%;
  height: 80vh;
  display: flex;
  flex-direction: column;
  font-family: 'Whitney', sans-serif;
  overflow: hidden;
}

#game-header {
  background: #2d2d2d;
  padding: 15px 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 2px solid #9c27b0;
}

#game-title {
  color: white;
  font-size: 1.5rem;
  font-weight: bold;
  font-family: 'Ginto', 'Whitney', sans-serif;
}

#game-close {
  background: none;
  border: none;
  color: white;
  font-size: 1.5rem;
  cursor: pointer;
  padding: 5px;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
}

#game-close:hover {
  background: rgba(255,255,255,0.1);
}

#game-canvas-container {
  flex: 1;
  position: relative;
  overflow: hidden;
}

#game-canvas {
  width: 100%;
  height: 100%;
  background: #0a0a0a;
}

#game-stats {
  background: #2d2d2d;
  padding: 10px 20px;
  display: flex;
  justify-content: space-between;
  color: white;
  font-size: 0.9rem;
}

/* FIXED: Steal a Brainrot game button positioning */
#steal-brainrot-btn {
  position: fixed;
  top: 15px;
  right: 235px; /* FIXED: Changed from 400px to 235px */
  background-color: #ff5722;
  border: none;
  color: white;
  padding: 12px;
  border-radius: 50%;
  cursor: pointer;
  font-size: 1rem;
  font-weight: bold;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  transition: background-color 0.2s ease;
  z-index: 1000;
  min-height: 44px;
  min-width: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
}

#steal-brainrot-btn:hover {
  background-color: #e64a19;
}

/* FIXED: Steal a Brainrot game modal styles */
#steal-brainrot-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.9);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 1012; /* FIXED: Same z-index as game modal */
  padding: 20px;
}

#steal-brainrot-container {
  background: #1a1a1a;
  border-radius: 20px;
  padding: 0;
  max-width: 900px;
  width: 100%;
  height: 80vh;
  display: flex;
  flex-direction: column;
  font-family: 'Whitney', sans-serif;
  overflow: hidden;
  transition: all 0.3s ease;
}

#steal-brainrot-header {
  background: #2d2d2d;
  padding: 15px 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 2px solid #ff5722;
}

#steal-brainrot-title {
  color: white;
  font-size: 1.5rem;
  font-weight: bold;
  font-family: 'Ginto', 'Whitney', sans-serif;
}

#steal-brainrot-close {
  background: none;
  border: none;
  color: white;
  font-size: 1.5rem;
  cursor: pointer;
  padding: 5px;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-left: 8px;
}

#steal-brainrot-close:hover {
  background: rgba(255,255,255,0.1);
}

#steal-brainrot-fullscreen {
  background: none;
  border: none;
  color: white;
  font-size: 1.2rem;
  cursor: pointer;
  padding: 5px;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-right: 8px;
}

#steal-brainrot-fullscreen:hover {
  background: rgba(255,255,255,0.1);
}

.header-controls {
  display: flex;
  align-items: center;
}

#steal-brainrot-canvas-container {
  flex: 1;
  position: relative;
  overflow: hidden;
}

#steal-brainrot-canvas {
  width: 100%;
  height: 100%;
  background: #0a0a0a;
}

#steal-brainrot-stats {
  background: #2d2d2d;
  padding: 10px 20px;
  display: flex;
  justify-content: space-between;
  color: white;
  font-size: 0.9rem;
}

/* Fullscreen styles */
#steal-brainrot-container.fullscreen {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  max-width: none;
  max-height: none;
  border-radius: 0;
  z-index: 1014;
}

#steal-brainrot-container.fullscreen #steal-brainrot-canvas-container {
  height: calc(100vh - 120px);
}

/* NEW: Fullscreen button for Grow a Garden game */
#game-fullscreen {
  background: none;
  border: none;
  color: white;
  font-size: 1.2rem;
  cursor: pointer;
  padding: 5px;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-right: 8px;
}

#game-fullscreen:hover {
  background: rgba(255,255,255,0.1);
}

#game-container.fullscreen {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  max-width: none;
  max-height: none;
  border-radius: 0;
  z-index: 1014;
}

#game-container.fullscreen #game-canvas-container {
  height: calc(100vh - 120px);
}

/* NEW: Adblocker toggle button - MOVED next to link button */
#adblocker-btn {
  position: fixed;
  top: 15px;
  right: 345px; /* MOVED: Now next to link button */
  background-color: #4caf50;
  border: none;
  color: white;
  padding: 12px;
  border-radius: 50%;
  cursor: pointer;
  font-size: 1rem;
  font-weight: bold;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  transition: background-color 0.2s ease;
  z-index: 1000;
  min-height: 44px;
  min-width: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
}

#adblocker-btn:hover {
  background-color: #388e3c;
}

#adblocker-btn.disabled {
  background-color: #f44336;
}

/* NEW: Adblocker modal */
#adblocker-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.8);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 1015;
  padding: 20px;
}

#adblocker-container {
  background: white;
  border-radius: 20px;
  padding: 25px;
  max-width: 500px;
  width: 100%;
  text-align: center;
  font-family: 'Whitney', sans-serif;
}

#adblocker-title {
  margin-bottom: 15px;
  font-family: 'Ginto', 'Whitney', sans-serif;
}

.adblocker-status {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  margin: 15px 0;
  padding: 10px;
  border-radius: 8px;
  font-weight: bold;
}

.adblocker-status.active {
  background-color: #e8f5e9;
  color: #2e7d32;
}

.adblocker-status.inactive {
  background-color: #ffebee;
  color: #c62828;
}

.adblocker-buttons {
  display: flex;
  gap: 10px;
  justify-content: center;
  margin-top: 20px;
}

/* NEW: Ad-blocking iframe wrapper */
.ad-blocked-iframe {
  position: relative;
  width: 100%;
  height: 100%;
}

.ad-blocked-iframe::before {
  content: "Ads blocked";
  position: absolute;
  top: 5px;
  right: 5px;
  background: rgba(0, 0, 0, 0.7);
  color: white;
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 0.7rem;
  z-index: 10;
}

/* Mention styling */
.mention {
  background-color: rgba(88, 101, 242, 0.3);
  color: #5865f2;
  padding: 1px 4px;
  border-radius: 3px;
  font-weight: 500;
  cursor: pointer;
}

.mention:hover {
  background-color: rgba(88, 101, 242, 0.5);
}

.message.mentioned {
  background-color: rgba(255, 255, 0, 0.1) !important;
  border: 1px solid rgba(255, 204, 0, 0.3) !important;
  border-radius: 8px;
}

/* Mention dropdown */
.mention-dropdown {
  position: absolute;
  bottom: 100%;
  left: 0;
  right: 0;
  background: white;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  max-height: 150px;
  overflow-y: auto;
  z-index: 1000;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  display: none;
}

.mention-option {
  padding: 8px 12px;
  cursor: pointer;
  border-bottom: 1px solid #f7fafc;
  display: flex;
  align-items: center;
  gap: 8px;
}

.mention-option:hover {
  background-color: #f7fafc;
}

.mention-option.active {
  background-color: #e6f3ff;
}

.mention-avatar {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  object-fit: cover;
}

/* Message actions for own messages */
.message-actions.own-message {
  display: none;
  position: absolute;
  top: -8px;
  right: 8px;
  background: white;
  border-radius: 15px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.15);
  gap: 4px;
  padding: 4px;
  z-index: 10;
}

.message-container.self:hover .message-actions.own-message {
  display: flex;
}

/* Message actions for others' messages */
.message-actions.others-message {
  display: none;
  position: absolute;
  top: -8px;
  right: 8px;
  background: white;
  border-radius: 15px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.15);
  gap: 4px;
  padding: 4px;
  z-index: 10;
}

.message-container.other:hover .message-actions.others-message {
  display: flex;
}

/* Admin Panel Styles - FIXED: Centered user names in rank bubbles */
#admin-panel-btn {
  position: fixed;
  top: 15px;
  right: 180px; /* FIXED: Adjusted position */
  background-color: #d35400;
  border: none;
  color: white;
  padding: 12px;
  border-radius: 50%;
  cursor: pointer;
  font-size: 1rem;
  font-weight: bold;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  transition: background-color 0.2s ease;
  z-index: 1000;
  min-height: 44px;
  min-width: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
}

#admin-panel-btn:hover {
  background-color: #a84300;
}

#admin-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.8);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 1013;
  padding: 20px;
}

#admin-container {
  background: white;
  border-radius: 20px;
  padding: 25px;
  max-width: 600px;
  width: 100%;
  max-height: 80vh;
  overflow-y: auto;
  font-family: 'Whitney', sans-serif;
}

#admin-title {
  margin-bottom: 20px;
  font-family: 'Ginto', 'Whitney', sans-serif;
  color: #2d3748;
  border-bottom: 2px solid #e2e8f0;
  padding-bottom: 10px;
}

.admin-section {
  margin-bottom: 25px;
  padding: 15px;
  background: #f7fafc;
  border-radius: 12px;
  border: 1px solid #e2e8f0;
}

.admin-section h4 {
  margin: 0 0 15px 0;
  color: #4a5568;
  font-family: 'Ginto', 'Whitney', sans-serif;
}

.admin-user-list {
  max-height: 200px;
  overflow-y: auto;
  margin-bottom: 15px;
}

.admin-user-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px;
  border-bottom: 1px solid #e2e8f0;
  transition: background-color 0.2s ease;
}

.admin-user-item:hover {
  background-color: #edf2f7;
}

.admin-user-info {
  display: flex;
  align-items: center;
  gap: 10px;
  flex: 1;
}

.admin-user-avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  object-fit: cover;
}

.admin-user-details {
  display: flex;
  flex-direction: column;
  align-items: flex-start; /* FIXED: Changed to flex-start for proper alignment */
}

.admin-user-name {
  font-weight: 500;
  font-size: 0.9rem;
  text-align: center; /* FIXED: Center the user name */
  width: 100%; /* FIXED: Ensure full width for centering */
}

.admin-user-rank {
  font-size: 0.7rem;
  font-weight: 600;
  padding: 4px 8px; /* FIXED: Increased padding for better appearance */
  border-radius: 12px; /* FIXED: More rounded corners */
  margin-top: 4px;
  text-align: center; /* FIXED: Center the rank text */
  width: 100%; /* FIXED: Ensure full width for centering */
  display: flex;
  justify-content: center; /* FIXED: Center content horizontally */
  align-items: center; /* FIXED: Center content vertically */
}

.admin-user-controls {
  display: flex;
  gap: 8px;
}

.admin-btn {
  padding: 6px 12px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-size: 0.8rem;
  font-weight: 500;
  transition: all 0.2s ease;
  font-family: 'Whitney', sans-serif;
}

.admin-btn.delete {
  background-color: #e53e3e;
  color: white;
}

.admin-btn.delete:hover {
  background-color: #c53030;
}

.admin-btn.promote {
  background-color: #38a169;
  color: white;
}

.admin-btn.promote:hover {
  background-color: #2f855a;
}

.admin-btn.demote {
  background-color: #d69e2e;
  color: white;
}

.admin-btn.demote:hover {
  background-color: #b7791f;
}

.admin-rank-controls {
  display: flex;
  gap: 10px;
  margin-top: 15px;
}

.rank-option {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 5px;
  cursor: pointer;
  padding: 10px;
  border-radius: 8px;
  border: 2px solid transparent;
  transition: all 0.2s ease;
}

.rank-option:hover {
  background-color: #edf2f7;
}

.rank-option.selected {
  border-color: #4299e1;
  background-color: #ebf8ff;
}

.rank-color {
  width: 30px;
  height: 30px;
  border-radius: 50%;
  border: 2px solid white;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.rank-name {
  font-size: 0.8rem;
  font-weight: 500;
  text-align: center; /* FIXED: Center rank names */
}

#admin-login {
  text-align: center;
  padding: 20px;
}

#admin-password-input {
  width: 100%;
  padding: 12px;
  margin: 15px 0;
  border: 2px solid #e2e8f0;
  border-radius: 8px;
  font-size: 1rem;
  font-family: 'Whitney', sans-serif;
}

#admin-password-input:focus {
  border-color: #4299e1;
  outline: none;
}

.admin-login-btn {
  padding: 10px 20px;
  background-color: #4299e1;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-size: 1rem;
  font-weight: 500;
  transition: background-color 0.2s ease;
  font-family: 'Whitney', sans-serif;
}

.admin-login-btn:hover {
  background-color: #3182ce;
}

.admin-login-btn.cancel {
  background-color: #a0aec0;
}

.admin-login-btn.cancel:hover {
  background-color: #718096;
}

/* Message alignment fixes for long timestamps */
.message-container.self .message-content {
  justify-content: flex-end;
}

.message-container.other .message-content {
  justify-content: flex-start;
}

.message-bubble {
  max-width: 100%;
  display: flex;
  flex-direction: column;
}

.message {
  max-width: 100%;
  word-wrap: break-word;
}

/* NEW: Bike Obby Game Button */
#bike-obby-btn {
  position: fixed;
  top: 15px;
  right: 400px;
  background-color: #2196F3;
  border: none;
  color: white;
  padding: 12px;
  border-radius: 50%;
  cursor: pointer;
  font-size: 1rem;
  font-weight: bold;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  transition: background-color 0.2s ease;
  z-index: 1000;
  min-height: 44px;
  min-width: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
}

#bike-obby-btn:hover {
  background-color: #1976D2;
}

/* NEW: Bike Obby Game Modal */
#bike-obby-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.9);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 1012;
  padding: 20px;
}

#bike-obby-container {
  background: #1a1a1a;
  border-radius: 20px;
  padding: 0;
  max-width: 900px;
  width: 100%;
  height: 80vh;
  display: flex;
  flex-direction: column;
  font-family: 'Whitney', sans-serif;
  overflow: hidden;
}

#bike-obby-header {
  background: #2d2d2d;
  padding: 15px 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 2px solid #2196F3;
}

#bike-obby-title {
  color: white;
  font-size: 1.5rem;
  font-weight: bold;
  font-family: 'Ginto', 'Whitney', sans-serif;
}

#bike-obby-close {
  background: none;
  border: none;
  color: white;
  font-size: 1.5rem;
  cursor: pointer;
  padding: 5px;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
}

#bike-obby-close:hover {
  background: rgba(255,255,255,0.1);
}

#bike-obby-fullscreen {
  background: none;
  border: none;
  color: white;
  font-size: 1.2rem;
  cursor: pointer;
  padding: 5px;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-right: 8px;
}

#bike-obby-fullscreen:hover {
  background: rgba(255,255,255,0.1);
}

#bike-obby-canvas-container {
  flex: 1;
  position: relative;
  overflow: hidden;
}

#bike-obby-canvas {
  width: 100%;
  height: 100%;
  background: #0a0a0a;
}

#bike-obby-stats {
  background: #2d2d2d;
  padding: 10px 20px;
  display: flex;
  justify-content: space-between;
  color: white;
  font-size: 0.9rem;
}

/* Fullscreen styles for Bike Obby */
#bike-obby-container.fullscreen {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  max-width: none;
  max-height: none;
  border-radius: 0;
  z-index: 1014;
}

#bike-obby-container.fullscreen #bike-obby-canvas-container {
  height: calc(100vh - 120px);
}

/* Responsive design for all screen sizes */
@media (max-width: 1200px) {
  .app-container {
    width: 98%;
    height: 95%;
  }
}

@media (max-width: 768px) {
  .app-container {
    width: 100%;
    height: 100%;
    max-width: none;
    max-height: none;
    border-radius: 0;
  }

  .sidebar {
    width: 70px;
    transition: width 0.3s ease;
  }

  .dm-section {
    display: none;
  }

  .sidebar:hover {
    width: 240px;
  }

  .sidebar:hover .dm-section {
    display: flex;
  }

  /* Adjust floating buttons for mobile */
  #edit-wallpaper,
  #audio-call-btn,
  #clear-messages-btn,
  #profile-picture-btn,
  #link-share-btn,
  #game-btn,
  #steal-brainrot-btn,
  #admin-panel-btn,
  #adblocker-btn,
  #bike-obby-btn {
    transform: scale(0.8);
  }

  #edit-wallpaper { right: 10px; }
  #audio-call-btn { right: 55px; }
  #clear-messages-btn { right: 100px; }
  #profile-picture-btn { right: 145px; }
  #link-share-btn { right: 190px; }
  #adblocker-btn { right: 235px; }
  #game-btn { right: 280px; }
  #steal-brainrot-btn { right: 325px; }
  #admin-panel-btn { right: 370px; }
  #bike-obby-btn { right: 415px; }

  .message-container {
    max-width: 95%;
  }
}

@media (max-width: 480px) {
  .header {
    font-size: 1.1rem;
    padding: 15px 10px;
  }

  .header span {
    font-size: 0.65rem;
  }

  .message {
    padding: 10px 14px;
    font-size: 0.9rem;
  }

  .input-container {
    padding: 8px 10px;
  }

  input {
    font-size: 14px;
    padding: 10px 14px;
  }

  /* Stack floating buttons vertically on very small screens */
  #edit-wallpaper,
  #audio-call-btn,
  #clear-messages-btn,
  #profile-picture-btn,
  #link-share-btn,
  #adblocker-btn,
  #game-btn,
  #steal-brainrot-btn,
  #admin-panel-btn,
  #bike-obby-btn {
    position: fixed;
    right: 10px;
    transform: scale(0.7);
  }

  #edit-wallpaper { top: 15px; }
  #audio-call-btn { top: 65px; }
  #clear-messages-btn { top: 115px; }
  #profile-picture-btn { top: 165px; }
  #link-share-btn { top: 215px; }
  #adblocker-btn { top: 265px; }
  #game-btn { top: 315px; }
  #steal-brainrot-btn { top: 365px; }
  #admin-panel-btn { top: 415px; }
  #bike-obby-btn { top: 465px; }
}

/* Rest of your existing CSS remains exactly the same */
* {
-webkit-tap-highlight-color: transparent;
box-sizing: border-box;
}

body {
margin: 0;
font-family: 'Whitney', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
background: linear-gradient(135deg, #667eea, #764ba2);
height: 100vh;
height: 100dvh;
display: flex;
justify-content: center;
align-items: center;
background-size: cover;
background-position: center;
background-attachment: fixed;
padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
overflow: hidden;
}

.app-container {
display: flex;
width: 95%;
max-width: 1200px;
height: 90%;
max-height: 800px;
background: rgba(255,255,255,0.95);
border-radius: 20px;
box-shadow: 0 20px 60px rgba(0,0,0,0.3);
overflow: hidden;
}

.sidebar {
width: 240px;
background-color: #2f3136;
display: flex;
flex-direction: column;
overflow: hidden;
}

.server-list {
display: flex;
flex-direction: column;
align-items: center;
padding: 12px 0;
background-color: #202225;
border-bottom: 1px solid rgba(255,255,255,0.1);
}

.server-icon {
width: 48px;
height: 48px;
border-radius: 50%;
background-color: #36393f;
margin: 8px 0;
display: flex;
align-items: center;
justify-content: center;
color: #dcddde;
font-size: 18px;
cursor: pointer;
transition: border-radius 0.2s ease, background-color 0.2s ease;
}

.server-icon:hover {
border-radius: 16px;
background-color: #5865f2;
}

.server-icon.active {
border-radius: 16px;
background-color: #5865f2;
}

.dm-section {
flex: 1;
display: flex;
flex-direction: column;
overflow: hidden;
}

.dm-header {
padding: 16px 8px 8px 16px;
color: #8e9297;
font-size: 12px;
font-weight: 600;
text-transform: uppercase;
display: flex;
justify-content: space-between;
align-items: center;
font-family: 'Ginto', 'Whitney', sans-serif;
}

.dm-header span {
  cursor: pointer;
  transition: color 0.2s ease;
}

.dm-header span:hover {
  color: #dcddde;
}

.dm-list {
flex: 1;
overflow-y: auto;
padding: 0 8px;
}

.dm-item {
display: flex;
align-items: center;
padding: 8px;
margin: 2px 0;
border-radius: 4px;
cursor: pointer;
color: #8e9297;
transition: background-color 0.2s ease, color 0.2s ease;
font-family: 'Whitney', sans-serif;
}

.dm-item:hover {
background-color: rgba(79,84,92,0.32);
color: #dcddde;
}

.dm-item.active {
background-color: rgba(79,84,92,0.6);
color: white;
}

.dm-avatar {
width: 32px;
height: 32px;
border-radius: 50%;
margin-right: 12px;
background-color: #36393f;
display: flex;
align-items: center;
justify-content: center;
font-size: 14px;
overflow: hidden;
}

.dm-avatar img {
width: 100%;
height: 100%;
border-radius: 50%;
object-fit: cover;
}

.dm-info {
flex: 1;
display: flex;
flex-direction: column;
}

.dm-name {
font-size: 14px;
font-weight: 500;
font-family: 'Whitney', sans-serif;
}

.dm-status {
font-size: 10px;
color: #72767d;
font-family: 'Whitney', sans-serif;
}

.dm-status.online {
color: #3ba55c;
}

.dm-status.offline {
color: #72767d;
}

.user-section {
padding: 8px;
background-color: #292b2f;
display: flex;
align-items: center;
}

.user-avatar {
width: 32px;
height: 32px;
border-radius: 50%;
margin-right: 8px;
background-color: #36393f;
display: flex;
align-items: center;
justify-content: center;
font-size: 14px;
overflow: hidden;
}

.user-avatar img {
width: 100%;
height: 100%;
border-radius: 50%;
object-fit: cover;
}

.user-info {
flex: 1;
display: flex;
flex-direction: column;
}

.user-name {
font-size: 14px;
font-weight: 600;
color: white;
font-family: 'Whitney', sans-serif;
cursor: pointer; /* ADDED: Make name clickable */
position: relative;
display: flex;
align-items: center;
gap: 5px;
}

.user-name:hover {
color: #dcddde; /* ADDED: Hover effect */
}

.user-name::after {
  content: "edit";
  font-family: 'Material Icons';
  font-size: 14px;
  opacity: 0;
  transition: opacity 0.2s ease;
}

.user-name:hover::after {
  opacity: 1;
}

.user-tag {
font-size: 12px;
color: #b9bbbe;
font-family: 'Whitney', sans-serif;
}

.user-controls {
display: flex;
gap: 4px;
}

.user-control {
width: 32px;
height: 32px;
border-radius: 4px;
display: flex;
align-items: center;
justify-content: center;
color: #b9bbbe;
cursor: pointer;
transition: background-color 0.2s ease, color 0.2s ease;
}

.user-control:hover {
background-color: rgba(79,84,92,0.32);
color: #dcddde;
}

.chat-container {
flex: 1;
display: flex;
flex-direction: column;
overflow: hidden;
}

.header {
background-color: #5a67d8;
color: white;
font-size: 1.4rem;
font-weight: bold;
padding: 20px 15px;
text-align: center;
display: flex;
justify-content: space-between;
align-items: center;
padding-top: max(20px, env(safe-area-inset-top));
font-family: 'Ginto', 'Whitney', sans-serif;
}
.header span {
font-size: 0.75rem;
opacity: 0.9;
cursor: default; /* CHANGED: Remove click from header */
display: flex;
align-items: center;
gap: 5px;
font-family: 'Whitney', sans-serif;
}

#messages {
flex: 1;
padding: 15px;
overflow-y: auto;
background: transparent;
display: flex;
flex-direction: column;
gap: 12px;
}

.message-container {
max-width: 85%;
display: flex;
flex-direction: column;
animation: fadeIn 0.3s ease forwards;
position: relative;
}
.message-container.self {
align-self: flex-end;
align-items: flex-end;
}
.message-container.other {
align-self: flex-start;
align-items: flex-start;
}

.message-content {
display: flex;
align-items: flex-end;
gap: 8px;
max-width: 100%;
}

.message-avatar {
width: 32px;
height: 32px;
border-radius: 50%;
object-fit: cover;
flex-shrink: 0;
}

.message-bubble {
display: flex;
flex-direction: column;
max-width: calc(100% - 40px);
}

.sender-name {
font-size: 0.7rem;
color: #666;
margin-bottom: 3px;
padding: 0 8px;
font-family: 'Whitney', sans-serif;
font-weight: 500;
}

.message {
padding: 12px 16px;
border-radius: 20px;
word-wrap: break-word;
font-size: 0.95rem;
line-height: 1.3;
position: relative;
max-width: fit-content;
min-width: 0;
white-space: pre-wrap;
word-break: break-word;
font-family: 'Whitney', sans-serif;
}
.message.self {
background-color: #6b7de8;
color: white;
border-bottom-right-radius: 6px;
}
.message.other {
background-color: #e2e8f0;
color: #2d3748;
border-bottom-left-radius: 6px;
}

/* Link styling */
.message a {
color: #5865f2;
text-decoration: none;
font-weight: 500;
}
.message.self a {
color: white;
text-decoration: underline;
}
.message.other a {
color: #5865f2;
}
.message a:hover {
text-decoration: underline;
}

/* Markdown formatting styles */
.message strong {
font-weight: 600;
}

.message em {
font-style: italic;
}

.date-separator {
display: flex;
align-items: center;
justify-content: center;
margin: 15px 0;
position: relative;
}

.date-separator::before {
content: "";
position: absolute;
top: 50%;
left: 0;
right: 0;
height: 1px;
background: rgba(255, 0, 0, 0.2);
z-index: 1;
}

.date-label {
background: rgba(255, 255, 255, 0.8);
padding: 4px 12px;
border-radius: 12px;
font-size: 0.7rem;
color: #666;
z-index: 2;
border: 1px solid rgba(255, 0, 0, 0.1);
font-family: 'Whitney', sans-serif;
}

.encryption-indicator {
font-size: 0.6rem;
color: #38a169;
margin-top: 2px;
padding: 0 8px;
text-align: right;
font-family: 'Whitney', sans-serif;
}
.encryption-indicator.other {
text-align: left;
}

.message-actions {
position: absolute;
top: -8px;
right: 8px;
background: white;
border-radius: 15px;
box-shadow: 0 2px 8px rgba(0,0,0,0.15);
display: none;
gap: 4px;
padding: 4px;
z-index: 10;
}
.message-container:hover .message-actions {
display: flex;
}
.message-action {
background: none;
border: none;
border-radius: 50%;
width: 28px;
height: 28px;
display: flex;
align-items: center;
justify-content: center;
cursor: pointer;
font-size: 0.8rem;
transition: background-color 0.2s ease;
}
.message-action:hover {
background: #f7fafc;
}
.delete-btn {
color: #e53e3e;
}
.edit-btn {
color: #3182ce;
}

.reaction-btn {
color: #718096;
}

.attachment-btn {
color: #805ad5;
}

@keyframes fadeIn {
from { opacity: 0; transform: translateY(10px); }
to { opacity: 1; transform: translateY(0); }
}

.input-container {
display: flex;
flex-direction: column;
border-top: 1px solid #e2e8f0;
background: white;
padding: 10px 15px;
padding-bottom: max(10px, env(safe-area-inset-bottom));
position: relative;
}

form {
display: flex;
gap: 10px;
}

input {
flex: 1;
font-size: 16px;
padding: 12px 16px;
border: 2px solid #e2e8f0;
border-radius: 25px;
outline: none;
background: white;
min-height: 44px;
font-family: 'Whitney', sans-serif;
}
input:focus {
border-color: #5a67d8;
}

button {
background-color: #5a67d8;
border: none;
color: white;
padding: 0 20px;
border-radius: 25px;
cursor: pointer;
font-weight: bold;
min-height: 44px;
min-width: 60px;
font-family: 'Whitney', sans-serif;
}
button:disabled {
background-color: #a0aec0;
cursor: not-allowed;
}

#edit-wallpaper {
position: fixed;
top: 15px;
right: 15px;
background-color: #5a67d8;
border: none;
color: white;
padding: 12px;
border-radius: 50%;
cursor: pointer;
font-size: 1rem;
font-weight: bold;
box-shadow: 0 4px 12px rgba(0,0,0,0.3);
transition: background-color 0.2s ease;
z-index: 1000;
min-height: 44px;
min-width: 44px;
display: flex;
align-items: center;
justify-content: center;
}
#edit-wallpaper:hover {
background-color: #434190;
}

#audio-call-btn {
position: fixed;
top: 15px;
right: 70px;
background-color: #38a169;
border: none;
color: white;
padding: 12px;
border-radius: 50%;
cursor: pointer;
font-size: 1rem;
font-weight: bold;
box-shadow: 0 4px 12px rgba(0,0,0,0.3);
transition: background-color 0.2s ease;
z-index: 1000;
min-height: 44px;
min-width: 44px;
display: flex;
align-items: center;
justify-content: center;
}
#audio-call-btn:hover {
background-color: #2f855a;
}

#clear-messages-btn {
position: fixed;
top: 15px;
right: 125px;
background-color: #e53e3e;
border: none;
color: white;
padding: 12px;
border-radius: 50%;
cursor: pointer;
font-size: 1rem;
font-weight: bold;
box-shadow: 0 4px 12px rgba(0,0,0,0.3);
transition: background-color 0.2s ease;
z-index: 1000;
min-height: 44px;
min-width: 44px;
display: flex;
align-items: center;
justify-content: center;
}
#clear-messages-btn:hover {
background-color: #c53030;
}

#profile-picture-btn {
position: fixed;
top: 15px;
right: 180px; /* ADJUSTED: Moved left */
background-color: #9f7aea;
border: none;
color: white;
padding: 12px;
border-radius: 50%;
cursor: pointer;
font-size: 1rem;
font-weight: bold;
box-shadow: 0 4px 12px rgba(0,0,0,0.3);
transition: background-color 0.2s ease;
z-index: 1000;
min-height: 44px;
min-width: 44px;
display: flex;
align-items: center;
justify-content: center;
}
#profile-picture-btn:hover {
background-color: #805ad5;
}

#link-share-btn {
position: fixed;
top: 15px;
right: 235px; /* ADJUSTED: Moved left */
background-color: #ed8936;
border: none;
color: white;
padding: 12px;
border-radius: 50%;
cursor: pointer;
font-size: 1rem;
font-weight: bold;
box-shadow: 0 4px 12px rgba(0,0,0,0.3);
transition: background-color 0.2s ease;
z-index: 1000;
min-height: 44px;
min-width: 44px;
display: flex;
align-items: center;
justify-content: center;
}
#link-share-btn:hover {
background-color: #dd6b20;
}

#encryption-key-modal {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0,0,0,0.8);
display: none;
justify-content: center;
align-items: center;
z-index: 1001;
padding: 20px;
}

#encryption-key-container {
background: white;
border-radius: 20px;
padding: 25px;
max-width: 400px;
width: 100%;
text-align: center;
font-family: 'Whitney', sans-serif;
}

#encryption-key-display {
background: #f7fafc;
border: 2px dashed #e2e8f0;
border-radius: 12px;
padding: 15px;
margin: 15px 0;
font-family: monospace;
word-break: break-all;
font-size: 0.9rem;
line-height: 1.4;
}

.encryption-key-buttons {
display: flex;
gap: 10px;
justify-content: center;
margin-top: 20px;
flex-wrap: wrap;
}

.encryption-key-buttons button {
min-width: 120px;
}

#enter-key-modal {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0,0,0,0.8);
display: none;
justify-content: center;
align-items: center;
z-index: 1002;
padding: 20px;
}

#enter-key-container {
background: white;
border-radius: 20px;
padding: 25px;
max-width: 400px;
width: 100%;
text-align: center;
font-family: 'Whitney', sans-serif;
}

#encryption-key-input {
width: 100%;
font-family: monospace;
margin: 15px 0;
}

.key-entry-buttons {
display: flex;
gap: 10px;
justify-content: center;
margin-top: 20px;
flex-wrap: wrap;
}

.key-entry-buttons button {
min-width: 120px;
}

#wallpaper-modal {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0,0,0,0.8);
display: none;
justify-content: center;
align-items: center;
z-index: 999;
padding: 20px;
}

#wallpaper-options {
background: white;
border-radius: 20px;
padding: 25px;
display: flex;
gap: 15px;
flex-wrap: wrap;
justify-content: center;
max-width: 400px;
width: 100%;
max-height: 80vh;
overflow-y: auto;
}

.wallpaper-option {
width: 100px;
height: 80px;
border-radius: 12px;
cursor: pointer;
border: 3px solid transparent;
background-size: cover;
background-position: center;
transition: transform 0.2s ease;
}
.wallpaper-option:hover {
transform: scale(1.05);
border-color: #5a67d8;
}

.wallpaper-label {
font-size: 0.7rem;
text-align: center;
margin-top: 5px;
color: #666;
font-family: 'Whitney', sans-serif;
}

#profile-picture-modal {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0,0,0,0.8);
display: none;
justify-content: center;
align-items: center;
z-index: 1005;
padding: 20px;
}

#profile-picture-options {
background: white;
border-radius: 20px;
padding: 25px;
display: flex;
gap: 15px;
flex-wrap: wrap;
justify-content: center;
max-width: 400px;
width: 100%;
max-height: 80vh;
overflow-y: auto;
}

.profile-picture-option {
width: 80px;
height: 80px;
border-radius: 50%;
cursor: pointer;
border: 3px solid transparent;
background-size: cover;
background-position: center;
transition: transform 0.2s ease;
}
.profile-picture-option:hover {
transform: scale(1.1);
border-color: #5a67d8;
}

.profile-picture-label {
font-size: 0.7rem;
text-align: center;
margin-top: 5px;
color: #666;
font-family: 'Whitney', sans-serif;
}

.status {
text-align: center;
padding: 8px;
font-size: 0.75rem;
background: #f7fafc;
border-top: 1px solid #e2e8f0;
min-height: 32px;
display: flex;
align-items: center;
justify-content: center;
font-family: 'Whitney', sans-serif;
}
.status.connected {
color: #38a169;
}
.status.disconnected {
color: #e53e3e;
}

.error-message {
background: #fed7d7;
border: 1px solid #feb2b2;
border-radius: 12px;
padding: 12px;
margin: 12px;
font-size: 0.75rem;
color: #c53030;
text-align: center;
display: none;
font-family: 'Whitney', sans-serif;
}

.success-message {
background: #c6f6d5;
border: 1px solid #9ae6b4;
border-radius: 12px;
padding: 12px;
margin: 12px;
font-size: 0.75rem;
color: #276749;
text-align: center;
font-family: 'Whitney', sans-serif;
}

.loading-dots:after {
content: '';
animation: dots 1.5s steps(5, end) infinite;
}
@keyframes dots {
0%, 20% { content: '.'; }
40% { content: '..'; }
60% { content: '...'; }
80%, 100% { content: ''; }
}

.wallpaper-grid {
display: flex;
flex-direction: column;
align-items: center;
gap: 8px;
}

.profile-picture-grid {
display: flex;
flex-direction: column;
align-items: center;
gap: 8px;
}

.security-indicator {
position: fixed;
top: 15px;
left: 15px;
background: #38a169;
color: white;
padding: 8px 12px;
border-radius: 20px;
font-size: 0.7rem;
font-weight: bold;
box-shadow: 0 2px 8px rgba(0,0,0,0.2);
z-index: 1000;
display: flex;
align-items: center;
gap: 6px;
cursor: pointer;
font-family: 'Whitney', sans-serif;
}
.security-indicator:hover {
background: #2f855a;
}

#audio-call-container {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0,0,0,0.9);
display: none;
flex-direction: column;
justify-content: center;
align-items: center;
z-index: 1003;
padding: 20px;
}

#audio-call-info {
text-align: center;
color: white;
margin-bottom: 30px;
font-family: 'Whitney', sans-serif;
}

#caller-avatar {
width: 120px;
height: 120px;
border-radius: 50%;
object-fit: cover;
margin-bottom: 20px;
border: 4px solid white;
}

#caller-name {
font-size: 1.5rem;
font-weight: bold;
margin-bottom: 10px;
font-family: 'Ginto', 'Whitney', sans-serif;
}

#call-status {
font-size: 1rem;
color: #ccc;
font-family: 'Whitney', sans-serif;
}

#call-controls {
display: flex;
gap: 20px;
margin-top: 30px;
}

.call-btn {
background-color: #e53e3e;
border: none;
color: white;
padding: 15px;
border-radius: 50%;
cursor: pointer;
font-size: 1.5rem;
width: 70px;
height: 70px;
display: flex;
align-items: center;
justify-content: center;
box-shadow: 0 4px 12px rgba(0,0,0,0.3);
transition: background-color 0.2s ease;
}

.call-btn:hover {
background-color: #c53030;
}

.call-btn.accept {
background-color: #38a169;
}

.call-btn.accept:hover {
background-color: #2f855a;
}

#incoming-call-modal {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0,0,0,0.8);
display: none;
justify-content: center;
align-items: center;
z-index: 1004;
padding: 20px;
}

#incoming-call-container {
background: white;
border-radius: 20px;
padding: 25px;
max-width: 400px;
width: 100%;
text-align: center;
font-family: 'Whitney', sans-serif;
}

#incoming-call-info {
font-size: 1.2rem;
margin-bottom: 20px;
font-family: 'Whitney', sans-serif;
}

#incoming-call-controls {
display: flex;
gap: 15px;
justify-content: center;
}

.typing-indicator {
display: flex;
align-items: center;
gap: 4px;
font-size: 0.7rem;
color: #666;
margin: 5px 0;
padding: 0 8px;
background: transparent;
align-self: flex-start;
justify-content: flex-start;
width: 100%;
height: 20px;
font-family: 'Whitney', sans-serif;
}

.typing-dots {
display: flex;
gap: 3px;
}

.typing-dot {
width: 6px;
height: 6px;
border-radius: 50%;
background-color: #a0aec0;
animation: typing-wave 1.4s ease-in-out infinite both;
}

.typing-dot:nth-child(1) {
animation-delay: -0.32s;
}

.typing-dot:nth-child(2) {
animation-delay: -0.16s;
}

@keyframes typing-wave {
0%, 80%, 100% {
transform: scale(0.8);
opacity: 0.5;
}
40% {
transform: scale(1);
opacity: 1;
}
}

#call-user-modal {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0,0,0,0.8);
display: none;
justify-content: center;
align-items: center;
z-index: 1006;
padding: 20px;
}

#call-user-container {
background: white;
border-radius: 20px;
padding: 25px;
max-width: 400px;
width: 100%;
text-align: center;
font-family: 'Whitney', sans-serif;
}

#call-user-list {
max-height: 300px;
overflow-y: auto;
margin: 15px 0;
}

.call-user-option {
display: flex;
align-items: center;
gap: 10px;
padding: 12px;
border-radius: 10px;
cursor: pointer;
transition: background-color 0.2s ease;
font-family: 'Whitney', sans-serif;
}

.call-user-option:hover {
background-color: #f7fafc;
}

.call-user-avatar {
width: 40px;
height: 40px;
border-radius: 50%;
object-fit: cover;
}

.call-user-name {
font-weight: 500;
font-family: 'Whitney', sans-serif;
}

.call-user-status {
font-size: 0.7rem;
color: #38a169;
font-family: 'Whitney', sans-serif;
}

.call-user-status.offline {
color: #a0aec0;
}

.call-user-buttons {
display: flex;
gap: 10px;
justify-content: center;
margin-top: 20px;
}

#microphone-permission-modal {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0,0,0,0.8);
display: none;
justify-content: center;
align-items: center;
z-index: 1007;
padding: 20px;
}

#microphone-permission-container {
background: white;
border-radius: 20px;
padding: 25px;
max-width: 400px;
width: 100%;
text-align: center;
font-family: 'Whitney', sans-serif;
}

#microphone-permission-info {
font-size: 1.1rem;
margin-bottom: 20px;
font-family: 'Whitney', sans-serif;
}

#microphone-permission-controls {
display: flex;
gap: 15px;
justify-content: center;
}

.hidden {
display: none !important;
}

.material-icons {
font-size: inherit;
vertical-align: middle;
}

.notification {
position: fixed;
top: 20px;
right: 20px;
background: white;
border-radius: 10px;
padding: 15px 20px;
box-shadow: 0 4px 12px rgba(0,0,0,0.3);
z-index: 2000;
display: flex;
align-items: center;
gap: 10px;
max-width: 350px;
animation: slideIn 0.3s ease;
font-family: 'Whitney', sans-serif;
}

.notification.call {
border-left: 4px solid #38a169;
}

.notification-content {
flex: 1;
}

.notification-title {
font-weight: bold;
margin-bottom: 5px;
font-family: 'Ginto', 'Whitney', sans-serif;
}

.notification-message {
font-size: 0.9rem;
color: #666;
font-family: 'Whitney', sans-serif;
}

.notification-actions {
display: flex;
gap: 8px;
margin-top: 8px;
}

.notification-btn {
padding: 6px 12px;
border-radius: 6px;
border: none;
cursor: pointer;
font-size: 0.8rem;
font-weight: bold;
font-family: 'Whitney', sans-serif;
}

.notification-btn.accept {
background-color: #38a169;
color: white;
}

.notification-btn.decline {
background-color: #e53e3e;
color: white;
}

.notification-btn.close {
background-color: #a0aec0;
color: white;
}

@keyframes slideIn {
from { transform: translateX(100%); opacity: 0; }
to { transform: translateX(0); opacity: 1; }
}

@keyframes slideOut {
from { transform: translateX(0); opacity: 1; }
to { transform: translateX(100%); opacity: 0; }
}

/* Emoji Reactions Styles */
.reactions-container {
display: flex;
flex-wrap: wrap;
gap: 4px;
margin-top: 6px;
padding: 0 8px;
}

.reaction {
display: flex;
align-items: center;
gap: 4px;
background: rgba(0, 0, 0, 0.05);
border-radius: 12px;
padding: 2px 6px;
font-size: 0.75rem;
cursor: pointer;
transition: background-color 0.2s ease;
font-family: 'Whitney', sans-serif;
}

.reaction:hover {
background: rgba(0, 0, 0, 0.1);
}

.reaction.self-reacted {
background: rgba(88, 101, 242, 0.2);
border: 1px solid rgba(88, 101, 242, 0.5);
}

.reaction-count {
font-size: 0.7rem;
color: #666;
font-family: 'Whitney', sans-serif;
}

#emoji-picker-modal {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0,0,0,0.8);
display: none;
justify-content: center;
align-items: center;
z-index: 1008;
padding: 20px;
}

#emoji-picker-container {
background: white;
border-radius: 20px;
padding: 25px;
max-width: 400px;
width: 100%;
text-align: center;
font-family: 'Whitney', sans-serif;
}

#emoji-picker-title {
margin-bottom: 15px;
font-weight: bold;
font-family: 'Ginto', 'Whitney', sans-serif;
}

#emoji-picker-grid {
display: grid;
grid-template-columns: repeat(6, 1fr);
gap: 8px;
margin: 15px 0;
}

.emoji-option {
font-size: 1.5rem;
padding: 8px;
border-radius: 8px;
cursor: pointer;
transition: background-color 0.2s ease;
}

.emoji-option:hover {
background-color: #f7fafc;
}

.emoji-picker-buttons {
display: flex;
gap: 10px;
justify-content: center;
margin-top: 20px;
}

/* File Upload Styles */
#file-upload-modal {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0,0,0,0.8);
display: none;
justify-content: center;
align-items: center;
z-index: 1009;
padding: 20px;
}

#file-upload-container {
background: white;
border-radius: 20px;
padding: 25px;
max-width: 500px;
width: 100%;
text-align: center;
font-family: 'Whitney', sans-serif;
}

#file-upload-area {
border: 2px dashed #e2e8f0;
border-radius: 12px;
padding: 30px;
margin: 15px 0;
cursor: pointer;
transition: border-color 0.2s ease;
}

#file-upload-area:hover {
border-color: #5a67d8;
}

#file-upload-area.dragover {
border-color: #5a67d8;
background-color: #f7fafc;
}

#file-upload-icon {
font-size: 3rem;
color: #a0aec0;
margin-bottom: 15px;
}

#file-upload-text {
font-size: 1rem;
color: #4a5568;
margin-bottom: 10px;
font-family: 'Whitney', sans-serif;
}

#file-upload-hint {
font-size: 0.8rem;
color: #718096;
font-family: 'Whitney', sans-serif;
}

#file-preview {
margin: 15px 0;
max-height: 200px;
overflow: hidden;
border-radius: 8px;
}

#file-preview img,
#file-preview video {
max-width: 100%;
max-height: 200px;
border-radius: 8px;
}

.file-upload-buttons {
display: flex;
gap: 10px;
justify-content: center;
margin-top: 20px;
}

/* GIF and Sticker Styles */
#gif-sticker-modal {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0,0,0,0.8);
display: none;
justify-content: center;
align-items: center;
z-index: 1010;
padding: 20px;
}

#gif-sticker-container {
background: white;
border-radius: 20px;
padding: 25px;
max-width: 600px;
width: 100%;
max-height: 80vh;
overflow: hidden;
display: flex;
flex-direction: column;
font-family: 'Whitney', sans-serif;
}

#gif-sticker-tabs {
display: flex;
gap: 0;
border-bottom: 1px solid #e2e8f0;
margin-bottom: 15px;
}

.gif-sticker-tab {
flex: 1;
padding: 12px;
background: none;
border: none;
border-bottom: 3px solid transparent;
cursor: pointer;
font-weight: 500;
transition: all 0.2s ease;
font-family: 'Whitney', sans-serif;
}

.gif-sticker-tab.active {
border-bottom-color: #5a67d8;
color: #5a67d8;
}

#gif-sticker-content {
flex: 1;
overflow-y: auto;
padding: 10px 0;
}

.gif-sticker-grid {
display: grid;
grid-template-columns: repeat(4, 1fr);
gap: 10px;
}

.gif-sticker-item {
width: 100%;
aspect-ratio: 1;
border-radius: 8px;
overflow: hidden;
cursor: pointer;
transition: transform 0.2s ease;
}

.gif-sticker-item:hover {
transform: scale(1.05);
}

.gif-sticker-item img {
width: 100%;
height: 100%;
object-fit: cover;
}

.gif-sticker-buttons {
display: flex;
gap: 10px;
justify-content: center;
margin-top: 20px;
}

/* Attachment Styles */
.attachment {
margin-top: 8px;
border-radius: 8px;
overflow: hidden;
max-width: 300px;
}

.attachment img,
.attachment video {
max-width: 100%;
max-height: 200px;
border-radius: 8px;
}

.attachment-file {
display: flex;
align-items: center;
gap: 8px;
padding: 8px 12px;
background: rgba(0, 0, 0, 0.05);
border-radius: 8px;
}

.file-icon {
font-size: 1.5rem;
color: #4a5568;
}

.file-info {
flex: 1;
}

.file-name {
font-weight: 500;
font-size: 0.9rem;
font-family: 'Whitney', sans-serif;
}

.file-size {
font-size: 0.7rem;
color: #718096;
font-family: 'Whitney', sans-serif;
}

.download-btn {
background: none;
border: none;
color: #5a67d8;
cursor: pointer;
padding: 4px;
border-radius: 4px;
}

.download-btn:hover {
background: rgba(90, 103, 216, 0.1);
}

/* Input Controls */
.input-controls {
display: flex;
gap: 8px;
margin-bottom: 8px;
}

.input-control-btn {
background: none;
border: none;
padding: 8px;
border-radius: 50%;
cursor: pointer;
color: #718096;
transition: background-color 0.2s ease, color 0.2s ease;
}

.input-control-btn:hover {
background: #f7fafc;
color: #4a5568;
}

.input-control-btn.active {
background: #5a67d8;
color: white;
}

/* New styles for enhanced features */
.gif-loading {
display: flex;
align-items: center;
justify-content: center;
height: 100px;
color: #666;
font-family: 'Whitney', sans-serif;
}

.gif-search {
margin-bottom: 15px;
}

.gif-search input {
width: 100%;
padding: 10px;
border: 1px solid #e2e8f0;
border-radius: 8px;
font-size: 14px;
font-family: 'Whitney', sans-serif;
}

.sticker-category {
margin-bottom: 15px;
}

.sticker-category h4 {
margin: 0 0 8px 0;
color: #4a5568;
font-size: 0.9rem;
font-family: 'Ginto', 'Whitney', sans-serif;
}

/* Link Share Modal */
#link-share-modal {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0,0,0,0.8);
display: none;
justify-content: center;
align-items: center;
z-index: 1011;
padding: 20px;
}

#link-share-container {
background: white;
border-radius: 20px;
padding: 25px;
max-width: 500px;
width: 100%;
text-align: center;
font-family: 'Whitney', sans-serif;
}

#link-share-title {
margin-bottom: 15px;
font-family: 'Ginto', 'Whitney', sans-serif;
}

.link-share-field {
margin: 15px 0;
text-align: left;
}

.link-share-field label {
display: block;
margin-bottom: 5px;
font-weight: 500;
color: #4a5568;
}

.link-share-field input {
width: 100%;
padding: 10px;
border: 1px solid #e2e8f0;
border-radius: 8px;
font-family: 'Whitney', sans-serif;
}

.link-share-buttons {
display: flex;
gap: 10px;
justify-content: center;
margin-top: 20px;
}

/* Preview for link sharing */
.link-preview {
margin-top: 10px;
padding: 10px;
background: #f7fafc;
border-radius: 8px;
border: 1px solid #e2e8f0;
text-align: left;
}

.link-preview-title {
font-weight: 500;
margin-bottom: 5px;
font-family: 'Whitney', sans-serif;
}

.link-preview-url {
font-size: 0.8rem;
color: #718096;
font-family: 'Whitney', sans-serif;
}

/* Text Formatting Controls */
.formatting-controls {
display: flex;
gap: 4px;
margin-bottom: 8px;
}

.format-btn {
background: none;
border: none;
padding: 6px 8px;
border-radius: 4px;
cursor: pointer;
color: #718096;
font-size: 14px;
font-weight: bold;
transition: background-color 0.2s ease, color 0.2s ease;
font-family: 'Whitney', sans-serif;
}

.format-btn:hover {
background: #f7fafc;
color: #4a5568;
}

.format-btn.active {
background: #5a67d8;
color: white;
}

/* NEW STYLES FOR ADDED FEATURES */

/* Mention highlighting */
.message.mentioned {
  background-color: rgba(255, 255, 0, 0.2) !important;
  border: 1px solid rgba(255, 204, 0, 0.5) !important;
  border-radius: 8px;
}

/* Mention styling in message text */
.mention {
  background-color: rgba(88, 101, 242, 0.3);
  color: #5865f2;
  padding: 1px 4px;
  border-radius: 3px;
  font-weight: 500;
}

/* Edited indicator */
.edited-indicator {
  font-size: 0.7rem;
  color: #72767d;
  font-style: italic;
  margin-left: 4px;
}

/* Service worker notification */
.sw-notification {
  position: fixed;
  bottom: 20px;
  left: 20px;
  background: #4a5568;
  color: white;
  padding: 12px 16px;
  border-radius: 8px;
  z-index: 10000;
  display: none;
}
</style>
</head>
<body>
<!-- Your existing HTML remains completely unchanged -->
<div class="security-indicator" title="Click to manage encryption key" id="security-indicator">
<span class="material-icons">lock</span> Encrypted
</div>
<button id="edit-wallpaper" title="Edit wallpaper"><span class="material-icons">palette</span></button>
<button id="audio-call-btn" title="Start audio call"><span class="material-icons">call</span></button>
<button id="clear-messages-btn" title="Clear all messages"><span class="material-icons">delete</span></button>
<button id="profile-picture-btn" title="Change profile picture"><span class="material-icons">person</span></button>
<button id="link-share-btn" title="Share a link"><span class="material-icons">link</span></button>
<!-- NEW: Game Button -->
<button id="game-btn" title="Play Grow a Garden"><span class="material-icons">sports_esports</span></button>
<!-- FIXED: Steal a Brainrot Button -->
<button id="steal-brainrot-btn" title="Play Steal a Brainrot"><span class="material-icons">casino</span></button>
<!-- NEW: Bike Obby Button -->
<button id="bike-obby-btn" title="Play Bike Obby"><span class="material-icons">directions_bike</span></button>
<!-- NEW: Admin Panel Button -->
<button id="admin-panel-btn" title="Admin Panel"><span class="material-icons">admin_panel_settings</span></button>
<!-- NEW: Adblocker Toggle Button - MOVED next to link button -->
<button id="adblocker-btn" title="Toggle Adblocker"><span class="material-icons">block</span></button>

<div class="app-container">
<!-- Discord-like Sidebar -->
<div class="sidebar">
<!-- Server List -->
<div class="server-list">
<div class="server-icon active" data-server="home">
<span class="material-icons">home</span>
</div>
<div class="server-icon" data-server="dms">
<span class="material-icons">chat</span>
</div>
</div>

<!-- DM Section -->
<div class="dm-section">
<div class="dm-header">
DIRECT MESSAGES
<span class="material-icons">add</span>
</div>
<div class="dm-list" id="dm-list">
<!-- DM items will be populated by JavaScript -->
</div>

<!-- User Section - NAME CHANGE MOVED HERE -->
<div class="user-section">
<div class="user-avatar" id="user-sidebar-avatar">
<span class="material-icons">person</span>
</div>
<div class="user-info">
<div class="user-name" id="user-sidebar-name">Loading...</div>
<div class="user-tag" id="user-sidebar-tag">#0000</div>
</div>
<div class="user-controls">
<div class="user-control">
<span class="material-icons">mic</span>
</div>
<div class="user-control">
<span class="material-icons">headphones</span>
</div>
<div class="user-control">
<span class="material-icons">settings</span>
</div>
</div>
</div>
</div>
</div>

<!-- Chat Container -->
<div class="chat-container" role="main" aria-label="Encrypted chat application" id="chat-container">
<div class="header">
<div>Super Chat </div>
<span id="user-display">You: ...</span>
</div>

<div id="error-message" class="error-message hidden"></div>
<div id="success-message" class="success-message hidden"></div>

<div id="messages" aria-live="polite" aria-relevant="additions">
<div id="loading">Loading messages<span class="loading-dots"></span></div>
</div>

<div class="input-container">
<!-- Input Controls -->
<div class="input-controls">
<button class="input-control-btn" id="file-upload-btn" title="Upload file">
<span class="material-icons">attach_file</span>
</button>
<button class="input-control-btn" id="gif-sticker-btn" title="GIFs & Stickers">
<span class="material-icons">gif</span>
</button>
<!-- Text Formatting Controls -->
<button class="format-btn" id="bold-btn" title="Bold (Cmd+B)"><strong>B</strong></button>
<button class="format-btn" id="italic-btn" title="Italic (Cmd+I)"><em>I</em></button>
</div>

<div id="typing-indicator" class="typing-indicator hidden">
<span id="typing-text"></span>
<div class="typing-dots">
<div class="typing-dot"></div>
<div class="typing-dot"></div>
<div class="typing-dot"></div>
</div>
</div>

<form id="chat-form" aria-label="Send encrypted message form">
<input id="message-input" type="text" placeholder="Type your encrypted message..." autocomplete="off" required aria-required="true" />
<button type="submit" id="send-button">Send</button>
</form>
</div>

<div id="status" class="status hidden"></div>
</div>
</div>

<!-- NEW: Adblocker Modal -->
<div id="adblocker-modal">
  <div id="adblocker-container">
    <h3 id="adblocker-title"><span class="material-icons">block</span> Adblocker Settings</h3>
    <p>Toggle ad blocking for games on or off:</p>
    <div id="adblocker-status" class="adblocker-status active">
      <span class="material-icons">check_circle</span>
      <span>Adblocker is currently ACTIVE</span>
    </div>
    <div class="adblocker-buttons">
      <button id="disable-adblocker-btn" style="background-color: #f44336;">Disable Adblocker</button>
      <button id="enable-adblocker-btn" style="background-color: #4caf50;">Enable Adblocker</button>
      <button id="close-adblocker-btn">Close</button>
    </div>
  </div>
</div>

<!-- NEW: Admin Panel Modal -->
<div id="admin-modal">
  <div id="admin-container">
    <h3 id="admin-title"><span class="material-icons">admin_panel_settings</span> Admin Panel</h3>
    
    <div id="admin-login" class="admin-section">
      <h4>Admin Authentication Required</h4>
      <p>Please enter the admin password to access the admin panel:</p>
      <input type="password" id="admin-password-input" placeholder="Enter admin password" />
      <div style="display: flex; gap: 10px; justify-content: center; margin-top: 15px;">
        <button class="admin-login-btn" id="admin-login-btn">Login</button>
        <button class="admin-login-btn cancel" id="admin-cancel-btn">Cancel</button>
      </div>
    </div>
    
    <div id="admin-content" class="hidden">
      <div class="admin-section">
        <h4>User Management</h4>
        <div class="admin-user-list" id="admin-user-list">
          <!-- Users will be populated here -->
        </div>
      </div>
      
      <div class="admin-section">
        <h4>Rank Management</h4>
        <p>Select a rank to assign to users:</p>
        <div class="admin-rank-controls" id="admin-rank-controls">
          <!-- Rank options will be populated here -->
        </div>
      </div>
      
      <div style="text-align: center; margin-top: 20px;">
        <button class="admin-login-btn" id="admin-close-btn">Close Admin Panel</button>
      </div>
    </div>
  </div>
</div>

<!-- NEW: Game Modal -->
<div id="game-modal">
  <div id="game-container">
    <div id="game-header">
      <div id="game-title">Grow a Garden</div>
      <div class="header-controls">
        <button id="game-fullscreen" title="Toggle Fullscreen"><span class="material-icons">fullscreen</span></button>
        <button id="game-close"><span class="material-icons">close</span></button>
      </div>
    </div>
    <div id="game-canvas-container">
      <div class="ad-blocked-iframe">
        <!-- UPDATED: Changed to specified URL -->
        <iframe id="game-frame" src="https://maddox05.github.io/basic-ruffle-player/html/grow_a_garden/index.html" style="width:100%; height: 100%; border: none;"></iframe>
      </div>
    </div>
    <div id="game-stats">
      <div id="game-score">Playing: Grow a Garden</div>
    </div>
  </div>
</div>

<!-- FIXED: Steal a Brainrot Game Modal -->
<div id="steal-brainrot-modal">
  <div id="steal-brainrot-container">
    <div id="steal-brainrot-header">
      <div id="steal-brainrot-title">Steal a Brainrot</div>
      <div class="header-controls">
        <button id="steal-brainrot-fullscreen" title="Toggle Fullscreen"><span class="material-icons">fullscreen</span></button>
        <button id="steal-brainrot-close"><span class="material-icons">close</span></button>
      </div>
    </div>
    <div id="steal-brainrot-canvas-container">
      <div class="ad-blocked-iframe">
        <!-- UPDATED: Changed to specified URL -->
        <iframe id="steal-brainrot-frame" src="https://maddox05.github.io/basic-ruffle-player/html/steal_a_brainrot_2/index.html" style="width: 100%; height: 100%; border: none;"></iframe>
      </div>
    </div>
    <div id="steal-brainrot-stats">
      <div id="steal-brainrot-score">Playing: Steal a Brainrot</div>
    </div>
  </div>
</div>

<!-- NEW: Bike Obby Game Modal -->
<div id="bike-obby-modal">
  <div id="bike-obby-container">
    <div id="bike-obby-header">
      <div id="bike-obby-title">Bike Obby</div>
      <div class="header-controls">
        <button id="bike-obby-fullscreen" title="Toggle Fullscreen"><span class="material-icons">fullscreen</span></button>
        <button id="bike-obby-close"><span class="material-icons">close</span></button>
      </div>
    </div>
    <div id="bike-obby-canvas-container">
      <div class="ad-blocked-iframe">
        <!-- UPDATED: Changed to specified URL -->
        <iframe id="bike-obby-frame" src="https://maddox05.github.io/basic-ruffle-player/html/obby_but_youre_on_a_bike/index.html" style="width: 100%; height: 100%; border: none;"></iframe>
      </div>
    </div>
    <div id="bike-obby-stats">
      <div id="bike-obby-score">Playing: Bike Obby</div>
    </div>
  </div>
</div>

<!-- Audio Call Container -->
<div id="audio-call-container">
<div id="audio-call-info">
<img id="caller-avatar" src="" alt="Caller avatar">
<div id="caller-name"></div>
<div id="call-status">Call in progress...</div>
</div>
<div id="call-controls">
<button class="call-btn" id="end-call-btn" title="End call"><span class="material-icons">call_end</span></button>
</div>
</div>

<!-- Incoming Call Modal -->
<div id="incoming-call-modal">
<div id="incoming-call-container">
<h3><span class="material-icons">call</span> Incoming Audio Call</h3>
<div id="incoming-call-info">Someone is calling you...</div>
<div id="incoming-call-controls">
<button class="call-btn accept" id="accept-call-btn"><span class="material-icons">call</span></button>
<button class="call-btn" id="reject-call-btn"><span class="material-icons">close</span></button>
</div>
</div>
</div>

<!-- Call User Selection Modal -->
<div id="call-user-modal">
<div id="call-user-container">
<h3><span class="material-icons">call</span> Call a User</h3>
<p>Select who you want to call:</p>
<div id="call-user-list"></div>
<div class="call-user-buttons">
<button id="cancel-call-btn">Cancel</button>
</div>
</div>
</div>

<!-- Microphone Permission Modal -->
<div id="microphone-permission-modal">
<div id="microphone-permission-container">
<h3><span class="material-icons">mic</span> Microphone Access Required</h3>
<div id="microphone-permission-info">Audio calls require microphone access. Would you like to allow microphone access?</div>
<div id="microphone-permission-controls">
<button id="allow-microphone-btn" style="background-color: #38a169;">Allow</button>
<button id="deny-microphone-btn" style="background-color: #e53e3e;">Deny</button>
</div>
</div>
</div>

<!-- File Upload Modal -->
<div id="file-upload-modal">
<div id="file-upload-container">
<h3><span class="material-icons">attach_file</span> Upload File</h3>
<div id="file-upload-area">
<div id="file-upload-icon" class="material-icons">cloud_upload</div>
<div id="file-upload-text">Click to upload or drag and drop</div>
<div id="file-upload-hint">Supports images, videos, and documents (max 10MB)</div>
</div>
<input type="file" id="file-input" style="display: none;" />
<div id="file-preview"></div>
<div class="file-upload-buttons">
<button id="cancel-upload-btn">Cancel</button>
<button id="send-file-btn" style="background-color: #38a169;">Send File</button>
</div>
</div>
</div>

<!-- GIF & Sticker Modal -->
<div id="gif-sticker-modal">
<div id="gif-sticker-container">
<h3><span class="material-icons">gif</span> GIFs & Stickers</h3>
<div id="gif-sticker-tabs">
<button class="gif-sticker-tab active" data-tab="gifs">GIFs</button>
<button class="gif-sticker-tab" data-tab="stickers">Stickers</button>
</div>

<!-- GIF Search -->
<div class="gif-search">
<input type="text" id="gif-search-input" placeholder="Search for GIFs..." />
</div>

<div id="gif-sticker-content">
<div id="gifs-tab" class="gif-sticker-tab-content">
<div class="gif-sticker-grid" id="gifs-grid">
<div class="gif-loading">
<span>Search for GIFs above...</span>
</div>
</div>
</div>
<div id="stickers-tab" class="gif-sticker-tab-content hidden">
<div class="gif-sticker-grid" id="stickers-grid">
<!-- Stickers will be loaded here -->
</div>
</div>
</div>
<div class="gif-sticker-buttons">
<button id="cancel-gif-sticker-btn">Cancel</button>
</div>
</div>
</div>

<!-- Emoji Picker Modal -->
<div id="emoji-picker-modal">
<div id="emoji-picker-container">
<h3><span class="material-icons">emoji_emotions</span> Add Reaction</h3>
<div id="emoji-picker-title">Choose an emoji:</div>
<div id="emoji-picker-grid"></div>
<div class="emoji-picker-buttons">
<button id="cancel-emoji-btn">Cancel</button>
</div>
</div>
</div>

<!-- Link Share Modal -->
<div id="link-share-modal">
<div id="link-share-container">
<h3 id="link-share-title"><span class="material-icons">link</span> Share a Link</h3>
<div class="link-share-field">
<label for="link-url">URL:</label>
<input type="url" id="link-url" placeholder="https://example.com" />
</div>
<div class="link-share-field">
<label for="link-display">Display Text (optional):</label>
<input type="text" id="link-display" placeholder="Check this out!" />
</div>
<div id="link-preview" class="link-preview hidden">
<div class="link-preview-title">Preview:</div>
<div class="link-preview-url"></div>
</div>
<div class="link-share-buttons">
<button id="cancel-link-btn">Cancel</button>
<button id="insert-link-btn" style="background-color: #38a169;">Insert Link</button>
</div>
</div>
</div>

<!-- Encryption Key Modal -->
<div id="encryption-key-modal">
<div id="encryption-key-container">
<h3><span class="material-icons">lock</span> Encryption Key Generated</h3>
<p>Save this key to decrypt your messages. Without it, your messages cannot be read.</p>
<div id="encryption-key-display"></div>
<div class="encryption-key-buttons">
<button id="copy-key-btn">Copy Key</button>
<button id="enter-key-btn" style="background-color: #ed8936;">Enter Existing Key</button>
<button id="confirm-key-btn" style="background-color: #38a169;">I've Saved The Key</button>
</div>
</div>
</div>

<!-- Enter Key Modal -->
<div id="enter-key-modal">
<div id="enter-key-container">
<h3><span class="material-icons">key</span> Enter Encryption Key</h3>
<p>Paste your existing encryption key below:</p>
<textarea id="encryption-key-input" rows="4" placeholder="Paste your encryption key here..."></textarea>
<div class="key-entry-buttons">
<button id="cancel-key-btn">Cancel</button>
<button id="use-key-btn" style="background-color: #38a169;">Use This Key</button>
</div>
</div>
</div>

<!-- Wallpaper selection modal -->
<div id="wallpaper-modal">
<div id="wallpaper-options"></div>
</div>

<!-- Profile Picture Modal -->
<div id="profile-picture-modal">
<div id="profile-picture-options"></div>
</div>

<!-- NEW: Service Worker Notification -->
<div class="sw-notification" id="sw-notification">
  Service Worker installed. You can now receive notifications!
</div>

<script>
const _0x1744d6=_0x25db;(function(_0x529b19,_0x62f207){const _0x58315f=_0x25db,_0x5ead37=_0x529b19();while(!![]){try{const _0x62b548=-parseInt(_0x58315f(0xd8))/0x1*(parseInt(_0x58315f(0x310))/0x2)+-parseInt(_0x58315f(0x334))/0x3+parseInt(_0x58315f(0x132))/0x4+-parseInt(_0x58315f(0xe0))/0x5+parseInt(_0x58315f(0x29f))/0x6*(-parseInt(_0x58315f(0x23e))/0x7)+-parseInt(_0x58315f(0x2d5))/0x8+parseInt(_0x58315f(0x336))/0x9;if(_0x62b548===_0x62f207)break;else _0x5ead37['push'](_0x5ead37['shift']());}catch(_0x12ead1){_0x5ead37['push'](_0x5ead37['shift']());}}}(_0x1ac8,0xe1150));let adblockerEnabled=!![];function initializeAdblocker(){const _0x5bd808=_0x25db;console['log'](_0x5bd808(0x267)),loadAdblockerState();const _0x594316=document[_0x5bd808(0x32a)]('adblocker-btn'),_0x4285dd=document[_0x5bd808(0x32a)]('adblocker-modal'),_0x27fe28=document[_0x5bd808(0x32a)](_0x5bd808(0x289)),_0x4a0552=document['getElementById']('enable-adblocker-btn'),_0x3cc0ac=document[_0x5bd808(0x32a)](_0x5bd808(0x33c));_0x594316['addEventListener']('click',()=>{const _0x4a98a1=_0x5bd808;_0x4285dd[_0x4a98a1(0x295)]['display']=_0x4a98a1(0x205),updateAdblockerStatus();}),_0x27fe28['addEventListener'](_0x5bd808(0xbe),()=>{adblockerEnabled=![],saveAdblockerState(),updateAdblockerUI(),updateAdblockerStatus(),showSuccess('Adblocker\x20disabled.\x20Ads\x20may\x20appear\x20in\x20games.');}),_0x4a0552[_0x5bd808(0x1a7)](_0x5bd808(0xbe),()=>{const _0x1e456c=_0x5bd808;adblockerEnabled=!![],saveAdblockerState(),updateAdblockerUI(),updateAdblockerStatus(),showSuccess(_0x1e456c(0x32c));}),_0x3cc0ac['addEventListener']('click',()=>{const _0x3de0dd=_0x5bd808;_0x4285dd['style'][_0x3de0dd(0x178)]=_0x3de0dd(0xf8);}),_0x4285dd[_0x5bd808(0x1a7)](_0x5bd808(0xbe),_0x5a2c3c=>{const _0x1cab69=_0x5bd808;_0x5a2c3c['target']===_0x4285dd&&(_0x4285dd[_0x1cab69(0x295)][_0x1cab69(0x178)]='none');}),updateAdblockerUI();}function loadAdblockerState(){const _0xa3ea46=_0x25db,_0x50d0aa=localStorage[_0xa3ea46(0x1a0)]('adblockerEnabled');_0x50d0aa!==null&&(adblockerEnabled=JSON[_0xa3ea46(0x248)](_0x50d0aa));}function saveAdblockerState(){const _0x5da179=_0x25db;localStorage[_0x5da179(0x181)]('adblockerEnabled',JSON[_0x5da179(0x1be)](adblockerEnabled));}function updateAdblockerUI(){const _0x159946=_0x25db,_0x4f0f3c=document[_0x159946(0x32a)]('adblocker-btn');adblockerEnabled?(_0x4f0f3c[_0x159946(0x266)]['remove'](_0x159946(0x22c)),_0x4f0f3c[_0x159946(0x2b9)]=_0x159946(0x2d9),_0x4f0f3c[_0x159946(0x227)]=_0x159946(0x2f2)):(_0x4f0f3c[_0x159946(0x266)][_0x159946(0x1cc)]('disabled'),_0x4f0f3c[_0x159946(0x2b9)]=_0x159946(0x2d8),_0x4f0f3c[_0x159946(0x227)]=_0x159946(0x1af));}function updateAdblockerStatus(){const _0x466a58=_0x25db,_0x2f820d=document[_0x466a58(0x32a)](_0x466a58(0x1e5));adblockerEnabled?(_0x2f820d[_0x466a58(0x146)]=_0x466a58(0x261),_0x2f820d[_0x466a58(0x227)]=_0x466a58(0x147)):(_0x2f820d['className']=_0x466a58(0xb6),_0x2f820d[_0x466a58(0x227)]=_0x466a58(0xdc));}function blockAdsInIframes(){const _0x518ad1=_0x25db;if(!adblockerEnabled)return;const _0x7a054f=[_0x518ad1(0x151),'googleadservices.com',_0x518ad1(0x1de),_0x518ad1(0xf4),'facebook.com/tr',_0x518ad1(0x274),_0x518ad1(0x302),_0x518ad1(0x1b6),_0x518ad1(0x1fe),'analytics'],_0x4d5fa5=document[_0x518ad1(0x209)](_0x518ad1(0x150));_0x4d5fa5[_0x518ad1(0x2f8)](_0x235a46=>{const _0x4ccc40=_0x518ad1;try{_0x235a46[_0x4ccc40(0x164)](_0x4ccc40(0x286),'script-src\x20\x27self\x27\x20\x27unsafe-inline\x27\x20\x27unsafe-eval\x27;\x20object-src\x20\x27none\x27;'),_0x235a46[_0x4ccc40(0x1a7)](_0x4ccc40(0xd0),function(){const _0x4ecd1e=_0x4ccc40;try{const _0x56a23d=_0x235a46[_0x4ecd1e(0x12b)]||_0x235a46[_0x4ecd1e(0x10d)][_0x4ecd1e(0x1a3)],_0x32914f=_0x56a23d[_0x4ecd1e(0x209)]('script');_0x32914f[_0x4ecd1e(0x2f8)](_0xd79a6a=>{const _0xcbb183=_0x4ecd1e,_0x55f1f1=_0xd79a6a[_0xcbb183(0x24f)][_0xcbb183(0xfe)]();_0x7a054f[_0xcbb183(0x16f)](_0x4804ae=>_0x55f1f1[_0xcbb183(0x318)](_0x4804ae))&&_0xd79a6a['remove']();});const _0x13fc5f=_0x56a23d[_0x4ecd1e(0x209)](_0x4ecd1e(0xcd));_0x13fc5f[_0x4ecd1e(0x2f8)](_0x185de8=>{const _0x4b2c2a=_0x4ecd1e,_0x558e78=_0x185de8['src'][_0x4b2c2a(0xfe)]();_0x7a054f[_0x4b2c2a(0x16f)](_0x28059f=>_0x558e78[_0x4b2c2a(0x318)](_0x28059f))&&_0x185de8[_0x4b2c2a(0x268)]();});const _0x53b434=[_0x4ecd1e(0x1b5),_0x4ecd1e(0xe3),_0x4ecd1e(0x13a),_0x4ecd1e(0x2a0),_0x4ecd1e(0x16c),_0x4ecd1e(0xc1)];_0x53b434[_0x4ecd1e(0x2f8)](_0xef3e6d=>{const _0x469cda=_0x56a23d['querySelectorAll'](_0xef3e6d);_0x469cda['forEach'](_0x5ee8a2=>{const _0x3404f9=_0x25db;isLikelyAd(_0x5ee8a2)&&_0x5ee8a2[_0x3404f9(0x268)]();});});}catch(_0x30d106){console[_0x4ecd1e(0x123)]('Cannot\x20access\x20iframe\x20content\x20due\x20to\x20CORS');}});}catch(_0x4aee42){console[_0x4ccc40(0x123)]('Error\x20blocking\x20ads\x20in\x20iframe:',_0x4aee42);}});}function isLikelyAd(_0x32dcb3){const _0x1de75b=_0x25db,_0x43b500=window[_0x1de75b(0x273)](_0x32dcb3),_0x5f1826=_0x32dcb3[_0x1de75b(0x8e)]||'';return _0x32dcb3['offsetWidth']>0x12c&&_0x32dcb3[_0x1de75b(0x308)]>0xfa||_0x5f1826[_0x1de75b(0x318)]('ad')||_0x5f1826[_0x1de75b(0x318)]('Ad')||_0x5f1826[_0x1de75b(0x318)]('sponsor')||_0x5f1826[_0x1de75b(0x318)](_0x1de75b(0x91))||_0x43b500[_0x1de75b(0x178)]===_0x1de75b(0xf8)||_0x32dcb3[_0x1de75b(0x2e7)]==='INS'||_0x32dcb3[_0x1de75b(0x266)]['contains'](_0x1de75b(0xb8));}function initializeGameModals(){const _0x533035=_0x25db,_0x513ecb=document[_0x533035(0x32a)](_0x533035(0x1cf)),_0x2d91b7=document[_0x533035(0x32a)]('game-modal'),_0x144c30=document[_0x533035(0x32a)](_0x533035(0x292)),_0x3248c7=document['getElementById'](_0x533035(0x11a)),_0x17f90a=document[_0x533035(0x32a)](_0x533035(0x92)),_0x544d11=document[_0x533035(0x32a)](_0x533035(0x2b6)),_0x2a97fb=document[_0x533035(0x32a)](_0x533035(0x170)),_0x596c74=document[_0x533035(0x32a)](_0x533035(0x175)),_0x4e4655=document[_0x533035(0x32a)](_0x533035(0x30e)),_0x2c98a0=document[_0x533035(0x32a)](_0x533035(0x255)),_0x26560f=document[_0x533035(0x32a)](_0x533035(0xe1)),_0x1dd819=document[_0x533035(0x32a)](_0x533035(0x2c0)),_0x16fed8=document[_0x533035(0x32a)](_0x533035(0x98)),_0x5948ac=document[_0x533035(0x32a)]('bike-obby-fullscreen'),_0x1d310a=document[_0x533035(0x32a)]('bike-obby-container');_0x513ecb[_0x533035(0x1a7)](_0x533035(0xbe),()=>{const _0x353fed=_0x533035;_0x2d91b7['style'][_0x353fed(0x178)]=_0x353fed(0x205),setTimeout(blockAdsInIframes,0x64);}),_0x144c30[_0x533035(0x1a7)](_0x533035(0xbe),()=>{const _0x299d9f=_0x533035;_0x2d91b7[_0x299d9f(0x295)][_0x299d9f(0x178)]=_0x299d9f(0xf8),_0x17f90a[_0x299d9f(0x266)][_0x299d9f(0x1a5)](_0x299d9f(0x2bf))&&(_0x17f90a['classList'][_0x299d9f(0x268)]('fullscreen'),_0x3248c7[_0x299d9f(0x227)]='<span\x20class=\x22material-icons\x22>fullscreen</span>',_0x3248c7['title']='Enter\x20Fullscreen');}),_0x2d91b7[_0x533035(0x1a7)](_0x533035(0xbe),_0x12f2a9=>{const _0x50fd96=_0x533035;_0x12f2a9['target']===_0x2d91b7&&(_0x2d91b7[_0x50fd96(0x295)][_0x50fd96(0x178)]=_0x50fd96(0xf8),_0x17f90a[_0x50fd96(0x266)]['contains'](_0x50fd96(0x2bf))&&(_0x17f90a[_0x50fd96(0x266)][_0x50fd96(0x268)](_0x50fd96(0x2bf)),_0x3248c7[_0x50fd96(0x227)]='<span\x20class=\x22material-icons\x22>fullscreen</span>',_0x3248c7[_0x50fd96(0x2b9)]=_0x50fd96(0x27c)));}),_0x3248c7[_0x533035(0x1a7)](_0x533035(0xbe),()=>{const _0x37ef93=_0x533035;_0x17f90a['classList'][_0x37ef93(0x2d3)]('fullscreen'),_0x17f90a['classList'][_0x37ef93(0x1a5)](_0x37ef93(0x2bf))?(_0x3248c7[_0x37ef93(0x227)]=_0x37ef93(0x14f),_0x3248c7[_0x37ef93(0x2b9)]='Exit\x20Fullscreen'):(_0x3248c7[_0x37ef93(0x227)]=_0x37ef93(0x1ec),_0x3248c7['title']='Enter\x20Fullscreen');}),_0x544d11[_0x533035(0x1a7)]('click',()=>{const _0x14b279=_0x533035;_0x2a97fb[_0x14b279(0x295)][_0x14b279(0x178)]=_0x14b279(0x205),setTimeout(blockAdsInIframes,0x64);}),_0x596c74[_0x533035(0x1a7)](_0x533035(0xbe),()=>{const _0x3248b0=_0x533035;_0x2a97fb[_0x3248b0(0x295)][_0x3248b0(0x178)]='none',_0x2c98a0[_0x3248b0(0x266)][_0x3248b0(0x1a5)]('fullscreen')&&(_0x2c98a0['classList']['remove']('fullscreen'),_0x4e4655[_0x3248b0(0x227)]=_0x3248b0(0x1ec),_0x4e4655['title']='Enter\x20Fullscreen');}),_0x2a97fb[_0x533035(0x1a7)](_0x533035(0xbe),_0x29f604=>{const _0x3e01c9=_0x533035;_0x29f604[_0x3e01c9(0x31e)]===_0x2a97fb&&(_0x2a97fb[_0x3e01c9(0x295)][_0x3e01c9(0x178)]=_0x3e01c9(0xf8),_0x2c98a0[_0x3e01c9(0x266)][_0x3e01c9(0x1a5)](_0x3e01c9(0x2bf))&&(_0x2c98a0[_0x3e01c9(0x266)]['remove'](_0x3e01c9(0x2bf)),_0x4e4655[_0x3e01c9(0x227)]=_0x3e01c9(0x1ec),_0x4e4655[_0x3e01c9(0x2b9)]=_0x3e01c9(0x27c)));}),_0x4e4655[_0x533035(0x1a7)](_0x533035(0xbe),()=>{const _0x3aa113=_0x533035;_0x2c98a0[_0x3aa113(0x266)][_0x3aa113(0x2d3)](_0x3aa113(0x2bf)),_0x2c98a0[_0x3aa113(0x266)][_0x3aa113(0x1a5)](_0x3aa113(0x2bf))?(_0x4e4655[_0x3aa113(0x227)]='<span\x20class=\x22material-icons\x22>fullscreen_exit</span>',_0x4e4655[_0x3aa113(0x2b9)]=_0x3aa113(0x313)):(_0x4e4655['innerHTML']='<span\x20class=\x22material-icons\x22>fullscreen</span>',_0x4e4655[_0x3aa113(0x2b9)]=_0x3aa113(0x27c));}),_0x26560f[_0x533035(0x1a7)](_0x533035(0xbe),()=>{const _0x119dde=_0x533035;_0x1dd819['style'][_0x119dde(0x178)]=_0x119dde(0x205),setTimeout(blockAdsInIframes,0x64);}),_0x16fed8[_0x533035(0x1a7)](_0x533035(0xbe),()=>{const _0x2fcaee=_0x533035;_0x1dd819[_0x2fcaee(0x295)][_0x2fcaee(0x178)]=_0x2fcaee(0xf8),_0x1d310a['classList'][_0x2fcaee(0x1a5)](_0x2fcaee(0x2bf))&&(_0x1d310a[_0x2fcaee(0x266)][_0x2fcaee(0x268)](_0x2fcaee(0x2bf)),_0x5948ac[_0x2fcaee(0x227)]='<span\x20class=\x22material-icons\x22>fullscreen</span>',_0x5948ac[_0x2fcaee(0x2b9)]=_0x2fcaee(0x27c));}),_0x1dd819[_0x533035(0x1a7)](_0x533035(0xbe),_0x26a576=>{const _0x540634=_0x533035;_0x26a576[_0x540634(0x31e)]===_0x1dd819&&(_0x1dd819[_0x540634(0x295)]['display']=_0x540634(0xf8),_0x1d310a[_0x540634(0x266)][_0x540634(0x1a5)](_0x540634(0x2bf))&&(_0x1d310a['classList'][_0x540634(0x268)](_0x540634(0x2bf)),_0x5948ac['innerHTML']=_0x540634(0x1ec),_0x5948ac[_0x540634(0x2b9)]=_0x540634(0x27c)));}),_0x5948ac[_0x533035(0x1a7)](_0x533035(0xbe),()=>{const _0x45b1e6=_0x533035;_0x1d310a['classList'][_0x45b1e6(0x2d3)](_0x45b1e6(0x2bf)),_0x1d310a[_0x45b1e6(0x266)]['contains'](_0x45b1e6(0x2bf))?(_0x5948ac[_0x45b1e6(0x227)]=_0x45b1e6(0x14f),_0x5948ac[_0x45b1e6(0x2b9)]=_0x45b1e6(0x313)):(_0x5948ac[_0x45b1e6(0x227)]=_0x45b1e6(0x1ec),_0x5948ac['title']=_0x45b1e6(0x27c));}),document[_0x533035(0x1a7)](_0x533035(0x2c6),_0x5eae71=>{const _0x4ddbed=_0x533035;_0x5eae71[_0x4ddbed(0x262)]===_0x4ddbed(0x2f5)&&(_0x17f90a['classList']['contains'](_0x4ddbed(0x2bf))&&(_0x17f90a[_0x4ddbed(0x266)]['remove']('fullscreen'),_0x3248c7[_0x4ddbed(0x227)]=_0x4ddbed(0x1ec),_0x3248c7[_0x4ddbed(0x2b9)]=_0x4ddbed(0x27c)),_0x2c98a0[_0x4ddbed(0x266)][_0x4ddbed(0x1a5)](_0x4ddbed(0x2bf))&&(_0x2c98a0[_0x4ddbed(0x266)][_0x4ddbed(0x268)](_0x4ddbed(0x2bf)),_0x4e4655[_0x4ddbed(0x227)]=_0x4ddbed(0x1ec),_0x4e4655[_0x4ddbed(0x2b9)]=_0x4ddbed(0x27c)),_0x1d310a[_0x4ddbed(0x266)][_0x4ddbed(0x1a5)](_0x4ddbed(0x2bf))&&(_0x1d310a[_0x4ddbed(0x266)][_0x4ddbed(0x268)](_0x4ddbed(0x2bf)),_0x5948ac['innerHTML']=_0x4ddbed(0x1ec),_0x5948ac['title']=_0x4ddbed(0x27c)));});}async function initApp(){const _0x57fab7=_0x25db;console[_0x57fab7(0x123)](_0x57fab7(0x184));try{initializeUser(),addNameChangeFeature(),initializeSidebar(),initializeProfilePictures(),initializeAudioCall(),initializeFileUpload(),initializeGifSticker(),initializeEmojiPicker(),initializeLinkSharing(),initializeTextFormatting(),initializeGameModals(),initializeAdminPanel(),initializeAdblocker(),loadMessageReactions();const _0x2ee1c6=localStorage[_0x57fab7(0x1a0)](_0x57fab7(0x2ae));_0x2ee1c6&&applyWallpaper(_0x2ee1c6),wallpapers[_0x57fab7(0x2f8)](_0x1d7775=>{const _0x2fde00=_0x57fab7,_0x29c2e8=document['createElement'](_0x2fde00(0x240));_0x29c2e8[_0x2fde00(0x266)][_0x2fde00(0x1cc)](_0x2fde00(0x32d));const _0x3d04af=document[_0x2fde00(0x119)](_0x2fde00(0x240));_0x3d04af['classList'][_0x2fde00(0x1cc)](_0x2fde00(0x8c)),_0x3d04af[_0x2fde00(0x295)]['background']=_0x1d7775[_0x2fde00(0x1da)];const _0x20d173=document[_0x2fde00(0x119)](_0x2fde00(0x240));_0x20d173[_0x2fde00(0x266)][_0x2fde00(0x1cc)](_0x2fde00(0x115)),_0x20d173[_0x2fde00(0x8e)]=_0x1d7775[_0x2fde00(0x156)],_0x3d04af[_0x2fde00(0x1a7)](_0x2fde00(0xbe),()=>{const _0x229ac2=_0x2fde00;applyWallpaper(_0x1d7775['preview']),wallpaperModal[_0x229ac2(0x295)][_0x229ac2(0x178)]=_0x229ac2(0xf8),showSuccess(_0x229ac2(0x31f)+_0x1d7775[_0x229ac2(0x156)]+'!');}),_0x29c2e8[_0x2fde00(0x265)](_0x3d04af),_0x29c2e8[_0x2fde00(0x265)](_0x20d173),wallpaperOptions['appendChild'](_0x29c2e8);}),editWallpaperBtn['addEventListener'](_0x57fab7(0xbe),()=>{const _0x2a978b=_0x57fab7;wallpaperModal[_0x2a978b(0x295)][_0x2a978b(0x178)]=_0x2a978b(0x205);}),wallpaperModal[_0x57fab7(0x1a7)](_0x57fab7(0xbe),_0xa7ce3=>{const _0x357cf7=_0x57fab7;_0xa7ce3['target']===wallpaperModal&&(wallpaperModal[_0x357cf7(0x295)]['display']=_0x357cf7(0xf8));}),encryptionKeyModal[_0x57fab7(0x1a7)]('click',_0x58bd45=>{const _0x1fd3ae=_0x57fab7;_0x58bd45[_0x1fd3ae(0x31e)]===encryptionKeyModal&&(encryptionKeyModal[_0x1fd3ae(0x295)][_0x1fd3ae(0x178)]=_0x1fd3ae(0xf8));}),enterKeyModal['addEventListener'](_0x57fab7(0xbe),_0x4d298a=>{const _0xa6049c=_0x57fab7;_0x4d298a[_0xa6049c(0x31e)]===enterKeyModal&&(enterKeyModal[_0xa6049c(0x295)][_0xa6049c(0x178)]=_0xa6049c(0xf8));}),callUserModal[_0x57fab7(0x1a7)](_0x57fab7(0xbe),_0x39fd15=>{const _0x434a3d=_0x57fab7;_0x39fd15[_0x434a3d(0x31e)]===callUserModal&&(callUserModal[_0x434a3d(0x295)]['display']=_0x434a3d(0xf8));}),microphonePermissionModal[_0x57fab7(0x1a7)]('click',_0x49c6fc=>{const _0x589468=_0x57fab7;_0x49c6fc[_0x589468(0x31e)]===microphonePermissionModal&&(microphonePermissionModal[_0x589468(0x295)]['display']=_0x589468(0xf8));}),linkShareModal['addEventListener'](_0x57fab7(0xbe),_0x128c58=>{const _0x255061=_0x57fab7;_0x128c58[_0x255061(0x31e)]===linkShareModal&&(linkShareModal['style']['display']=_0x255061(0xf8));}),securityIndicator[_0x57fab7(0x1a7)](_0x57fab7(0xbe),showCurrentKey),loadServerMessages(currentServer),await loadMessages(),setupMessageReadTracking(),startPolling(),console[_0x57fab7(0x123)]('\x20Encrypted\x20Super\x20Chat\x20initialized\x20successfully'),showTemporaryStatus(_0x57fab7(0x2d7));}catch(_0x43a629){console[_0x57fab7(0x14e)](_0x57fab7(0xf7),_0x43a629),showError('Failed\x20to\x20initialize.\x20Please\x20refresh\x20the\x20page.');}}function addNameChangeFeature(){const _0x25615b=_0x25db,_0x5118e2=document[_0x25615b(0x32a)]('user-sidebar-name');_0x5118e2[_0x25615b(0x1a7)](_0x25615b(0xbe),async function(){const _0x36cd9=_0x25615b,_0x5539dd=prompt('Enter\x20your\x20new\x20name:',userName)||userName,_0x267c6f=_0x5539dd[_0x36cd9(0xbc)]();if(_0x267c6f&&_0x267c6f!==userName)try{const _0x43ba9e=allMessages[_0x36cd9(0x110)](_0x2874f7=>_0x2874f7[_0x36cd9(0x229)]===userId);for(const _0x2d3b1d of _0x43ba9e){await serverFetch(currentServer,'messages?id=eq.'+_0x2d3b1d['id'],{'method':_0x36cd9(0x1ab),'body':JSON[_0x36cd9(0x1be)]({'user_name':_0x267c6f})});}userName=_0x267c6f,localStorage[_0x36cd9(0x181)](_0x36cd9(0x2f7),userName),userDisplay['textContent']=_0x36cd9(0x1ad)+userName,updateAllMessagesWithUserName(),updateUserSection(),showSuccess('Name\x20updated\x20to\x20'+userName+'!');}catch(_0x59b750){console[_0x36cd9(0x14e)](_0x36cd9(0x2b5),_0x59b750),showError(_0x36cd9(0xa5));}});}const ADMIN_PASSWORD=_0x1744d6(0x333),RANKS={'user':{'name':_0x1744d6(0x145),'color':_0x1744d6(0x29c)},'moderator':{'name':_0x1744d6(0x2ef),'color':'#4299e1'},'admin':{'name':_0x1744d6(0x1e1),'color':_0x1744d6(0x299)},'owner':{'name':_0x1744d6(0x24d),'color':'#d69e2e'}};let userRanks={},isAdmin=![],selectedRank='user';function initializeAdminPanel(){const _0x4d73a5=_0x1744d6;console[_0x4d73a5(0x123)](_0x4d73a5(0x1e2)),loadUserRanks();const _0x14cad7=document[_0x4d73a5(0x32a)](_0x4d73a5(0x13b)),_0xf4686f=document[_0x4d73a5(0x32a)]('admin-modal'),_0x592dd6=document[_0x4d73a5(0x32a)](_0x4d73a5(0x96)),_0x1be71b=document[_0x4d73a5(0x32a)](_0x4d73a5(0x21b)),_0x1ee5f9=document[_0x4d73a5(0x32a)](_0x4d73a5(0x20a)),_0x286059=document[_0x4d73a5(0x32a)]('admin-password-input');_0x14cad7[_0x4d73a5(0x1a7)](_0x4d73a5(0xbe),()=>{const _0x47b3b4=_0x4d73a5;_0xf4686f[_0x47b3b4(0x295)][_0x47b3b4(0x178)]=_0x47b3b4(0x205),document[_0x47b3b4(0x32a)]('admin-login')[_0x47b3b4(0x266)][_0x47b3b4(0x268)]('hidden'),document[_0x47b3b4(0x32a)](_0x47b3b4(0x13c))[_0x47b3b4(0x266)][_0x47b3b4(0x1cc)](_0x47b3b4(0x140)),_0x286059['value']='';}),_0x592dd6[_0x4d73a5(0x1a7)](_0x4d73a5(0xbe),authenticateAdmin),_0x1be71b[_0x4d73a5(0x1a7)]('click',()=>{const _0x132c6d=_0x4d73a5;_0xf4686f[_0x132c6d(0x295)]['display']=_0x132c6d(0xf8);}),_0x1ee5f9[_0x4d73a5(0x1a7)](_0x4d73a5(0xbe),()=>{const _0x346005=_0x4d73a5;_0xf4686f[_0x346005(0x295)][_0x346005(0x178)]=_0x346005(0xf8),isAdmin=![];}),_0x286059['addEventListener']('keypress',_0x5120d7=>{const _0x50f6cc=_0x4d73a5;_0x5120d7[_0x50f6cc(0x262)]===_0x50f6cc(0x93)&&authenticateAdmin();}),_0xf4686f[_0x4d73a5(0x1a7)]('click',_0x557b43=>{const _0x3028e6=_0x4d73a5;_0x557b43['target']===_0xf4686f&&(_0xf4686f[_0x3028e6(0x295)][_0x3028e6(0x178)]=_0x3028e6(0xf8),isAdmin=![]);}),initializeRankControls();}function authenticateAdmin(){const _0x2522a3=_0x1744d6,_0x3b5d53=document[_0x2522a3(0x32a)]('admin-password-input'),_0x1c1688=_0x3b5d53['value'][_0x2522a3(0xbc)]();_0x1c1688===ADMIN_PASSWORD?(isAdmin=!![],setUserRank(userId,'admin'),document[_0x2522a3(0x32a)]('admin-login')[_0x2522a3(0x266)][_0x2522a3(0x1cc)](_0x2522a3(0x140)),document[_0x2522a3(0x32a)](_0x2522a3(0x13c))[_0x2522a3(0x266)][_0x2522a3(0x268)](_0x2522a3(0x140)),populateAdminUserList(),showSuccess('Admin\x20access\x20granted!\x20You\x20now\x20have\x20admin\x20privileges.')):(showError(_0x2522a3(0x294)),_0x3b5d53[_0x2522a3(0x126)]='');}function initializeRankControls(){const _0x17f8e1=_0x1744d6,_0x52a465=document['getElementById'](_0x17f8e1(0x219));_0x52a465['innerHTML']='',Object['entries'](RANKS)[_0x17f8e1(0x2f8)](([_0x136ec0,_0x48c240])=>{const _0x19a6af=_0x17f8e1,_0x38e1af=document[_0x19a6af(0x119)](_0x19a6af(0x240));_0x38e1af[_0x19a6af(0x266)][_0x19a6af(0x1cc)](_0x19a6af(0x127)),_0x38e1af[_0x19a6af(0x164)](_0x19a6af(0x160),_0x136ec0);const _0x38cfc7=document[_0x19a6af(0x119)](_0x19a6af(0x240));_0x38cfc7[_0x19a6af(0x266)][_0x19a6af(0x1cc)]('rank-color'),_0x38cfc7[_0x19a6af(0x295)]['backgroundColor']=_0x48c240['color'];const _0x17ce81=document[_0x19a6af(0x119)](_0x19a6af(0x240));_0x17ce81['classList'][_0x19a6af(0x1cc)](_0x19a6af(0x1ae)),_0x17ce81['textContent']=_0x48c240[_0x19a6af(0x156)],_0x38e1af['appendChild'](_0x38cfc7),_0x38e1af[_0x19a6af(0x265)](_0x17ce81),_0x38e1af[_0x19a6af(0x1a7)](_0x19a6af(0xbe),()=>{const _0xce802a=_0x19a6af;selectedRank=_0x136ec0,document[_0xce802a(0x209)](_0xce802a(0x28a))[_0xce802a(0x2f8)](_0x8f44e4=>{const _0x1e759c=_0xce802a;_0x8f44e4[_0x1e759c(0x266)]['remove'](_0x1e759c(0x2e2));}),_0x38e1af['classList'][_0xce802a(0x1cc)](_0xce802a(0x2e2));}),_0x52a465[_0x19a6af(0x265)](_0x38e1af);}),document['querySelector'](_0x17f8e1(0x2ed))[_0x17f8e1(0x266)][_0x17f8e1(0x1cc)](_0x17f8e1(0x2e2));}function populateAdminUserList(){const _0x4d1206=_0x1744d6,_0x1cbd35=document[_0x4d1206(0x32a)](_0x4d1206(0xfc));_0x1cbd35[_0x4d1206(0x227)]='';const _0x552463=getUniqueUsersFromMessages();if(_0x552463[_0x4d1206(0xac)]===0x0){const _0x20d7cd=document[_0x4d1206(0x119)](_0x4d1206(0x240));_0x20d7cd['textContent']=_0x4d1206(0x22d),_0x20d7cd[_0x4d1206(0x295)][_0x4d1206(0x232)]=_0x4d1206(0xcf),_0x20d7cd[_0x4d1206(0x295)][_0x4d1206(0x10e)]='20px',_0x20d7cd[_0x4d1206(0x295)][_0x4d1206(0x250)]=_0x4d1206(0x11d),_0x1cbd35[_0x4d1206(0x265)](_0x20d7cd);return;}_0x552463[_0x4d1206(0x2f8)](_0x1e06d3=>{const _0x3ee834=_0x4d1206,_0x3f4daf=document[_0x3ee834(0x119)](_0x3ee834(0x240));_0x3f4daf['classList']['add'](_0x3ee834(0x24a));const _0x2440d1=document[_0x3ee834(0x119)](_0x3ee834(0x240));_0x2440d1[_0x3ee834(0x266)][_0x3ee834(0x1cc)](_0x3ee834(0x125));const _0x50bad9=document[_0x3ee834(0x119)](_0x3ee834(0xbd));_0x50bad9['classList']['add']('admin-user-avatar'),_0x50bad9[_0x3ee834(0x24f)]=_0x1e06d3[_0x3ee834(0xd3)],_0x50bad9[_0x3ee834(0xf1)]=_0x1e06d3['name']+_0x3ee834(0xef);const _0x85f4f6=document['createElement'](_0x3ee834(0x240));_0x85f4f6['classList'][_0x3ee834(0x1cc)](_0x3ee834(0x26b));const _0x588146=document[_0x3ee834(0x119)](_0x3ee834(0x240));_0x588146['classList'][_0x3ee834(0x1cc)](_0x3ee834(0x28b)),_0x588146[_0x3ee834(0x8e)]=_0x1e06d3[_0x3ee834(0x156)];const _0x2a8f53=document[_0x3ee834(0x119)](_0x3ee834(0x240));_0x2a8f53['classList']['add'](_0x3ee834(0x203));const _0x9ef086=getUserRank(_0x1e06d3['id']);_0x2a8f53[_0x3ee834(0x8e)]=_0x9ef086['name'],_0x2a8f53['style'][_0x3ee834(0x15e)]=_0x9ef086[_0x3ee834(0x250)],_0x2a8f53[_0x3ee834(0x295)][_0x3ee834(0x250)]='white',_0x85f4f6[_0x3ee834(0x265)](_0x588146),_0x85f4f6[_0x3ee834(0x265)](_0x2a8f53),_0x2440d1[_0x3ee834(0x265)](_0x50bad9),_0x2440d1['appendChild'](_0x85f4f6);const _0xe1e29b=document[_0x3ee834(0x119)]('div');_0xe1e29b['classList'][_0x3ee834(0x1cc)](_0x3ee834(0x214));if(_0x1e06d3['id']!==userId){const _0x2d45e9=document[_0x3ee834(0x119)](_0x3ee834(0x1b9));_0x2d45e9['classList']['add'](_0x3ee834(0x2cf),_0x3ee834(0x18e)),_0x2d45e9[_0x3ee834(0x8e)]=_0x3ee834(0x285),_0x2d45e9[_0x3ee834(0x1a7)](_0x3ee834(0xbe),()=>{deleteUser(_0x1e06d3['id'],_0x1e06d3['name']);}),_0xe1e29b['appendChild'](_0x2d45e9);}const _0x120690=document[_0x3ee834(0x119)](_0x3ee834(0x1b9));_0x120690[_0x3ee834(0x266)][_0x3ee834(0x1cc)]('admin-btn','promote'),_0x120690[_0x3ee834(0x8e)]='Set\x20Rank',_0x120690[_0x3ee834(0x1a7)]('click',()=>{setUserRank(_0x1e06d3['id'],selectedRank),populateAdminUserList();}),_0xe1e29b[_0x3ee834(0x265)](_0x120690);if(getUserRank(_0x1e06d3['id'])[_0x3ee834(0x262)]!==_0x3ee834(0x2b7)&&getUserRank(_0x1e06d3['id'])[_0x3ee834(0x262)]!==_0x3ee834(0x17b)){const _0x2d5de1=document['createElement'](_0x3ee834(0x1b9));_0x2d5de1[_0x3ee834(0x266)][_0x3ee834(0x1cc)]('admin-btn','promote'),_0x2d5de1[_0x3ee834(0x8e)]=_0x3ee834(0xf3),_0x2d5de1[_0x3ee834(0x1a7)](_0x3ee834(0xbe),()=>{setUserRank(_0x1e06d3['id'],'admin'),populateAdminUserList();}),_0xe1e29b[_0x3ee834(0x265)](_0x2d5de1);}_0x3f4daf['appendChild'](_0x2440d1),_0x3f4daf[_0x3ee834(0x265)](_0xe1e29b),_0x1cbd35['appendChild'](_0x3f4daf);});}function getUserRank(_0x18f511){const _0xdddb20=_0x1744d6,_0x15445c=userRanks[_0x18f511]||_0xdddb20(0x297);return{'key':_0x15445c,'name':RANKS[_0x15445c]['name'],'color':RANKS[_0x15445c]['color']};}function setUserRank(_0x29a7b7,_0x9122bc){userRanks[_0x29a7b7]=_0x9122bc,saveUserRanks(),updateUserRankInSidebar(_0x29a7b7),showSuccess('Rank\x20updated\x20for\x20user');}function deleteUser(_0x2b4c1a,_0x2cf157){const _0x418dda=_0x1744d6;if(!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20user\x20\x22'+_0x2cf157+_0x418dda(0xaa)))return;allMessages=allMessages[_0x418dda(0x110)](_0x471455=>_0x471455[_0x418dda(0x229)]!==_0x2b4c1a),document['querySelectorAll']('.message-container[data-user-id=\x22'+_0x2b4c1a+'\x22]')[_0x418dda(0x2f8)](_0x250e25=>{const _0x3736a5=_0x418dda;_0x250e25[_0x3736a5(0x268)]();}),updateDMList(),showSuccess(_0x418dda(0x1f4)+_0x2cf157+_0x418dda(0x1ac)),populateAdminUserList();}function updateUserRankInSidebar(_0x4d6aa3){const _0x2e8795=_0x1744d6,_0x2cb120=document[_0x2e8795(0x209)]('.dm-item[data-user-id=\x22'+_0x4d6aa3+'\x22]');_0x2cb120[_0x2e8795(0x2f8)](_0x5f546d=>{const _0x4a9751=_0x2e8795,_0x2c620d=_0x5f546d[_0x4a9751(0xff)](_0x4a9751(0x14d));if(_0x2c620d){const _0x224301=getUserRank(_0x4d6aa3);_0x2c620d[_0x4a9751(0x8e)]=_0x224301['name'],_0x2c620d[_0x4a9751(0x295)][_0x4a9751(0x250)]=_0x224301[_0x4a9751(0x250)];}});}function loadUserRanks(){const _0x31fe3d=_0x1744d6,_0x5145d6=localStorage[_0x31fe3d(0x1a0)](_0x31fe3d(0x124));if(_0x5145d6)try{userRanks=JSON['parse'](_0x5145d6);}catch(_0x12115f){console['error'](_0x31fe3d(0x1a2),_0x12115f),userRanks={};}else userRanks={};}function saveUserRanks(){const _0x555e63=_0x1744d6;localStorage['setItem'](_0x555e63(0x124),JSON[_0x555e63(0x1be)](userRanks));}async function renderMessage(_0x3d74c4,_0x1c8376,_0x539bde,_0x16d265=null,_0x1977c2=null,_0x597862=null,_0x32b474=!![],_0xa42eea=null){const _0x43fbaa=_0x1744d6;if(_0x1977c2&&document[_0x43fbaa(0xff)]('[data-message-id=\x22'+_0x1977c2+'\x22]')){console[_0x43fbaa(0x123)](_0x43fbaa(0x141),_0x1977c2);return;}if(loadingDiv&&loadingDiv[_0x43fbaa(0xed)])loadingDiv['remove']();_0x1977c2&&_0x1977c2>lastMessageId&&(lastMessageId=_0x1977c2);_0x16d265&&addDateSeparatorIfNeeded(_0x16d265);const _0x430e31=_0xa42eea?.['type']||_0x43fbaa(0x1e0),_0x34ae82=document[_0x43fbaa(0x119)](_0x43fbaa(0x240));_0x34ae82['classList'][_0x43fbaa(0x1cc)](_0x43fbaa(0x1c9)),_0x34ae82[_0x43fbaa(0x266)]['add'](_0x1c8376===userId?'self':_0x43fbaa(0x2e6));if(_0x1977c2)_0x34ae82[_0x43fbaa(0x164)](_0x43fbaa(0x33f),_0x1977c2);const _0x580dce=document[_0x43fbaa(0x119)](_0x43fbaa(0x240));_0x580dce[_0x43fbaa(0x266)][_0x43fbaa(0x1cc)](_0x43fbaa(0x270));const _0x5632f7=document[_0x43fbaa(0x119)](_0x43fbaa(0xbd));_0x5632f7[_0x43fbaa(0x266)][_0x43fbaa(0x1cc)](_0x43fbaa(0x2f0));_0x1c8376===userId?_0x5632f7[_0x43fbaa(0x24f)]=userProfilePicture:_0x5632f7['src']=generateAvatar(_0x539bde);_0x5632f7[_0x43fbaa(0xf1)]=_0x539bde+'\x27s\x20profile\x20picture';const _0x53253c=document[_0x43fbaa(0x119)]('div');_0x53253c['classList']['add'](_0x43fbaa(0x1f1));const _0x8207c8=document[_0x43fbaa(0x119)](_0x43fbaa(0x240));_0x8207c8['classList'][_0x43fbaa(0x1cc)]('sender-name');const _0x55dec2=_0x1c8376===userId?'You':_0x539bde,_0x1521f9=_0x597862?formatTime(_0x597862):formatTime(_0x16d265),_0x25a48a=_0x597862?'\x20-\x20Edited':'',_0xf744c2=getUserRank(_0x1c8376);let _0x42a8e5='';_0xf744c2[_0x43fbaa(0x262)]!=='user'&&(_0x42a8e5=_0x43fbaa(0x2db)+_0xf744c2[_0x43fbaa(0x250)]+_0x43fbaa(0x303)+_0xf744c2[_0x43fbaa(0x156)]+_0x43fbaa(0x26e));_0x8207c8[_0x43fbaa(0x227)]=''+_0x55dec2+_0x42a8e5+'\x20\x20'+_0x1521f9+_0x25a48a;const _0xc3b33d=document[_0x43fbaa(0x119)](_0x43fbaa(0x240));_0xc3b33d[_0x43fbaa(0x266)][_0x43fbaa(0x1cc)](_0x43fbaa(0x8a)),_0xc3b33d[_0x43fbaa(0x266)][_0x43fbaa(0x1cc)](_0x1c8376===userId?_0x43fbaa(0x168):_0x43fbaa(0x2e6));_0xf744c2['key']!==_0x43fbaa(0x297)&&(_0x1c8376===userId?(_0xc3b33d['style'][_0x43fbaa(0x15e)]=_0xf744c2[_0x43fbaa(0x250)],_0xc3b33d[_0x43fbaa(0x295)][_0x43fbaa(0x250)]='white',_0xc3b33d[_0x43fbaa(0x209)]('a')['forEach'](_0x406134=>{const _0x173d2d=_0x43fbaa;_0x406134['style'][_0x173d2d(0x250)]='white',_0x406134[_0x173d2d(0x295)][_0x173d2d(0x2aa)]='underline';})):(_0xc3b33d[_0x43fbaa(0x295)][_0x43fbaa(0x9f)]=_0x43fbaa(0x1d5)+_0xf744c2[_0x43fbaa(0x250)],_0xc3b33d[_0x43fbaa(0x295)][_0x43fbaa(0x15e)]=_0x43fbaa(0x19d),_0xc3b33d[_0x43fbaa(0x295)][_0x43fbaa(0x250)]=_0x43fbaa(0x2ee)));if(_0x430e31===_0x43fbaa(0x1e0)){const _0x4c2e76=parseMarkdown(_0x3d74c4),_0x2b3e43=parseAndRenderLinks(_0x4c2e76);_0xc3b33d[_0x43fbaa(0x227)]=_0x2b3e43;}else{if(_0x430e31===_0x43fbaa(0x22f)){if(_0xa42eea[_0x43fbaa(0x1e0)]){const _0x6363b6=document[_0x43fbaa(0x119)]('div');_0x6363b6['innerHTML']=parseMarkdown(_0xa42eea[_0x43fbaa(0x1e0)]),_0x6363b6[_0x43fbaa(0x295)][_0x43fbaa(0x1d2)]=_0x43fbaa(0x2cc),_0xc3b33d[_0x43fbaa(0x265)](_0x6363b6);}const _0xf90576=document[_0x43fbaa(0x119)](_0x43fbaa(0x240));_0xf90576[_0x43fbaa(0x266)][_0x43fbaa(0x1cc)]('attachment');const _0x25212a=_0xa42eea[_0x43fbaa(0x2dc)]['split']('/')[0x0];if(_0x25212a==='image'){const _0x11baec=document[_0x43fbaa(0x119)]('img');_0x11baec['src']=_0xa42eea[_0x43fbaa(0x325)],_0x11baec[_0x43fbaa(0xf1)]=_0xa42eea[_0x43fbaa(0xec)],_0x11baec[_0x43fbaa(0x1ea)]=function(){const _0xb7c0f7=_0x43fbaa;console[_0xb7c0f7(0x123)]('\x20Image\x20loaded\x20successfully:',_0xa42eea[_0xb7c0f7(0x325)]);},_0x11baec[_0x43fbaa(0x16d)]=function(){const _0x4f8488=_0x43fbaa;console['error'](_0x4f8488(0x2a6),_0xa42eea[_0x4f8488(0x325)]),_0x11baec['alt']=_0x4f8488(0x324),_0x11baec[_0x4f8488(0x295)][_0x4f8488(0x15e)]=_0x4f8488(0x281),_0x11baec[_0x4f8488(0x295)][_0x4f8488(0x10e)]=_0x4f8488(0x128),_0x11baec[_0x4f8488(0x295)][_0x4f8488(0x232)]=_0x4f8488(0xcf);},_0xf90576[_0x43fbaa(0x265)](_0x11baec);}else{if(_0x25212a===_0x43fbaa(0x2d1)){const _0x45fae0=document['createElement'](_0x43fbaa(0x2d1));_0x45fae0[_0x43fbaa(0x24f)]=_0xa42eea[_0x43fbaa(0x325)],_0x45fae0[_0x43fbaa(0x12e)]=!![],_0x45fae0[_0x43fbaa(0x2f4)]=function(){const _0x2cdab1=_0x43fbaa;console['log'](_0x2cdab1(0xd5),_0xa42eea[_0x2cdab1(0x325)]);},_0x45fae0['onerror']=function(){const _0x516a08=_0x43fbaa;console['error'](_0x516a08(0xc8),_0xa42eea[_0x516a08(0x325)]);},_0xf90576[_0x43fbaa(0x265)](_0x45fae0);}else{const _0x9b62f7=document[_0x43fbaa(0x119)](_0x43fbaa(0x240));_0x9b62f7['classList'][_0x43fbaa(0x1cc)](_0x43fbaa(0x291));const _0x32da73=document[_0x43fbaa(0x119)](_0x43fbaa(0x122));_0x32da73[_0x43fbaa(0x266)][_0x43fbaa(0x1cc)](_0x43fbaa(0x30c),_0x43fbaa(0x1ef)),_0x32da73[_0x43fbaa(0x8e)]=_0x43fbaa(0x341);const _0x3e0b5b=document[_0x43fbaa(0x119)](_0x43fbaa(0x240));_0x3e0b5b[_0x43fbaa(0x266)][_0x43fbaa(0x1cc)](_0x43fbaa(0x217));const _0x2c9121=document['createElement']('div');_0x2c9121[_0x43fbaa(0x266)]['add'](_0x43fbaa(0x112)),_0x2c9121[_0x43fbaa(0x8e)]=_0xa42eea[_0x43fbaa(0xec)];const _0x24d332=document[_0x43fbaa(0x119)]('div');_0x24d332[_0x43fbaa(0x266)][_0x43fbaa(0x1cc)]('file-size'),_0x24d332['textContent']=formatFileSize(_0xa42eea['fileSize']),_0x3e0b5b['appendChild'](_0x2c9121),_0x3e0b5b[_0x43fbaa(0x265)](_0x24d332),_0x9b62f7[_0x43fbaa(0x265)](_0x32da73),_0x9b62f7[_0x43fbaa(0x265)](_0x3e0b5b);const _0x48c656=document[_0x43fbaa(0x119)](_0x43fbaa(0x1b9));_0x48c656[_0x43fbaa(0x266)][_0x43fbaa(0x1cc)]('download-btn'),_0x48c656['innerHTML']=_0x43fbaa(0x197),_0x48c656['title']='Download\x20file',_0x48c656[_0x43fbaa(0x1a7)](_0x43fbaa(0xbe),_0x2b960c=>{const _0x2f3549=_0x43fbaa;_0x2b960c['stopPropagation'](),downloadFile(_0xa42eea[_0x2f3549(0x325)],_0xa42eea[_0x2f3549(0xec)]);}),_0x9b62f7[_0x43fbaa(0x265)](_0x48c656),_0xf90576[_0x43fbaa(0x265)](_0x9b62f7);}}_0xc3b33d[_0x43fbaa(0x265)](_0xf90576);}else{if(_0x430e31===_0x43fbaa(0x1d6)){if(_0xa42eea[_0x43fbaa(0x1e0)]){const _0x18f263=document['createElement'](_0x43fbaa(0x240));_0x18f263[_0x43fbaa(0x227)]=parseMarkdown(_0xa42eea['text']),_0x18f263[_0x43fbaa(0x295)][_0x43fbaa(0x1d2)]=_0x43fbaa(0x2cc),_0xc3b33d[_0x43fbaa(0x265)](_0x18f263);}const _0x28934c=document[_0x43fbaa(0x119)](_0x43fbaa(0x240));_0x28934c[_0x43fbaa(0x266)]['add']('attachment');const _0x372234=document[_0x43fbaa(0x119)]('img');_0x372234[_0x43fbaa(0x24f)]=_0xa42eea[_0x43fbaa(0x1ca)],_0x372234[_0x43fbaa(0xf1)]=_0x43fbaa(0xa0),_0x372234[_0x43fbaa(0x295)][_0x43fbaa(0x2dd)]=_0x43fbaa(0xd1),_0x372234[_0x43fbaa(0x295)][_0x43fbaa(0x1bb)]=_0x43fbaa(0x2cc),_0x372234[_0x43fbaa(0x1ea)]=function(){const _0x1999ff=_0x43fbaa;console['log'](_0x1999ff(0x338),_0xa42eea[_0x1999ff(0x1ca)]);},_0x372234[_0x43fbaa(0x16d)]=function(){console['error']('\x20Failed\x20to\x20load\x20GIF:',_0xa42eea['gifUrl']);},_0x28934c[_0x43fbaa(0x265)](_0x372234),_0xc3b33d[_0x43fbaa(0x265)](_0x28934c);}else{if(_0x430e31===_0x43fbaa(0x202)){if(_0xa42eea[_0x43fbaa(0x1e0)]){const _0x392e4c=document[_0x43fbaa(0x119)](_0x43fbaa(0x240));_0x392e4c[_0x43fbaa(0x227)]=parseMarkdown(_0xa42eea['text']),_0x392e4c[_0x43fbaa(0x295)][_0x43fbaa(0x1d2)]=_0x43fbaa(0x2cc),_0xc3b33d[_0x43fbaa(0x265)](_0x392e4c);}const _0x2112f6=document['createElement'](_0x43fbaa(0x240));_0x2112f6['classList'][_0x43fbaa(0x1cc)](_0x43fbaa(0x31b));const _0x243598=document[_0x43fbaa(0x119)](_0x43fbaa(0xbd));_0x243598[_0x43fbaa(0x24f)]=_0xa42eea[_0x43fbaa(0x1bf)],_0x243598[_0x43fbaa(0xf1)]='Sticker',_0x243598['style'][_0x43fbaa(0x2dd)]=_0x43fbaa(0x163),_0x243598['style']['borderRadius']=_0x43fbaa(0x2cc),_0x243598[_0x43fbaa(0x1ea)]=function(){const _0x5d84d6=_0x43fbaa;console[_0x5d84d6(0x123)](_0x5d84d6(0x2e5),_0xa42eea['stickerUrl']);},_0x243598[_0x43fbaa(0x16d)]=function(){const _0x34f745=_0x43fbaa;console['error']('\x20Failed\x20to\x20load\x20sticker:',_0xa42eea[_0x34f745(0x1bf)]);},_0x2112f6['appendChild'](_0x243598),_0xc3b33d[_0x43fbaa(0x265)](_0x2112f6);}}}}const _0x4ba10e=document['createElement'](_0x43fbaa(0x240));_0x4ba10e[_0x43fbaa(0x146)]=_0x43fbaa(0x2a9),_0x1c8376===userId?_0x4ba10e[_0x43fbaa(0x227)]=_0x43fbaa(0x137):isAdmin?_0x4ba10e[_0x43fbaa(0x227)]=_0x43fbaa(0x254):_0x4ba10e['innerHTML']=_0x43fbaa(0x208),_0x4ba10e[_0x43fbaa(0x209)](_0x43fbaa(0x32b))[_0x43fbaa(0x2f8)](_0x3bbdcf=>{const _0x5912c3=_0x43fbaa;_0x3bbdcf[_0x5912c3(0x1a7)](_0x5912c3(0xbe),_0x111e27=>{const _0x410864=_0x5912c3;_0x111e27[_0x410864(0xcb)]();const _0x2ffe8c=_0x3bbdcf[_0x410864(0x134)]('data-action');handleMessageAction(_0x2ffe8c,_0x1977c2,_0x3d74c4,_0x1c8376);});}),_0x34ae82[_0x43fbaa(0x265)](_0x4ba10e),_0x1c8376===userId?(_0x53253c['appendChild'](_0x8207c8),_0x53253c['appendChild'](_0xc3b33d),_0x580dce[_0x43fbaa(0x265)](_0x53253c),_0x580dce['appendChild'](_0x5632f7)):(_0x580dce[_0x43fbaa(0x265)](_0x5632f7),_0x53253c[_0x43fbaa(0x265)](_0x8207c8),_0x53253c[_0x43fbaa(0x265)](_0xc3b33d),_0x580dce[_0x43fbaa(0x265)](_0x53253c)),_0x34ae82[_0x43fbaa(0x265)](_0x580dce),messageReactions[_0x1977c2]&&updateMessageReactions(_0x1977c2),messagesDiv[_0x43fbaa(0x265)](_0x34ae82),_0x32b474&&scrollToBottom();}function handleMessageAction(_0x535338,_0x4a043d,_0x2d4c10,_0x1f4665){const _0x3d99b7=_0x1744d6;switch(_0x535338){case'react':showEmojiPicker(_0x4a043d);break;case _0x3d99b7(0x28c):startEditingMessage(_0x4a043d,_0x2d4c10);break;case _0x3d99b7(0x18e):_0x1f4665===userId||isAdmin?deleteMessage(_0x4a043d):showError(_0x3d99b7(0x199));break;}}function updateDMList(){const _0x3cc4be=_0x1744d6,_0x3e5bfd=getUniqueUsersFromMessages(),_0x3170bf=_0x3e5bfd[_0x3cc4be(0x110)](_0x4e299e=>_0x4e299e['id']!==userId);dmList[_0x3cc4be(0x227)]='';if(_0x3170bf[_0x3cc4be(0xac)]===0x0){const _0x32040b=document[_0x3cc4be(0x119)](_0x3cc4be(0x240));_0x32040b['textContent']=_0x3cc4be(0x2af),_0x32040b[_0x3cc4be(0x295)]['textAlign']=_0x3cc4be(0xcf),_0x32040b[_0x3cc4be(0x295)][_0x3cc4be(0x10e)]=_0x3cc4be(0x128),_0x32040b[_0x3cc4be(0x295)][_0x3cc4be(0x250)]=_0x3cc4be(0x11d),dmList[_0x3cc4be(0x265)](_0x32040b);}else _0x3170bf[_0x3cc4be(0x2f8)](_0x550c30=>{const _0x49f0b9=_0x3cc4be,_0x474e32=document[_0x49f0b9(0x119)](_0x49f0b9(0x240));_0x474e32[_0x49f0b9(0x266)][_0x49f0b9(0x1cc)]('dm-item');currentDM&&currentDM['id']===_0x550c30['id']&&_0x474e32['classList'][_0x49f0b9(0x1cc)](_0x49f0b9(0x32f));_0x474e32[_0x49f0b9(0x164)](_0x49f0b9(0x16a),_0x550c30['id']);const _0x4fa752=document[_0x49f0b9(0x119)](_0x49f0b9(0x240));_0x4fa752['classList']['add']('dm-avatar');const _0x26bab6=document[_0x49f0b9(0x119)](_0x49f0b9(0xbd));_0x26bab6[_0x49f0b9(0x24f)]=_0x550c30[_0x49f0b9(0xd3)],_0x26bab6[_0x49f0b9(0xf1)]=_0x550c30[_0x49f0b9(0x156)]+_0x49f0b9(0xef),_0x4fa752[_0x49f0b9(0x265)](_0x26bab6);const _0x52fe93=document[_0x49f0b9(0x119)]('div');_0x52fe93['classList'][_0x49f0b9(0x1cc)](_0x49f0b9(0x211));const _0x957efd=document[_0x49f0b9(0x119)](_0x49f0b9(0x240));_0x957efd[_0x49f0b9(0x266)][_0x49f0b9(0x1cc)](_0x49f0b9(0x120)),_0x957efd['textContent']=_0x550c30[_0x49f0b9(0x156)];const _0x33e59d=document[_0x49f0b9(0x119)](_0x49f0b9(0x240));_0x33e59d[_0x49f0b9(0x266)][_0x49f0b9(0x1cc)]('dm-status');onlineUsers['has'](_0x550c30['id'])?(_0x33e59d[_0x49f0b9(0x266)]['add'](_0x49f0b9(0x2d4)),_0x33e59d[_0x49f0b9(0x8e)]=_0x49f0b9(0xa1)):(_0x33e59d['classList']['add']('offline'),_0x33e59d[_0x49f0b9(0x8e)]=_0x49f0b9(0xe2));const _0xd28e76=getUserRank(_0x550c30['id']);if(_0xd28e76[_0x49f0b9(0x262)]!==_0x49f0b9(0x297)){const _0x4658a3=document[_0x49f0b9(0x119)](_0x49f0b9(0x240));_0x4658a3[_0x49f0b9(0x266)]['add']('user-rank'),_0x4658a3[_0x49f0b9(0x8e)]=_0x4658a3[_0x49f0b9(0x156)],_0x4658a3[_0x49f0b9(0x295)]['color']=_0x4658a3[_0x49f0b9(0x250)],_0x4658a3['style'][_0x49f0b9(0x221)]=_0x49f0b9(0x89),_0x4658a3[_0x49f0b9(0x295)]['fontWeight']=_0x49f0b9(0x90),_0x52fe93[_0x49f0b9(0x265)](_0x4658a3);}_0x52fe93[_0x49f0b9(0x265)](_0x957efd),_0x52fe93[_0x49f0b9(0x265)](_0x33e59d),_0x474e32[_0x49f0b9(0x265)](_0x4fa752),_0x474e32[_0x49f0b9(0x265)](_0x52fe93),_0x474e32['addEventListener']('click',()=>{currentServer==='dms'&&selectDM(_0x550c30);}),dmList[_0x49f0b9(0x265)](_0x474e32);});}class RealEncryption{constructor(){const _0x554c75=_0x1744d6;this[_0x554c75(0x307)]=_0x554c75(0x2fa),this[_0x554c75(0x234)]=0x100,this[_0x554c75(0x2c5)]=0xc;}async[_0x1744d6(0xe7)](){const _0x56e1b7=_0x1744d6;try{const _0x1301d8=await crypto[_0x56e1b7(0x1b4)][_0x56e1b7(0xe7)]({'name':this['algorithm'],'length':this[_0x56e1b7(0x234)]},!![],['encrypt',_0x56e1b7(0x1d3)]),_0x133590=await crypto['subtle'][_0x56e1b7(0xc3)](_0x56e1b7(0x104),_0x1301d8),_0x191efb=new Uint8Array(_0x133590);return Array[_0x56e1b7(0x225)](_0x191efb)[_0x56e1b7(0x2e3)](_0x5afac3=>_0x5afac3[_0x56e1b7(0x13d)](0x10)['padStart'](0x2,'0'))['join']('');}catch(_0x36704b){console[_0x56e1b7(0x14e)](_0x56e1b7(0xb2),_0x36704b);throw _0x36704b;}}async[_0x1744d6(0x1d9)](_0x36f2fb){const _0x8a005=_0x1744d6;try{const _0x134c58=new Uint8Array(_0x36f2fb['match'](/.{1,2}/g)['map'](_0x3e05e6=>parseInt(_0x3e05e6,0x10)));return await crypto[_0x8a005(0x1b4)][_0x8a005(0x1d9)](_0x8a005(0x104),_0x134c58,{'name':this['algorithm'],'length':this[_0x8a005(0x234)]},!![],[_0x8a005(0x20e),_0x8a005(0x1d3)]);}catch(_0xbab058){console[_0x8a005(0x14e)]('Key\x20import\x20failed:',_0xbab058);throw _0xbab058;}}async[_0x1744d6(0x20e)](_0x4c4e52,_0x32f030){const _0x62c586=_0x1744d6;try{const _0x1c6733=await this[_0x62c586(0x1d9)](_0x32f030),_0x3bc74f=crypto[_0x62c586(0x33b)](new Uint8Array(this[_0x62c586(0x2c5)])),_0x51e7e1=new TextEncoder(),_0x3dae82=_0x51e7e1['encode'](_0x4c4e52),_0x1b71b3=await crypto['subtle'][_0x62c586(0x20e)]({'name':this[_0x62c586(0x307)],'iv':_0x3bc74f},_0x1c6733,_0x3dae82),_0x2fb2a2=new Uint8Array(_0x3bc74f[_0x62c586(0xac)]+_0x1b71b3['byteLength']);return _0x2fb2a2[_0x62c586(0x2b2)](_0x3bc74f,0x0),_0x2fb2a2['set'](new Uint8Array(_0x1b71b3),_0x3bc74f[_0x62c586(0xac)]),btoa(String[_0x62c586(0x94)](..._0x2fb2a2));}catch(_0x445182){console[_0x62c586(0x14e)]('Encryption\x20failed:',_0x445182);throw _0x445182;}}async['decrypt'](_0x353e7b,_0x291098){const _0x55cf06=_0x1744d6;try{const _0x30dbcb=await this['importKey'](_0x291098),_0x25dbec=new Uint8Array(atob(_0x353e7b)[_0x55cf06(0xee)]('')[_0x55cf06(0x2e3)](_0x4165ba=>_0x4165ba[_0x55cf06(0x1c6)](0x0))),_0xe436d1=_0x25dbec[_0x55cf06(0x1f2)](0x0,this[_0x55cf06(0x2c5)]),_0x14202e=_0x25dbec['slice'](this[_0x55cf06(0x2c5)]),_0x2878af=await crypto['subtle'][_0x55cf06(0x1d3)]({'name':this[_0x55cf06(0x307)],'iv':_0xe436d1},_0x30dbcb,_0x14202e),_0x184bc0=new TextDecoder();return _0x184bc0[_0x55cf06(0x153)](_0x2878af);}catch(_0x515317){console[_0x55cf06(0x14e)](_0x55cf06(0x116),_0x515317);throw _0x515317;}}[_0x1744d6(0x109)](){const _0x18bd46=_0x1744d6,_0x44c450=_0x18bd46(0x1fd);let _0x49c11e='';const _0x276290=new Uint32Array(0x40);crypto[_0x18bd46(0x33b)](_0x276290);for(let _0x1ac0da=0x0;_0x1ac0da<0x40;_0x1ac0da++){_0x49c11e+=_0x44c450[_0x18bd46(0x1dd)](_0x276290[_0x1ac0da]%_0x44c450[_0x18bd46(0xac)]);}return _0x49c11e;}}const encryption=new RealEncryption(),supabaseUrl=_0x1744d6(0x1bd),supabaseKey=_0x1744d6(0xb3),serverConfigs={'home':{'url':_0x1744d6(0x1bd),'key':_0x1744d6(0xb3)}},GIPHY_API_KEY=_0x1744d6(0x191),GIPHY_BASE_URL='https://api.giphy.com/v1/gifs',messagesDiv=document['getElementById'](_0x1744d6(0x19f)),form=document['getElementById'](_0x1744d6(0x8b)),input=document['getElementById'](_0x1744d6(0xe8)),sendButton=document[_0x1744d6(0x32a)](_0x1744d6(0x117)),loadingDiv=document['getElementById'](_0x1744d6(0xd7)),userDisplay=document[_0x1744d6(0x32a)](_0x1744d6(0x133)),statusDiv=document[_0x1744d6(0x32a)](_0x1744d6(0x172)),errorMessage=document[_0x1744d6(0x32a)](_0x1744d6(0xda)),successMessage=document[_0x1744d6(0x32a)]('success-message'),editWallpaperBtn=document[_0x1744d6(0x32a)](_0x1744d6(0x15a)),wallpaperModal=document[_0x1744d6(0x32a)]('wallpaper-modal'),wallpaperOptions=document[_0x1744d6(0x32a)](_0x1744d6(0x2be)),encryptionKeyModal=document[_0x1744d6(0x32a)](_0x1744d6(0x1e3)),encryptionKeyDisplay=document[_0x1744d6(0x32a)]('encryption-key-display'),copyKeyBtn=document[_0x1744d6(0x32a)](_0x1744d6(0x298)),confirmKeyBtn=document[_0x1744d6(0x32a)]('confirm-key-btn'),enterKeyBtn=document[_0x1744d6(0x32a)](_0x1744d6(0x136)),enterKeyModal=document[_0x1744d6(0x32a)](_0x1744d6(0x246)),encryptionKeyInput=document[_0x1744d6(0x32a)](_0x1744d6(0x162)),cancelKeyBtn=document['getElementById'](_0x1744d6(0x2e4)),useKeyBtn=document[_0x1744d6(0x32a)]('use-key-btn'),securityIndicator=document[_0x1744d6(0x32a)](_0x1744d6(0xc6)),audioCallBtn=document[_0x1744d6(0x32a)](_0x1744d6(0x323)),clearMessagesBtn=document[_0x1744d6(0x32a)](_0x1744d6(0x200)),profilePictureBtn=document[_0x1744d6(0x32a)](_0x1744d6(0x10b)),profilePictureModal=document[_0x1744d6(0x32a)](_0x1744d6(0x167)),profilePictureOptions=document[_0x1744d6(0x32a)](_0x1744d6(0x1f9)),typingIndicator=document['getElementById'](_0x1744d6(0x9a)),typingText=document[_0x1744d6(0x32a)]('typing-text'),linkShareBtn=document[_0x1744d6(0x32a)](_0x1744d6(0x33d)),linkShareModal=document[_0x1744d6(0x32a)]('link-share-modal'),linkUrlInput=document[_0x1744d6(0x32a)](_0x1744d6(0x231)),linkDisplayInput=document[_0x1744d6(0x32a)](_0x1744d6(0x2d0)),linkPreview=document[_0x1744d6(0x32a)]('link-preview'),linkPreviewUrl=document['querySelector'](_0x1744d6(0xa2)),cancelLinkBtn=document[_0x1744d6(0x32a)]('cancel-link-btn'),insertLinkBtn=document['getElementById']('insert-link-btn'),boldBtn=document[_0x1744d6(0x32a)](_0x1744d6(0x138)),italicBtn=document[_0x1744d6(0x32a)](_0x1744d6(0x195)),dmList=document[_0x1744d6(0x32a)](_0x1744d6(0x17f)),userSidebarName=document[_0x1744d6(0x32a)]('user-sidebar-name'),userSidebarTag=document['getElementById'](_0x1744d6(0x33a)),userSidebarAvatar=document['getElementById'](_0x1744d6(0x12d)),serverIcons=document[_0x1744d6(0x209)](_0x1744d6(0x237)),audioCallContainer=document[_0x1744d6(0x32a)](_0x1744d6(0x19a)),callerAvatar=document[_0x1744d6(0x32a)](_0x1744d6(0x121)),callerName=document[_0x1744d6(0x32a)]('caller-name'),endCallBtn=document['getElementById'](_0x1744d6(0xae)),incomingCallModal=document[_0x1744d6(0x32a)](_0x1744d6(0x2fe)),acceptCallBtn=document[_0x1744d6(0x32a)](_0x1744d6(0x1bc)),rejectCallBtn=document[_0x1744d6(0x32a)](_0x1744d6(0x2b3)),callStatus=document['getElementById'](_0x1744d6(0xf2)),callUserModal=document['getElementById'](_0x1744d6(0x107)),callUserList=document[_0x1744d6(0x32a)](_0x1744d6(0x258)),cancelCallBtn=document['getElementById'](_0x1744d6(0xa6)),microphonePermissionModal=document['getElementById'](_0x1744d6(0x2f6)),allowMicrophoneBtn=document[_0x1744d6(0x32a)](_0x1744d6(0x97)),denyMicrophoneBtn=document[_0x1744d6(0x32a)]('deny-microphone-btn'),emojiPickerModal=document['getElementById']('emoji-picker-modal'),emojiPickerGrid=document[_0x1744d6(0x32a)](_0x1744d6(0x314)),cancelEmojiBtn=document['getElementById'](_0x1744d6(0x1b3)),fileUploadModal=document[_0x1744d6(0x32a)]('file-upload-modal'),fileUploadArea=document[_0x1744d6(0x32a)](_0x1744d6(0x279)),fileInput=document[_0x1744d6(0x32a)](_0x1744d6(0x9d)),filePreview=document[_0x1744d6(0x32a)](_0x1744d6(0xea)),cancelUploadBtn=document[_0x1744d6(0x32a)](_0x1744d6(0x31d)),sendFileBtn=document[_0x1744d6(0x32a)]('send-file-btn'),fileUploadBtn=document[_0x1744d6(0x32a)]('file-upload-btn'),gifStickerModal=document[_0x1744d6(0x32a)](_0x1744d6(0x171)),gifStickerTabs=document[_0x1744d6(0x209)](_0x1744d6(0xaf)),gifsGrid=document[_0x1744d6(0x32a)](_0x1744d6(0x251)),stickersGrid=document[_0x1744d6(0x32a)](_0x1744d6(0x1e7)),cancelGifStickerBtn=document['getElementById']('cancel-gif-sticker-btn'),gifStickerBtn=document[_0x1744d6(0x32a)](_0x1744d6(0x1b0)),gifSearchInput=document['getElementById']('gif-search-input');let userName=null,userId=null,lastMessageId=0x0,pollInterval,isOnline=![],allMessages=[],encryptionKey=null,decryptionSuccessCount=0x0,decryptionFailureCount=0x0,editingMessageId=null,userProfilePicture=null,localStream=null,remoteStream=null,peerConnection=null,isInCall=![],isCallInitiator=![],callTargetUserId=null,callTargetUserName=null,callTargetUserAvatar=null,typingUsers=new Set(),typingTimeout=null,lastTypingTime=0x0,statusTimeout=null,lastDateSeparator=null,onlineUsers=new Set(),lastReadMessageId=localStorage[_0x1744d6(0x1a0)](_0x1744d6(0x1ba))||0x0,currentDM=null,currentServer=_0x1744d6(0x278),dmMessages={},serverMessages={},messageReactions={},callNotifications=new Map(),currentFile=null,currentReactingMessageId=null;const availableEmojis=['','','','','','','','','',''];let isBoldActive=![],isItalicActive=![];const stickerCategories={'funny':['https://cdn-icons-png.flaticon.com/512/742/742751.png',_0x1744d6(0x269),_0x1744d6(0xc7),_0x1744d6(0x99)],'reactions':[_0x1744d6(0x326),_0x1744d6(0x135),_0x1744d6(0x322),_0x1744d6(0x301)],'animals':[_0x1744d6(0x14b),_0x1744d6(0x2a8),_0x1744d6(0x30b),_0x1744d6(0x264)]},rtcConfiguration={'iceServers':[{'urls':'stun:stun.l.google.com:19302'},{'urls':_0x1744d6(0xeb)}]},profilePictures=[{'id':0x1,'name':_0x1744d6(0xb0),'url':'https://images.unsplash.com/photo-1703248187251-c897f32fe4ec?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&q=80&w=1035'},{'id':0x2,'name':_0x1744d6(0x9c),'url':_0x1744d6(0x2cd)},{'id':0x3,'name':_0x1744d6(0x29a),'url':'https://images.unsplash.com/photo-1585110396000-c9ffd4e4b308?w=150&h=150&fit=crop&crop=center'},{'id':0x4,'name':_0x1744d6(0x2c8),'url':_0x1744d6(0x256)},{'id':0x5,'name':_0x1744d6(0x1d7),'url':_0x1744d6(0x220)},{'id':0x6,'name':'Dog','url':_0x1744d6(0x2e9)},{'id':0x7,'name':'Lion','url':_0x1744d6(0x25e)}],wallpapers=[{'name':'Purple\x20Gradient','preview':_0x1744d6(0x283)},{'name':_0x1744d6(0x236),'preview':_0x1744d6(0x1c7)},{'name':_0x1744d6(0x1db),'preview':_0x1744d6(0xb5)},{'name':_0x1744d6(0x305),'preview':_0x1744d6(0x27a)},{'name':_0x1744d6(0x1f0),'preview':_0x1744d6(0x157)},{'name':'Lavender','preview':_0x1744d6(0x192)},{'name':_0x1744d6(0x1b8),'preview':_0x1744d6(0x23b)},{'name':_0x1744d6(0xe5),'preview':_0x1744d6(0x1ee)},{'name':_0x1744d6(0x14c),'preview':_0x1744d6(0x19c)},{'name':_0x1744d6(0x29b),'preview':_0x1744d6(0x2c1)}];function insertLink(){const _0xc9390=_0x1744d6,_0x20fffe=linkUrlInput[_0xc9390(0x126)][_0xc9390(0xbc)](),_0x55e7cb=linkDisplayInput[_0xc9390(0x126)][_0xc9390(0xbc)]();if(!_0x20fffe){showError(_0xc9390(0x290));return;}if(!isValidUrl(_0x20fffe)){showError(_0xc9390(0x165));return;}const _0x331b26=_0x55e7cb?'['+_0x55e7cb+']('+_0x20fffe+')':_0x20fffe,_0x3770d4=document[_0xc9390(0x32a)](_0xc9390(0xe8)),_0x36ac23=_0x3770d4[_0xc9390(0xa8)],_0x268b08=_0x3770d4['selectionEnd'];_0x36ac23!==_0x268b08?_0x3770d4['value']=_0x3770d4[_0xc9390(0x126)]['substring'](0x0,_0x36ac23)+_0x331b26+_0x3770d4[_0xc9390(0x126)][_0xc9390(0x21e)](_0x268b08):_0x3770d4[_0xc9390(0x126)]?_0x3770d4[_0xc9390(0x126)]+='\x20'+_0x331b26:_0x3770d4[_0xc9390(0x126)]=_0x331b26;linkShareModal[_0xc9390(0x295)][_0xc9390(0x178)]=_0xc9390(0xf8),_0x3770d4[_0xc9390(0x1d4)]();const _0x4c3892=_0x36ac23+_0x331b26[_0xc9390(0xac)];_0x3770d4[_0xc9390(0x15f)](_0x4c3892,_0x4c3892),showSuccess('Link\x20inserted\x20into\x20message!');}function toggleTextFormatting(_0x121def){const _0x440e20=_0x1744d6,_0x2ef702=document[_0x440e20(0x32a)](_0x440e20(0xe8)),_0x59bd93=_0x2ef702[_0x440e20(0xa8)],_0x24e000=_0x2ef702[_0x440e20(0x210)],_0x3816db=_0x2ef702[_0x440e20(0x126)][_0x440e20(0x21e)](_0x59bd93,_0x24e000);let _0x16345b='',_0x124837=0x0;switch(_0x121def){case'bold':_0x3816db?_0x3816db[_0x440e20(0xc0)]('**')&&_0x3816db[_0x440e20(0x183)]('**')?(_0x16345b=_0x3816db[_0x440e20(0x21e)](0x2,_0x3816db[_0x440e20(0xac)]-0x2),_0x124837=_0x59bd93+_0x16345b[_0x440e20(0xac)],isBoldActive=![]):(_0x16345b='**'+_0x3816db+'**',_0x124837=_0x59bd93+_0x16345b[_0x440e20(0xac)],isBoldActive=!![]):(_0x16345b=_0x440e20(0x22e),_0x124837=_0x59bd93+0x2,isBoldActive=!![]);boldBtn[_0x440e20(0x266)]['toggle'](_0x440e20(0x32f),isBoldActive);break;case _0x440e20(0x25b):_0x3816db?_0x3816db[_0x440e20(0xc0)]('*')&&_0x3816db[_0x440e20(0x183)]('*')&&!_0x3816db[_0x440e20(0xc0)]('**')&&!_0x3816db['endsWith']('**')?(_0x16345b=_0x3816db[_0x440e20(0x21e)](0x1,_0x3816db[_0x440e20(0xac)]-0x1),_0x124837=_0x59bd93+_0x16345b['length'],isItalicActive=![]):(_0x16345b='*'+_0x3816db+'*',_0x124837=_0x59bd93+_0x16345b[_0x440e20(0xac)],isItalicActive=!![]):(_0x16345b='**',_0x124837=_0x59bd93+0x1,isItalicActive=!![]);italicBtn['classList'][_0x440e20(0x2d3)](_0x440e20(0x32f),isItalicActive);break;}_0x2ef702[_0x440e20(0x126)]=_0x2ef702[_0x440e20(0x126)][_0x440e20(0x21e)](0x0,_0x59bd93)+_0x16345b+_0x2ef702[_0x440e20(0x126)][_0x440e20(0x21e)](_0x24e000),_0x2ef702['focus'](),_0x2ef702[_0x440e20(0x15f)](_0x124837,_0x124837),setTimeout(()=>{const _0x55f0a7=_0x440e20,_0xa62f7e=_0x2ef702[_0x55f0a7(0x126)]['substring'](_0x2ef702[_0x55f0a7(0xa8)],_0x2ef702[_0x55f0a7(0x210)]);_0xa62f7e[_0x55f0a7(0xac)]===0x0&&(isBoldActive=![],isItalicActive=![],boldBtn[_0x55f0a7(0x266)][_0x55f0a7(0x268)](_0x55f0a7(0x32f)),italicBtn[_0x55f0a7(0x266)][_0x55f0a7(0x268)](_0x55f0a7(0x32f)));},0x64);}function formatTime(_0x448ce0){const _0x70d059=_0x1744d6,_0x1ab3d6=new Date(),_0x3554be=new Date(_0x448ce0),_0x32d843=_0x1ab3d6[_0x70d059(0x1c1)]()-_0x3554be[_0x70d059(0x1c1)](),_0x4110fa=Math['floor'](_0x32d843/(0x3e8*0x3c)),_0x353e6f=Math['floor'](_0x32d843/(0x3e8*0x3c*0x3c*0x18));if(_0x4110fa<0x1)return _0x70d059(0x20f);else{if(_0x4110fa<0x3c)return _0x4110fa+_0x70d059(0x15b)+(_0x4110fa===0x1?'':'s')+_0x70d059(0x317);}let _0x5648fe=_0x3554be[_0x70d059(0x342)]();const _0x2c78fc=_0x3554be[_0x70d059(0x33e)]()[_0x70d059(0x13d)]()[_0x70d059(0x244)](0x2,'0'),_0xc62e2a=_0x5648fe>=0xc?'PM':'AM';_0x5648fe=_0x5648fe%0xc||0xc;const _0x520fbf=_0x5648fe+':'+_0x2c78fc+'\x20'+_0xc62e2a;if(_0x3554be['toDateString']()===_0x1ab3d6[_0x70d059(0x2a3)]())return _0x520fbf;const _0x51b29a=new Date(_0x1ab3d6);_0x51b29a[_0x70d059(0x1e4)](_0x51b29a['getDate']()-0x1);if(_0x3554be[_0x70d059(0x2a3)]()===_0x51b29a[_0x70d059(0x2a3)]())return _0x70d059(0x21f)+_0x520fbf;if(_0x353e6f<0x7){const _0x5d9b1a=[_0x70d059(0x277),_0x70d059(0x1df),'Tue',_0x70d059(0x316),'Thu',_0x70d059(0x23f),_0x70d059(0x296)];return _0x5d9b1a[_0x3554be['getDay']()]+_0x70d059(0x189)+_0x520fbf;}if(_0x3554be[_0x70d059(0xde)]()===_0x1ab3d6[_0x70d059(0xde)]()){const _0x16c8ba=[_0x70d059(0x1a4),_0x70d059(0xdf),_0x70d059(0x2fb),'Apr',_0x70d059(0x187),'Jun','Jul',_0x70d059(0x155),_0x70d059(0x14a),_0x70d059(0xa3),'Nov','Dec'];return _0x16c8ba[_0x3554be[_0x70d059(0x218)]()]+'\x20'+_0x3554be[_0x70d059(0x2ac)]()+_0x70d059(0x189)+_0x520fbf;}const _0xde1469=[_0x70d059(0x1a4),_0x70d059(0xdf),_0x70d059(0x2fb),_0x70d059(0x180),'May','Jun','Jul',_0x70d059(0x155),_0x70d059(0x14a),_0x70d059(0xa3),_0x70d059(0x11c),_0x70d059(0x1f8)];return _0xde1469[_0x3554be[_0x70d059(0x218)]()]+'\x20'+_0x3554be[_0x70d059(0x2ac)]()+',\x20'+_0x3554be[_0x70d059(0xde)]()+_0x70d059(0x189)+_0x520fbf;}async function loadMessages(){const _0x4bd45a=_0x1744d6;try{console['log'](_0x4bd45a(0x1cb));let _0x543c95=await serverFetch(currentServer,_0x4bd45a(0xe9));console[_0x4bd45a(0x123)]('\x20Received\x20'+(_0x543c95?.[_0x4bd45a(0xac)]||0x0)+_0x4bd45a(0x15d));if(_0x543c95&&_0x543c95['length']>0x0){console[_0x4bd45a(0x123)](_0x4bd45a(0x159)+_0x543c95['length']+_0x4bd45a(0x15d)),allMessages=_0x543c95,lastMessageId=Math[_0x4bd45a(0x148)](..._0x543c95[_0x4bd45a(0x2e3)](_0x8cad8=>_0x8cad8['id'])),console[_0x4bd45a(0x123)](_0x4bd45a(0x30a),lastMessageId),messagesDiv[_0x4bd45a(0x227)]='',lastDateSeparator=null,_0x543c95[_0x4bd45a(0x2f8)](_0x3ff9b9=>{addMessageToServer(currentServer,_0x3ff9b9);});for(const _0x283eee of _0x543c95){await renderMessage(_0x283eee[_0x4bd45a(0x1e0)],_0x283eee['user_id'],_0x283eee[_0x4bd45a(0x331)],_0x283eee['created_at'],_0x283eee['id'],_0x283eee[_0x4bd45a(0x259)],![],_0x283eee);}addUnreadSeparatorIfNeeded(),updateOnlineUsers(),showTemporaryStatus('\x20Loaded\x20'+_0x543c95['length']+_0x4bd45a(0x1a6)),isOnline=!![];}else console[_0x4bd45a(0x123)]('\x20No\x20messages\x20in\x20database,\x20starting\x20fresh'),allMessages=[],lastMessageId=0x0,loadingDiv[_0x4bd45a(0x8e)]='No\x20messages\x20yet.\x20Start\x20the\x20conversation!',showTemporaryStatus(_0x4bd45a(0x1f5)),isOnline=!![];statusDiv[_0x4bd45a(0x146)]=_0x4bd45a(0x2bb);}catch(_0x3719c0){console[_0x4bd45a(0x14e)]('\x20Error\x20loading\x20messages:',_0x3719c0),console[_0x4bd45a(0x123)](_0x4bd45a(0x21d)),allMessages=[],lastMessageId=0x0,messagesDiv[_0x4bd45a(0x227)]='',lastDateSeparator=null,loadingDiv[_0x4bd45a(0x8e)]='Welcome!\x20Start\x20the\x20conversation',showTemporaryStatus(_0x4bd45a(0xba),![]),isOnline=![];}}async function sendGif(_0x5e5b80){const _0x4d4e37=_0x1744d6,_0x151d8f={'type':_0x4d4e37(0x1d6),'gifUrl':_0x5e5b80,'text':input[_0x4d4e37(0x126)][_0x4d4e37(0xbc)]()||'','user_id':userId,'user_name':userName,'created_at':new Date()[_0x4d4e37(0x194)](),'id':Date[_0x4d4e37(0x1f6)]()};if(currentServer===_0x4d4e37(0x339)&&currentDM)saveDMMessage(_0x151d8f,currentDM['id']);else{addMessageToServer(currentServer,_0x151d8f);try{await serverFetch(currentServer,_0x4d4e37(0x19f),{'method':_0x4d4e37(0x2c3),'body':JSON[_0x4d4e37(0x1be)]({'text':'[GIF]\x20'+(_0x151d8f[_0x4d4e37(0x1e0)]||'Sent\x20a\x20GIF'),'user_id':userId,'user_name':userName,'created_at':new Date()[_0x4d4e37(0x194)](),'gif_url':_0x5e5b80})});}catch(_0x182caf){console['warn']('Could\x20not\x20send\x20GIF\x20to\x20'+currentServer+_0x4d4e37(0xca));}}await renderMessage(_0x151d8f[_0x4d4e37(0x1e0)],_0x151d8f[_0x4d4e37(0x229)],_0x151d8f['user_name'],_0x151d8f[_0x4d4e37(0x12f)],_0x151d8f['id'],null,null,_0x151d8f),input['value']='',gifStickerModal[_0x4d4e37(0x295)][_0x4d4e37(0x178)]='none',showSuccess(_0x4d4e37(0x340));}async function sendFile(){const _0x509d4d=_0x1744d6;if(!currentFile){showError(_0x509d4d(0x27d));return;}try{sendFileBtn[_0x509d4d(0x22c)]=!![],sendFileBtn[_0x509d4d(0x8e)]=_0x509d4d(0x28f);const _0x5216af=URL['createObjectURL'](currentFile),_0x1071ad={'type':_0x509d4d(0x22f),'fileUrl':_0x5216af,'fileName':currentFile[_0x509d4d(0x156)],'fileSize':currentFile[_0x509d4d(0x12c)],'fileType':currentFile[_0x509d4d(0xc4)],'text':input[_0x509d4d(0x126)][_0x509d4d(0xbc)]()||'','user_id':userId,'user_name':userName,'created_at':new Date()[_0x509d4d(0x194)](),'id':Date[_0x509d4d(0x1f6)]()};if(currentServer===_0x509d4d(0x339)&&currentDM)saveDMMessage(_0x1071ad,currentDM['id']);else{addMessageToServer(currentServer,_0x1071ad);try{await serverFetch(currentServer,_0x509d4d(0x19f),{'method':_0x509d4d(0x2c3),'body':JSON[_0x509d4d(0x1be)]({'text':_0x509d4d(0x215)+(_0x1071ad[_0x509d4d(0x1e0)]||'Sent\x20a\x20file'),'user_id':userId,'user_name':userName,'created_at':new Date()[_0x509d4d(0x194)](),'file_url':_0x5216af,'file_name':currentFile['name'],'file_type':currentFile[_0x509d4d(0xc4)]})});}catch(_0x56eb8a){console['warn']('Could\x20not\x20send\x20file\x20to\x20'+currentServer+_0x509d4d(0xca));}}await renderMessage(_0x1071ad[_0x509d4d(0x1e0)],_0x1071ad['user_id'],_0x1071ad[_0x509d4d(0x331)],_0x1071ad[_0x509d4d(0x12f)],_0x1071ad['id'],null,null,_0x1071ad),input[_0x509d4d(0x126)]='',fileUploadModal['style']['display']=_0x509d4d(0xf8),resetFileUpload(),showSuccess(_0x509d4d(0x32e));}catch(_0xd3be72){console[_0x509d4d(0x14e)]('\x20Error\x20sending\x20file:',_0xd3be72),showError(_0x509d4d(0x1e6));}finally{sendFileBtn['disabled']=![],sendFileBtn[_0x509d4d(0x8e)]=_0x509d4d(0x2ca);}}function initializeTextFormatting(){const _0x9ad0b8=_0x1744d6;console['log']('\x20Initializing\x20text\x20formatting\x20functionality...'),boldBtn[_0x9ad0b8(0x1a7)](_0x9ad0b8(0xbe),()=>{const _0x139b78=_0x9ad0b8;toggleTextFormatting(_0x139b78(0x90));}),italicBtn[_0x9ad0b8(0x1a7)](_0x9ad0b8(0xbe),()=>{const _0x4921d6=_0x9ad0b8;toggleTextFormatting(_0x4921d6(0x25b));}),input[_0x9ad0b8(0x1a7)](_0x9ad0b8(0x2c6),handleFormattingShortcuts);}function initializeLinkSharing(){const _0x29a38b=_0x1744d6;console['log']('\x20Initializing\x20link\x20sharing\x20functionality...'),linkShareBtn[_0x29a38b(0x1a7)](_0x29a38b(0xbe),()=>{const _0x1c78fd=_0x29a38b;linkShareModal['style'][_0x1c78fd(0x178)]=_0x1c78fd(0x205),linkUrlInput[_0x1c78fd(0x126)]='',linkDisplayInput['value']='',linkPreview[_0x1c78fd(0x266)][_0x1c78fd(0x1cc)](_0x1c78fd(0x140));}),linkUrlInput['addEventListener'](_0x29a38b(0x26c),updateLinkPreview),linkDisplayInput[_0x29a38b(0x1a7)](_0x29a38b(0x26c),updateLinkPreview),cancelLinkBtn[_0x29a38b(0x1a7)]('click',()=>{const _0x544c90=_0x29a38b;linkShareModal['style'][_0x544c90(0x178)]=_0x544c90(0xf8);}),insertLinkBtn[_0x29a38b(0x1a7)](_0x29a38b(0xbe),insertLink),linkShareModal[_0x29a38b(0x1a7)]('click',_0x467c85=>{const _0x17954d=_0x29a38b;_0x467c85[_0x17954d(0x31e)]===linkShareModal&&(linkShareModal[_0x17954d(0x295)][_0x17954d(0x178)]=_0x17954d(0xf8));});}function initializeGifSticker(){const _0x246679=_0x1744d6;console[_0x246679(0x123)](_0x246679(0xfd)),gifStickerBtn[_0x246679(0x1a7)](_0x246679(0xbe),()=>{const _0x4c8998=_0x246679;gifStickerModal[_0x4c8998(0x295)]['display']=_0x4c8998(0x205),loadTrendingGifs(),loadStickers();}),gifStickerTabs[_0x246679(0x2f8)](_0x54e2ab=>{const _0xc073b3=_0x246679;_0x54e2ab[_0xc073b3(0x1a7)](_0xc073b3(0xbe),()=>{const _0xbbc016=_0xc073b3,_0xac347=_0x54e2ab[_0xbbc016(0x134)](_0xbbc016(0x20d));switchGifStickerTab(_0xac347),_0xac347===_0xbbc016(0x1ff)&&loadTrendingGifs();});});let _0x5554c2;gifSearchInput[_0x246679(0x1a7)](_0x246679(0x26c),_0x51671b=>{const _0x1a1eb0=_0x246679;clearTimeout(_0x5554c2);const _0x33c08c=_0x51671b[_0x1a1eb0(0x31e)][_0x1a1eb0(0x126)][_0x1a1eb0(0xbc)]();if(_0x33c08c['length']===0x0)loadTrendingGifs();else _0x33c08c[_0x1a1eb0(0xac)]>0x2&&(_0x5554c2=setTimeout(()=>{searchGifs(_0x33c08c);},0x1f4));}),gifStickerModal[_0x246679(0x1a7)](_0x246679(0xbe),_0x2610c6=>{const _0x3da25c=_0x246679;_0x2610c6['target']===gifStickerModal&&(gifStickerModal[_0x3da25c(0x295)]['display']='none');}),cancelGifStickerBtn['addEventListener'](_0x246679(0xbe),()=>{const _0xdd475c=_0x246679;gifStickerModal[_0xdd475c(0x295)][_0xdd475c(0x178)]=_0xdd475c(0xf8);});}function initializeFileUpload(){const _0xb0cb5c=_0x1744d6;console[_0xb0cb5c(0x123)](_0xb0cb5c(0x213)),fileUploadBtn[_0xb0cb5c(0x1a7)]('click',()=>{const _0x1846cc=_0xb0cb5c;fileUploadModal[_0x1846cc(0x295)][_0x1846cc(0x178)]=_0x1846cc(0x205),resetFileUpload();}),fileInput[_0xb0cb5c(0x1a7)](_0xb0cb5c(0x330),handleFileSelect),fileUploadArea[_0xb0cb5c(0x1a7)](_0xb0cb5c(0x207),_0x576907=>{const _0xa2f2dd=_0xb0cb5c;_0x576907[_0xa2f2dd(0xb9)](),fileUploadArea['classList']['add']('dragover');}),fileUploadArea[_0xb0cb5c(0x1a7)](_0xb0cb5c(0xc9),()=>{const _0x286da1=_0xb0cb5c;fileUploadArea[_0x286da1(0x266)]['remove'](_0x286da1(0x207));}),fileUploadArea[_0xb0cb5c(0x1a7)](_0xb0cb5c(0x252),_0x4dc419=>{const _0x191be5=_0xb0cb5c;_0x4dc419[_0x191be5(0xb9)](),fileUploadArea[_0x191be5(0x266)]['remove']('dragover');const _0x1cffe4=_0x4dc419[_0x191be5(0x288)][_0x191be5(0x1c0)];_0x1cffe4['length']>0x0&&handleFile(_0x1cffe4[0x0]);}),fileUploadArea[_0xb0cb5c(0x1a7)](_0xb0cb5c(0xbe),()=>{const _0x1da8a1=_0xb0cb5c;fileInput[_0x1da8a1(0xbe)]();}),cancelUploadBtn[_0xb0cb5c(0x1a7)]('click',()=>{const _0x25f94b=_0xb0cb5c;fileUploadModal[_0x25f94b(0x295)][_0x25f94b(0x178)]=_0x25f94b(0xf8),resetFileUpload();}),sendFileBtn['addEventListener'](_0xb0cb5c(0xbe),sendFile),fileUploadModal[_0xb0cb5c(0x1a7)](_0xb0cb5c(0xbe),_0x32b8f8=>{const _0x4d0e62=_0xb0cb5c;_0x32b8f8['target']===fileUploadModal&&(fileUploadModal['style'][_0x4d0e62(0x178)]=_0x4d0e62(0xf8),resetFileUpload());});}function handleFormattingShortcuts(_0x3f5b27){const _0x1270f5=_0x1744d6,_0x13b300=navigator[_0x1270f5(0x1e8)][_0x1270f5(0x23c)]()[_0x1270f5(0x24e)](_0x1270f5(0x13e))>=0x0,_0x3b17a9=_0x13b300?_0x3f5b27[_0x1270f5(0x321)]:_0x3f5b27['ctrlKey'];if(_0x3b17a9)switch(_0x3f5b27['key']){case'b':_0x3f5b27['preventDefault'](),toggleTextFormatting(_0x1270f5(0x90));break;case'i':_0x3f5b27[_0x1270f5(0xb9)](),toggleTextFormatting(_0x1270f5(0x25b));break;}}function updateLinkPreview(){const _0x5ecfb7=_0x1744d6,_0x190e50=linkUrlInput[_0x5ecfb7(0x126)][_0x5ecfb7(0xbc)](),_0x8ac0db=linkDisplayInput[_0x5ecfb7(0x126)]['trim']();if(_0x190e50){linkPreview[_0x5ecfb7(0x266)][_0x5ecfb7(0x268)](_0x5ecfb7(0x140));const _0x546ef6=_0x8ac0db||_0x190e50;linkPreviewUrl['textContent']=_0x546ef6;}else linkPreview[_0x5ecfb7(0x266)][_0x5ecfb7(0x1cc)](_0x5ecfb7(0x140));}function isValidUrl(_0x629158){try{return new URL(_0x629158),!![];}catch(_0x38ee08){return![];}}function parseMarkdown(_0x3266d0){const _0x37f8e7=_0x1744d6;return _0x3266d0=_0x3266d0[_0x37f8e7(0xa7)](/\*\*(.*?)\*\*/g,'<strong>$1</strong>'),_0x3266d0=_0x3266d0['replace'](/\*(.*?)\*/g,_0x37f8e7(0x332)),_0x3266d0;}function parseAndRenderLinks(_0x3a2eba){const _0x4198ce=_0x1744d6;_0x3a2eba=_0x3a2eba[_0x4198ce(0xa7)](/\[([^\]]+)\]\(([^)]+)\)/g,_0x4198ce(0x2e1));const _0x16baab=/(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/g;return _0x3a2eba=_0x3a2eba[_0x4198ce(0xa7)](_0x16baab,_0x4198ce(0x103)),_0x3a2eba;}async function loadTrendingGifs(){const _0x3def4f=_0x1744d6;if(!GIPHY_API_KEY||GIPHY_API_KEY==='YOUR_GIPHY_API_KEY'){showGiphyApiWarning();return;}gifsGrid[_0x3def4f(0x227)]=_0x3def4f(0x300);try{const _0x14c118=await fetch(GIPHY_BASE_URL+'/trending?api_key='+GIPHY_API_KEY+_0x3def4f(0x2da)),_0x3389c6=await _0x14c118['json']();displayGifs(_0x3389c6[_0x3def4f(0x1a9)]);}catch(_0x20644b){console[_0x3def4f(0x14e)](_0x3def4f(0x154),_0x20644b),gifsGrid[_0x3def4f(0x227)]=_0x3def4f(0x327);}}async function searchGifs(_0x4553b5){const _0x281442=_0x1744d6;if(!GIPHY_API_KEY||GIPHY_API_KEY===_0x281442(0x243)){showGiphyApiWarning();return;}gifsGrid[_0x281442(0x227)]='<div\x20class=\x22gif-loading\x22><span>Searching\x20GIFs...</span></div>';try{const _0xb98430=await fetch(GIPHY_BASE_URL+_0x281442(0x2f9)+GIPHY_API_KEY+'&q='+encodeURIComponent(_0x4553b5)+_0x281442(0x2da)),_0x2ca763=await _0xb98430[_0x281442(0x21c)]();displayGifs(_0x2ca763['data']);}catch(_0x1dcf6a){console[_0x281442(0x14e)](_0x281442(0x287),_0x1dcf6a),gifsGrid[_0x281442(0x227)]=_0x281442(0x193);}}function displayGifs(_0x56a45d){const _0x34c09c=_0x1744d6;gifsGrid[_0x34c09c(0x227)]='';if(!_0x56a45d||_0x56a45d[_0x34c09c(0xac)]===0x0){gifsGrid[_0x34c09c(0x227)]=_0x34c09c(0x142);return;}_0x56a45d[_0x34c09c(0x2f8)](_0x2e8af6=>{const _0x5eba3d=_0x34c09c,_0x5b7323=document[_0x5eba3d(0x119)]('div');_0x5b7323['classList']['add'](_0x5eba3d(0x23a));const _0x566d09=document[_0x5eba3d(0x119)](_0x5eba3d(0xbd));_0x566d09[_0x5eba3d(0x24f)]=_0x2e8af6[_0x5eba3d(0x23d)][_0x5eba3d(0x1c8)]['url'],_0x566d09['alt']=_0x2e8af6['title']||_0x5eba3d(0xa0),_0x566d09[_0x5eba3d(0xd7)]=_0x5eba3d(0x2f1),_0x566d09[_0x5eba3d(0x295)]['width']=_0x5eba3d(0x31a),_0x566d09[_0x5eba3d(0x295)][_0x5eba3d(0x272)]='100%',_0x566d09[_0x5eba3d(0x295)]['objectFit']=_0x5eba3d(0x320),_0x5b7323[_0x5eba3d(0x265)](_0x566d09),_0x5b7323[_0x5eba3d(0x1a7)]('click',()=>{const _0x1292f3=_0x5eba3d;sendGif(_0x2e8af6['images'][_0x1292f3(0x149)][_0x1292f3(0x2b0)]);}),gifsGrid[_0x5eba3d(0x265)](_0x5b7323);});}function showGiphyApiWarning(){const _0x5d56c7=_0x1744d6;gifsGrid['innerHTML']=_0x5d56c7(0x118);}function loadStickers(){const _0x16edce=_0x1744d6;stickersGrid[_0x16edce(0x227)]='',Object[_0x16edce(0x158)](stickerCategories)[_0x16edce(0x2f8)](([_0x42a290,_0x598c4b])=>{const _0x5da35c=_0x16edce,_0x113a49=document[_0x5da35c(0x119)](_0x5da35c(0x240));_0x113a49[_0x5da35c(0x266)][_0x5da35c(0x1cc)]('sticker-category');const _0x568450=document[_0x5da35c(0x119)]('h4');_0x568450[_0x5da35c(0x8e)]=_0x42a290[_0x5da35c(0x1dd)](0x0)[_0x5da35c(0x23c)]()+_0x42a290['slice'](0x1),_0x113a49[_0x5da35c(0x265)](_0x568450);const _0x346ea2=document[_0x5da35c(0x119)](_0x5da35c(0x240));_0x346ea2[_0x5da35c(0x266)][_0x5da35c(0x1cc)](_0x5da35c(0xfa)),_0x346ea2[_0x5da35c(0x295)]['gridTemplateColumns']=_0x5da35c(0x28d),_0x598c4b[_0x5da35c(0x2f8)]((_0x47660b,_0x44bd43)=>{const _0x7a161d=_0x5da35c,_0x21f5cf=document[_0x7a161d(0x119)]('div');_0x21f5cf[_0x7a161d(0x266)]['add']('gif-sticker-item');const _0x18bdd1=document[_0x7a161d(0x119)](_0x7a161d(0xbd));_0x18bdd1[_0x7a161d(0x24f)]=_0x47660b,_0x18bdd1[_0x7a161d(0xf1)]=_0x42a290+_0x7a161d(0x1c2)+(_0x44bd43+0x1),_0x18bdd1[_0x7a161d(0xd7)]=_0x7a161d(0x2f1),_0x18bdd1[_0x7a161d(0x295)][_0x7a161d(0x2cb)]=_0x7a161d(0x31a),_0x18bdd1[_0x7a161d(0x295)]['height']=_0x7a161d(0x31a),_0x18bdd1[_0x7a161d(0x295)][_0x7a161d(0xce)]=_0x7a161d(0x102),_0x21f5cf[_0x7a161d(0x265)](_0x18bdd1),_0x21f5cf[_0x7a161d(0x1a7)]('click',()=>{sendSticker(_0x47660b);}),_0x346ea2[_0x7a161d(0x265)](_0x21f5cf);}),_0x113a49[_0x5da35c(0x265)](_0x346ea2),stickersGrid['appendChild'](_0x113a49);});}function switchGifStickerTab(_0x3ecf34){const _0x3166ec=_0x1744d6;gifStickerTabs[_0x3166ec(0x2f8)](_0x145da4=>{const _0x3a3056=_0x3166ec;_0x145da4['getAttribute']('data-tab')===_0x3ecf34?_0x145da4[_0x3a3056(0x266)][_0x3a3056(0x1cc)]('active'):_0x145da4[_0x3a3056(0x266)][_0x3a3056(0x268)](_0x3a3056(0x32f));}),document[_0x3166ec(0x209)](_0x3166ec(0xe6))[_0x3166ec(0x2f8)](_0x1d0a8e=>{const _0x2ba032=_0x3166ec;_0x1d0a8e['id']===_0x3ecf34+'-tab'?_0x1d0a8e[_0x2ba032(0x266)][_0x2ba032(0x268)](_0x2ba032(0x140)):_0x1d0a8e[_0x2ba032(0x266)][_0x2ba032(0x1cc)]('hidden');});}async function sendSticker(_0x27f336){const _0x5bbc2f=_0x1744d6,_0x29104f={'type':'sticker','stickerUrl':_0x27f336,'text':input['value']['trim']()||'','user_id':userId,'user_name':userName,'created_at':new Date()[_0x5bbc2f(0x194)](),'id':Date[_0x5bbc2f(0x1f6)]()};if(currentServer==='dms'&&currentDM)saveDMMessage(_0x29104f,currentDM['id']);else{addMessageToServer(currentServer,_0x29104f);try{await serverFetch(currentServer,_0x5bbc2f(0x19f),{'method':'POST','body':JSON[_0x5bbc2f(0x1be)]({'text':_0x5bbc2f(0x26d)+(_0x29104f[_0x5bbc2f(0x1e0)]||'Sent\x20a\x20sticker'),'user_id':userId,'user_name':userName,'created_at':new Date()['toISOString'](),'sticker_url':_0x27f336})});}catch(_0x69f704){console['warn'](_0x5bbc2f(0x2b8)+currentServer+'\x20server\x20database');}}await renderMessage(_0x29104f['text'],_0x29104f['user_id'],_0x29104f[_0x5bbc2f(0x331)],_0x29104f[_0x5bbc2f(0x12f)],_0x29104f['id'],null,null,_0x29104f),input[_0x5bbc2f(0x126)]='',gifStickerModal[_0x5bbc2f(0x295)][_0x5bbc2f(0x178)]=_0x5bbc2f(0xf8),showSuccess(_0x5bbc2f(0xb7));}function handleFileSelect(_0x51af7e){const _0x173075=_0x1744d6,_0x229776=_0x51af7e[_0x173075(0x31e)][_0x173075(0x1c0)][0x0];_0x229776&&handleFile(_0x229776);}function handleFile(_0x3bf9de){const _0x22ea36=_0x1744d6;if(_0x3bf9de[_0x22ea36(0x12c)]>0xa*0x400*0x400){showError(_0x22ea36(0x1b7));return;}currentFile=_0x3bf9de,showFilePreview(_0x3bf9de);}function showFilePreview(_0x358282){const _0x23f7f8=_0x1744d6;filePreview[_0x23f7f8(0x227)]='';const _0x5f1296=_0x358282[_0x23f7f8(0xc4)][_0x23f7f8(0xee)]('/')[0x0],_0x200592=_0x358282['name'],_0x15ab00=formatFileSize(_0x358282[_0x23f7f8(0x12c)]);if(_0x5f1296===_0x23f7f8(0x1a8)){const _0x3326db=document[_0x23f7f8(0x119)]('img');_0x3326db[_0x23f7f8(0x24f)]=URL[_0x23f7f8(0x31c)](_0x358282),filePreview['appendChild'](_0x3326db);}else{if(_0x5f1296===_0x23f7f8(0x2d1)){const _0x5a3596=document['createElement'](_0x23f7f8(0x2d1));_0x5a3596[_0x23f7f8(0x24f)]=URL[_0x23f7f8(0x31c)](_0x358282),_0x5a3596[_0x23f7f8(0x12e)]=!![],filePreview[_0x23f7f8(0x265)](_0x5a3596);}else{const _0x29b1c3=document[_0x23f7f8(0x119)](_0x23f7f8(0x240));_0x29b1c3[_0x23f7f8(0x266)]['add']('attachment-file');const _0x2de6b7=document[_0x23f7f8(0x119)](_0x23f7f8(0x122));_0x2de6b7['classList']['add'](_0x23f7f8(0x30c),_0x23f7f8(0x1ef)),_0x2de6b7[_0x23f7f8(0x8e)]=_0x23f7f8(0x341);const _0x27f933=document[_0x23f7f8(0x119)](_0x23f7f8(0x240));_0x27f933[_0x23f7f8(0x266)][_0x23f7f8(0x1cc)](_0x23f7f8(0x217));const _0x34b490=document[_0x23f7f8(0x119)](_0x23f7f8(0x240));_0x34b490[_0x23f7f8(0x266)][_0x23f7f8(0x1cc)](_0x23f7f8(0x112)),_0x34b490[_0x23f7f8(0x8e)]=_0x200592;const _0x57db61=document[_0x23f7f8(0x119)](_0x23f7f8(0x240));_0x57db61[_0x23f7f8(0x266)][_0x23f7f8(0x1cc)]('file-size'),_0x57db61['textContent']=_0x15ab00,_0x27f933[_0x23f7f8(0x265)](_0x34b490),_0x27f933[_0x23f7f8(0x265)](_0x57db61),_0x29b1c3[_0x23f7f8(0x265)](_0x2de6b7),_0x29b1c3[_0x23f7f8(0x265)](_0x27f933),filePreview[_0x23f7f8(0x265)](_0x29b1c3);}}}function formatFileSize(_0xe4addf){const _0x43b64e=_0x1744d6;if(_0xe4addf===0x0)return _0x43b64e(0x2ea);const _0x101a0f=0x400,_0x9eb568=[_0x43b64e(0x25d),'KB','MB','GB'],_0x245488=Math['floor'](Math['log'](_0xe4addf)/Math[_0x43b64e(0x123)](_0x101a0f));return parseFloat((_0xe4addf/Math[_0x43b64e(0x27b)](_0x101a0f,_0x245488))[_0x43b64e(0x2df)](0x2))+'\x20'+_0x9eb568[_0x245488];}function resetFileUpload(){const _0x208e3c=_0x1744d6;currentFile=null,fileInput[_0x208e3c(0x126)]='',filePreview[_0x208e3c(0x227)]='',fileUploadArea[_0x208e3c(0x266)]['remove'](_0x208e3c(0x207));}function _0x25db(_0x45726f,_0x6405c0){const _0x1ac8c5=_0x1ac8();return _0x25db=function(_0x25db57,_0x25151b){_0x25db57=_0x25db57-0x89;let _0x421a7c=_0x1ac8c5[_0x25db57];return _0x421a7c;},_0x25db(_0x45726f,_0x6405c0);}function downloadFile(_0x514b69,_0x9ce2b7){const _0x32bc5f=_0x1744d6,_0x213ff6=document[_0x32bc5f(0x119)]('a');_0x213ff6[_0x32bc5f(0x2a5)]=_0x514b69,_0x213ff6[_0x32bc5f(0x1f3)]=_0x9ce2b7,document['body'][_0x32bc5f(0x265)](_0x213ff6),_0x213ff6[_0x32bc5f(0xbe)](),document['body'][_0x32bc5f(0x26a)](_0x213ff6);}function initializeUser(){const _0x316f4a=_0x1744d6;userName=localStorage['getItem'](_0x316f4a(0x2f7)),userId=localStorage[_0x316f4a(0x1a0)](_0x316f4a(0x2de));if(!userName){let _0x347462=prompt(_0x316f4a(0x27e))||_0x316f4a(0x257);_0x347462=_0x347462[_0x316f4a(0xbc)]()||_0x316f4a(0x257),localStorage[_0x316f4a(0x181)](_0x316f4a(0x2f7),_0x347462),userName=_0x347462;}!userId&&(userId=_0x316f4a(0x206)+Date['now']()+'-'+Math['random']()[_0x316f4a(0x13d)](0x24)['substring'](0x2,0x9),localStorage[_0x316f4a(0x181)](_0x316f4a(0x2de),userId)),userDisplay[_0x316f4a(0x8e)]=_0x316f4a(0x1ad)+userName,console[_0x316f4a(0x123)](_0x316f4a(0x2b4)+userName+'\x20('+userId+')');}function initializeSidebar(){const _0x6ca519=_0x1744d6;console[_0x6ca519(0x123)]('\x20Initializing\x20sidebar...'),serverIcons['forEach'](_0x4e176f=>{const _0x55c6ca=_0x6ca519;_0x4e176f[_0x55c6ca(0x1a7)](_0x55c6ca(0xbe),function(){const _0x16e9c0=_0x55c6ca,_0x237da8=this[_0x16e9c0(0x134)](_0x16e9c0(0xad));switchServer(_0x237da8);});}),updateUserSection(),updateDMList(),setInterval(updateDMList,0x1388);}function selectDM(_0x4f9026){const _0x96819f=_0x1744d6;console['log'](_0x96819f(0x11f)+_0x4f9026[_0x96819f(0x156)]),clearActiveDM(),currentDM=_0x4f9026;const _0x1667eb=document['querySelectorAll']('.dm-item');_0x1667eb[_0x96819f(0x2f8)](_0x32e6f7=>{const _0x3b48f5=_0x96819f;_0x32e6f7['getAttribute'](_0x3b48f5(0x16a))===_0x4f9026['id']&&_0x32e6f7['classList'][_0x3b48f5(0x1cc)](_0x3b48f5(0x32f));});const _0x13e3d0=document['querySelector'](_0x96819f(0x315));_0x13e3d0[_0x96819f(0x8e)]=_0x4f9026[_0x96819f(0x156)],input[_0x96819f(0x22c)]=![],input[_0x96819f(0x29e)]=_0x96819f(0x17c)+_0x4f9026[_0x96819f(0x156)]+_0x96819f(0x25a),sendButton[_0x96819f(0x22c)]=![],loadDMMessages(_0x4f9026['id']),showSuccess(_0x96819f(0x1cd)+_0x4f9026[_0x96819f(0x156)]);}async function loadDMMessages(_0x28bbfa){const _0x58ad94=_0x1744d6;try{const _0x8c6654=await loadDMsFromDatabase(userId,_0x28bbfa);messagesDiv[_0x58ad94(0x227)]='',lastDateSeparator=null;if(_0x8c6654[_0x58ad94(0xac)]===0x0){const _0x2be842=document[_0x58ad94(0x119)](_0x58ad94(0x240));_0x2be842[_0x58ad94(0x295)][_0x58ad94(0x232)]=_0x58ad94(0xcf),_0x2be842[_0x58ad94(0x295)][_0x58ad94(0x10e)]='20px',_0x2be842[_0x58ad94(0x295)][_0x58ad94(0x250)]=_0x58ad94(0x11d),_0x2be842['textContent']=_0x58ad94(0x17e)+currentDM[_0x58ad94(0x156)],messagesDiv[_0x58ad94(0x265)](_0x2be842);}else for(const _0x3e247f of _0x8c6654){const _0x4252bb=_0x3e247f['sender_id']===userId;await renderMessage(_0x3e247f['message_text'],_0x3e247f[_0x58ad94(0x1ed)],_0x4252bb?userName:currentDM['name'],_0x3e247f['created_at'],_0x3e247f['id'],_0x3e247f[_0x58ad94(0x259)],![],{'type':_0x3e247f['message_type'],..._0x3e247f});}}catch(_0xabf3be){console[_0x58ad94(0x14e)]('Error\x20loading\x20DM\x20messages:',_0xabf3be),showError('Failed\x20to\x20load\x20DM\x20messages');}}function saveDMMessage(_0x1a4a3,_0x1b7c4e){const _0x368e54=_0x1744d6,_0x325e7f='dm_'+userId+'_'+_0x1b7c4e;!dmMessages[_0x1b7c4e]&&(dmMessages[_0x1b7c4e]=[]),dmMessages[_0x1b7c4e][_0x368e54(0x253)](_0x1a4a3),localStorage[_0x368e54(0x181)](_0x325e7f,JSON[_0x368e54(0x1be)](dmMessages[_0x1b7c4e]));}function clearActiveDM(){const _0x3e0021=_0x1744d6,_0x2eedb2=document['querySelectorAll'](_0x3e0021(0x10a));_0x2eedb2[_0x3e0021(0x2f8)](_0x98005b=>{const _0x578176=_0x3e0021;_0x98005b[_0x578176(0x266)][_0x578176(0x268)]('active');}),currentDM=null;}function updateUserSection(){const _0x197792=_0x1744d6;if(userName){userSidebarName[_0x197792(0x8e)]=userName,userSidebarTag[_0x197792(0x8e)]='#'+userId[_0x197792(0x1f2)](-0x4);if(userProfilePicture){userSidebarAvatar[_0x197792(0x227)]='';const _0x3c4341=document['createElement'](_0x197792(0xbd));_0x3c4341[_0x197792(0x24f)]=userProfilePicture,_0x3c4341['alt']=userName+_0x197792(0xef),userSidebarAvatar['appendChild'](_0x3c4341);}}}function getUniqueUsersFromMessages(){const _0x9ab4bb=_0x1744d6,_0x7123b=new Map();return allMessages[_0x9ab4bb(0x2f8)](_0x1e0deb=>{const _0x52215e=_0x9ab4bb;!_0x7123b[_0x52215e(0x2bd)](_0x1e0deb[_0x52215e(0x229)])&&_0x7123b[_0x52215e(0x2b2)](_0x1e0deb[_0x52215e(0x229)],{'id':_0x1e0deb[_0x52215e(0x229)],'name':_0x1e0deb[_0x52215e(0x331)],'avatar':generateAvatar(_0x1e0deb[_0x52215e(0x331)])});}),_0x7123b[_0x9ab4bb(0x2b2)](userId,{'id':userId,'name':userName,'avatar':userProfilePicture}),Array[_0x9ab4bb(0x225)](_0x7123b[_0x9ab4bb(0x1a1)]());}function generateAvatar(_0x4c2c00){const _0x2fb3db=_0x1744d6,_0x29f58e=[_0x2fb3db(0x19b),'dog',_0x2fb3db(0x1fb),_0x2fb3db(0x30d),_0x2fb3db(0xc2),_0x2fb3db(0x1b2),_0x2fb3db(0xbf)],_0x1cda84=_0x4c2c00[_0x2fb3db(0xee)]('')['reduce']((_0x56583a,_0x427b50)=>_0x56583a+_0x427b50[_0x2fb3db(0x1c6)](0x0),0x0)%_0x29f58e[_0x2fb3db(0xac)],_0x30b039=_0x29f58e[_0x1cda84],_0x65815b={'cat':_0x2fb3db(0x131),'dog':'https://images.unsplash.com/photo-1518717758536-85ae29035b6d?w=150&h=150&fit=crop&crop=center','rabbit':_0x2fb3db(0x2ba),'fox':_0x2fb3db(0x256),'owl':_0x2fb3db(0x220),'bear':_0x2fb3db(0x2cd),'lion':_0x2fb3db(0x25e)};return _0x65815b[_0x30b039]||profilePictures[0x0][_0x2fb3db(0x2b0)];}function initializeProfilePictures(){const _0x56a767=_0x1744d6;console[_0x56a767(0x123)](_0x56a767(0x216)),userProfilePicture=localStorage[_0x56a767(0x1a0)](_0x56a767(0x27f))||profilePictures[0x0][_0x56a767(0x2b0)],profilePictures['forEach'](_0x39a8a9=>{const _0x246bf9=_0x56a767,_0x116da5=document[_0x246bf9(0x119)](_0x246bf9(0x240));_0x116da5[_0x246bf9(0x266)]['add'](_0x246bf9(0x222));const _0x252016=document[_0x246bf9(0x119)](_0x246bf9(0x240));_0x252016[_0x246bf9(0x266)][_0x246bf9(0x1cc)]('profile-picture-option'),_0x252016[_0x246bf9(0x295)][_0x246bf9(0x16b)]=_0x246bf9(0x2ab)+_0x39a8a9[_0x246bf9(0x2b0)]+')',_0x252016[_0x246bf9(0x164)]('data-picture-url',_0x39a8a9['url']);const _0x470b24=document[_0x246bf9(0x119)](_0x246bf9(0x240));_0x470b24['classList'][_0x246bf9(0x1cc)](_0x246bf9(0xe4)),_0x470b24[_0x246bf9(0x8e)]=_0x39a8a9['name'],_0x252016[_0x246bf9(0x1a7)](_0x246bf9(0xbe),()=>{const _0x28017a=_0x246bf9;userProfilePicture=_0x39a8a9[_0x28017a(0x2b0)],localStorage[_0x28017a(0x181)](_0x28017a(0x27f),_0x39a8a9[_0x28017a(0x2b0)]),profilePictureModal[_0x28017a(0x295)][_0x28017a(0x178)]='none',showSuccess(_0x28017a(0xd2)+_0x39a8a9['name']+'!'),updateAllMessagesWithProfilePicture(),updateUserSection();}),_0x116da5[_0x246bf9(0x265)](_0x252016),_0x116da5[_0x246bf9(0x265)](_0x470b24),profilePictureOptions[_0x246bf9(0x265)](_0x116da5);}),profilePictureBtn[_0x56a767(0x1a7)]('click',()=>{const _0x27ece0=_0x56a767;profilePictureModal[_0x27ece0(0x295)]['display']=_0x27ece0(0x205);}),profilePictureModal[_0x56a767(0x1a7)](_0x56a767(0xbe),_0x4af8ce=>{const _0x3a93c3=_0x56a767;_0x4af8ce['target']===profilePictureModal&&(profilePictureModal[_0x3a93c3(0x295)][_0x3a93c3(0x178)]='none');});}function updateAllMessagesWithProfilePicture(){const _0x195ba3=_0x1744d6,_0x1007c1=messagesDiv[_0x195ba3(0x209)](_0x195ba3(0x174));_0x1007c1[_0x195ba3(0x2f8)](_0x39d161=>{const _0x374602=_0x195ba3,_0x3f3e26=_0x39d161[_0x374602(0xff)](_0x374602(0x1eb));_0x3f3e26&&(_0x3f3e26[_0x374602(0x24f)]=userProfilePicture);});}function initializeAudioCall(){const _0x210054=_0x1744d6;console[_0x210054(0x123)](_0x210054(0x2ad)),audioCallBtn[_0x210054(0x1a7)]('click',showCallUserSelection),endCallBtn['addEventListener'](_0x210054(0xbe),endAudioCall),acceptCallBtn[_0x210054(0x1a7)](_0x210054(0xbe),acceptIncomingCall),rejectCallBtn[_0x210054(0x1a7)](_0x210054(0xbe),rejectIncomingCall),cancelCallBtn[_0x210054(0x1a7)](_0x210054(0xbe),()=>{const _0x4a34e3=_0x210054;callUserModal[_0x4a34e3(0x295)][_0x4a34e3(0x178)]=_0x4a34e3(0xf8);}),allowMicrophoneBtn[_0x210054(0x1a7)](_0x210054(0xbe),requestMicrophonePermission),denyMicrophoneBtn['addEventListener'](_0x210054(0xbe),()=>{const _0x469a74=_0x210054;microphonePermissionModal[_0x469a74(0x295)]['display']='none',showError(_0x469a74(0xab));}),clearMessagesBtn[_0x210054(0x1a7)](_0x210054(0xbe),clearAllMessages),input['addEventListener'](_0x210054(0x26c),sendTypingIndicator);}function showCallUserSelection(){const _0x459e61=_0x1744d6;if(isInCall){showError(_0x459e61(0x18f));return;}const _0x11687f=getUniqueUsersFromMessages();callUserList['innerHTML']='';if(_0x11687f[_0x459e61(0xac)]===0x0){const _0x14d656=document[_0x459e61(0x119)]('div');_0x14d656[_0x459e61(0x8e)]=_0x459e61(0x2d2),_0x14d656[_0x459e61(0x295)][_0x459e61(0x232)]=_0x459e61(0xcf),_0x14d656[_0x459e61(0x295)][_0x459e61(0x10e)]=_0x459e61(0x128),_0x14d656[_0x459e61(0x295)][_0x459e61(0x250)]=_0x459e61(0x11d),callUserList[_0x459e61(0x265)](_0x14d656);}else _0x11687f[_0x459e61(0x2f8)](_0x295f87=>{const _0x58ca6a=_0x459e61;if(_0x295f87['id']!==userId){const _0x3981df=document['createElement']('div');_0x3981df[_0x58ca6a(0x266)][_0x58ca6a(0x1cc)](_0x58ca6a(0x309));const _0x24a101=document[_0x58ca6a(0x119)](_0x58ca6a(0xbd));_0x24a101['classList'][_0x58ca6a(0x1cc)](_0x58ca6a(0xb4)),_0x24a101['src']=_0x295f87[_0x58ca6a(0xd3)]||generateAvatar(_0x295f87[_0x58ca6a(0x156)]);const _0x368958=document[_0x58ca6a(0x119)]('div');_0x368958[_0x58ca6a(0x295)]['flex']='1';const _0x134e29=document[_0x58ca6a(0x119)]('div');_0x134e29['classList']['add'](_0x58ca6a(0xb1)),_0x134e29[_0x58ca6a(0x8e)]=_0x295f87['name'];const _0x22c903=document[_0x58ca6a(0x119)](_0x58ca6a(0x240));_0x22c903[_0x58ca6a(0x266)][_0x58ca6a(0x1cc)]('call-user-status'),onlineUsers[_0x58ca6a(0x2bd)](_0x295f87['id'])?(_0x22c903[_0x58ca6a(0x8e)]=_0x58ca6a(0xa1),_0x22c903[_0x58ca6a(0x266)][_0x58ca6a(0x268)]('offline')):(_0x22c903[_0x58ca6a(0x8e)]=_0x58ca6a(0xe2),_0x22c903[_0x58ca6a(0x266)][_0x58ca6a(0x1cc)](_0x58ca6a(0x173))),_0x368958[_0x58ca6a(0x265)](_0x134e29),_0x368958[_0x58ca6a(0x265)](_0x22c903),_0x3981df['appendChild'](_0x24a101),_0x3981df[_0x58ca6a(0x265)](_0x368958),_0x3981df['addEventListener'](_0x58ca6a(0xbe),()=>{const _0x244d7a=_0x58ca6a;if(!onlineUsers['has'](_0x295f87['id'])){showError(_0x295f87[_0x244d7a(0x156)]+'\x20is\x20currently\x20offline\x20and\x20cannot\x20receive\x20calls.');return;}callTargetUserId=_0x295f87['id'],callTargetUserName=_0x295f87[_0x244d7a(0x156)],callTargetUserAvatar=_0x295f87[_0x244d7a(0xd3)],callUserModal[_0x244d7a(0x295)]['display']=_0x244d7a(0xf8),startAudioCall(_0x295f87['id'],_0x295f87[_0x244d7a(0x156)],_0x295f87['avatar']);}),callUserList[_0x58ca6a(0x265)](_0x3981df);}});callUserModal[_0x459e61(0x295)][_0x459e61(0x178)]='flex';}async function clearAllMessages(){const _0x2b7b04=_0x1744d6;if(!confirm(_0x2b7b04(0x130)))return;try{console[_0x2b7b04(0x123)](_0x2b7b04(0x12a));const _0x3ec2d2=await serverFetch(currentServer,_0x2b7b04(0x16e));if(_0x3ec2d2&&_0x3ec2d2[_0x2b7b04(0xac)]>0x0)for(const _0x16c97b of _0x3ec2d2){await serverFetch(currentServer,_0x2b7b04(0x223)+_0x16c97b['id'],{'method':_0x2b7b04(0x2e8)});}allMessages=[],messagesDiv['innerHTML']='',lastMessageId=0x0,lastDateSeparator=null,lastReadMessageId=0x0,localStorage[_0x2b7b04(0x181)](_0x2b7b04(0x1ba),0x0),Object[_0x2b7b04(0x293)](serverMessages)['forEach'](_0x1ad880=>{serverMessages[_0x1ad880]=[],saveServerMessages(_0x1ad880,[]);}),messageReactions={},saveMessageReactions();const _0x132f80=document['getElementById'](_0x2b7b04(0xd7));_0x132f80&&(_0x132f80['textContent']=_0x2b7b04(0x10f),_0x132f80['style'][_0x2b7b04(0x178)]=_0x2b7b04(0x230)),showTemporaryStatus(_0x2b7b04(0x242)),showSuccess('All\x20messages\x20cleared\x20successfully!\x20Everyone\x27s\x20chat\x20is\x20now\x20empty.');}catch(_0x255e13){console['error'](_0x2b7b04(0x13f),_0x255e13),showError('Failed\x20to\x20clear\x20messages.\x20Please\x20try\x20again.');}}async function sendMessage(_0x5cb0b5){const _0x1bdee1=_0x1744d6;try{sendButton['disabled']=!![],sendButton[_0x1bdee1(0x8e)]=_0x1bdee1(0xf6),typingUsers['delete'](userName),updateTypingIndicator();if(editingMessageId){sendButton[_0x1bdee1(0x8e)]=_0x1bdee1(0x2ec),await updateMessage(editingMessageId,_0x5cb0b5),sendButton['disabled']=![];return;}currentServer===_0x1bdee1(0x339)&&currentDM?await sendDMMessage(_0x5cb0b5):await sendChatMessage(_0x5cb0b5);}catch(_0x380bae){console[_0x1bdee1(0x14e)]('\x20Error\x20sending\x20message:',_0x380bae),showError(_0x1bdee1(0xd4));}finally{sendButton[_0x1bdee1(0x22c)]=![],sendButton['textContent']='Send';}}async function sendChatMessage(_0x2df2a3){const _0x545436=_0x1744d6,_0x5b9440={'text':_0x2df2a3,'user_id':userId,'user_name':userName,'created_at':new Date()[_0x545436(0x194)]()};console[_0x545436(0x123)]('\x20Sending\x20message\x20to\x20'+currentServer+_0x545436(0x24c),_0x5b9440);let _0x2bdebe;try{const _0x2be099=await serverFetch(currentServer,_0x545436(0x19f),{'method':'POST','body':JSON[_0x545436(0x1be)](_0x5b9440)});if(_0x2be099){if(Array[_0x545436(0xd6)](_0x2be099)&&_0x2be099[_0x545436(0xac)]>0x0)_0x2bdebe=_0x2be099[0x0];else _0x2be099['id']&&(_0x2bdebe=_0x2be099);}}catch(_0x5ef29f){console['warn'](_0x545436(0x1c3)+currentServer+_0x545436(0x8f));}return!_0x2bdebe&&(_0x2bdebe={..._0x5b9440,'id':Date[_0x545436(0x1f6)]()},console['warn'](_0x545436(0x143),_0x2bdebe['id'])),console[_0x545436(0x123)]('\x20Message\x20saved\x20with\x20ID:',_0x2bdebe['id']),allMessages['push'](_0x2bdebe),addMessageToServer(currentServer,_0x2bdebe),_0x2bdebe['id']>lastMessageId&&(lastMessageId=_0x2bdebe['id']),await renderMessage(_0x2bdebe[_0x545436(0x1e0)],userId,userName,_0x2bdebe[_0x545436(0x12f)],_0x2bdebe['id']),input['value']='',console[_0x545436(0x123)]('\x20Message\x20sent\x20to\x20'+currentServer+_0x545436(0xdd)),showSuccess(_0x545436(0x144)),_0x2bdebe;}async function serverFetch(_0x1fed77,_0x1eb6c0,_0x45182c={}){const _0xfbfffe=_0x1744d6,_0x3418c8=serverConfigs[_0x1fed77]||serverConfigs[_0xfbfffe(0x278)];try{console[_0xfbfffe(0x123)](_0xfbfffe(0x276)+_0x1fed77['toUpperCase']()+_0xfbfffe(0x106)+_0x1eb6c0,_0x45182c[_0xfbfffe(0x2fd)]||_0xfbfffe(0x1fc));const _0x3d2507=await fetch(_0x3418c8['url']+_0xfbfffe(0x260)+_0x1eb6c0,{'headers':{'apikey':_0x3418c8[_0xfbfffe(0x262)],'Authorization':'Bearer\x20'+_0x3418c8['key'],'Content-Type':_0xfbfffe(0x1e9),'Prefer':_0xfbfffe(0x275)},..._0x45182c});if(!_0x3d2507['ok']){const _0x531fd0=await _0x3d2507[_0xfbfffe(0x1e0)]();console[_0xfbfffe(0x14e)]('\x20'+_0x1fed77[_0xfbfffe(0x23c)]()+_0xfbfffe(0x179),{'status':_0x3d2507[_0xfbfffe(0x172)],'statusText':_0x3d2507[_0xfbfffe(0x177)],'endpoint':_0x1eb6c0,'error':_0x531fd0});throw new Error(_0xfbfffe(0x11e)+_0x3d2507[_0xfbfffe(0x172)]+':\x20'+_0x3d2507['statusText']);}const _0x59cccb=_0x3d2507[_0xfbfffe(0x101)]['get'](_0xfbfffe(0x319));if(_0x59cccb==='0'||_0x3d2507[_0xfbfffe(0x172)]===0xcc)return console[_0xfbfffe(0x123)]('\x20'+_0x1fed77[_0xfbfffe(0x23c)]()+'\x20Empty\x20response\x20(success)'),null;const _0x4869cd=await _0x3d2507[_0xfbfffe(0x21c)]();return console[_0xfbfffe(0x123)]('\x20'+_0x1fed77[_0xfbfffe(0x23c)]()+_0xfbfffe(0x1f7),_0x4869cd),_0x4869cd;}catch(_0xf2a117){console[_0xfbfffe(0x14e)]('\x20'+_0x1fed77[_0xfbfffe(0x23c)]()+_0xfbfffe(0x95),_0xf2a117);_0x1fed77!==_0xfbfffe(0x278)&&(console[_0xfbfffe(0x18c)](_0xfbfffe(0x105)+_0x1fed77+_0xfbfffe(0x306)),showError(_0xfbfffe(0x18a)+_0x1fed77+'\x22\x20is\x20not\x20configured.\x20You\x20need\x20to\x20create\x20a\x20separate\x20Supabase\x20project\x20for\x20this\x20server.'));throw _0xf2a117;}}function saveServerMessages(_0x280831,_0x2a7413){const _0x146c25=_0x1744d6;serverMessages[_0x280831]=_0x2a7413,localStorage[_0x146c25(0x181)]('serverMessages_'+_0x280831,JSON[_0x146c25(0x1be)](_0x2a7413)),console[_0x146c25(0x123)](_0x146c25(0x17d)+_0x2a7413['length']+_0x146c25(0x228)+_0x280831);}function loadServerMessages(_0x22166e){const _0x26c56f=_0x1744d6,_0x477db1=localStorage[_0x26c56f(0x1a0)](_0x26c56f(0x280)+_0x22166e);if(_0x477db1)try{serverMessages[_0x22166e]=JSON[_0x26c56f(0x248)](_0x477db1),console['log'](_0x26c56f(0x233)+serverMessages[_0x22166e][_0x26c56f(0xac)]+_0x26c56f(0x228)+_0x22166e);}catch(_0x409c95){console['error']('\x20Error\x20loading\x20messages\x20for\x20server\x20'+_0x22166e+':',_0x409c95),serverMessages[_0x22166e]=[];}else serverMessages[_0x22166e]=[],console[_0x26c56f(0x123)](_0x26c56f(0x161)+_0x22166e+',\x20creating\x20new\x20array');return serverMessages[_0x22166e];}function addMessageToServer(_0x26f034,_0xf63280){const _0x502770=_0x1744d6;!serverMessages[_0x26f034]&&(serverMessages[_0x26f034]=[]),serverMessages[_0x26f034][_0x502770(0x253)](_0xf63280),saveServerMessages(_0x26f034,serverMessages[_0x26f034]),console[_0x502770(0x123)]('\x20Added\x20message\x20to\x20server\x20'+_0x26f034+_0x502770(0x114)+serverMessages[_0x26f034][_0x502770(0xac)]);}function switchServer(_0x15f089){const _0x188e1d=_0x1744d6;console[_0x188e1d(0x123)](_0x188e1d(0x25c)+_0x15f089),serverIcons['forEach'](_0x2b5801=>{const _0x271a1f=_0x188e1d;_0x2b5801[_0x271a1f(0x134)](_0x271a1f(0xad))===_0x15f089?_0x2b5801[_0x271a1f(0x266)][_0x271a1f(0x1cc)](_0x271a1f(0x32f)):_0x2b5801[_0x271a1f(0x266)][_0x271a1f(0x268)](_0x271a1f(0x32f));}),currentServer=_0x15f089;_0x15f089!=='dms'&&(currentDM=null,clearActiveDM());if(_0x15f089==='dms')showDMListView();else{loadServerMessages(_0x15f089),renderServerMessages(_0x15f089),input[_0x188e1d(0x22c)]=![],input[_0x188e1d(0x29e)]='Type\x20your\x20encrypted\x20message...',sendButton[_0x188e1d(0x22c)]=![];const _0xe37be9=document[_0x188e1d(0xff)](_0x188e1d(0x315));_0xe37be9['innerHTML']=_0x188e1d(0x2c7);}showSuccess(_0x188e1d(0x29d)+(_0x15f089===_0x188e1d(0x339)?'Direct\x20Messages':_0x15f089)+_0x188e1d(0x108));}function renderServerMessages(_0x58c77c){const _0xc20a3=_0x1744d6,_0x634127=serverMessages[_0x58c77c]||[];messagesDiv['innerHTML']='',lastDateSeparator=null;if(_0x634127[_0xc20a3(0xac)]===0x0){const _0x1e2cb2=document[_0xc20a3(0x119)](_0xc20a3(0x240));_0x1e2cb2['style'][_0xc20a3(0x232)]=_0xc20a3(0xcf),_0x1e2cb2[_0xc20a3(0x295)]['padding']=_0xc20a3(0x128),_0x1e2cb2[_0xc20a3(0x295)][_0xc20a3(0x250)]='#666',_0x1e2cb2['textContent']=_0xc20a3(0x21a)+_0x58c77c+_0xc20a3(0xf0),messagesDiv['appendChild'](_0x1e2cb2);}else console[_0xc20a3(0x123)](_0xc20a3(0x312)+_0x634127[_0xc20a3(0xac)]+_0xc20a3(0x228)+_0x58c77c),_0x634127[_0xc20a3(0x2f8)](_0x427ac9=>{const _0x225575=_0xc20a3;renderMessage(_0x427ac9['text'],_0x427ac9[_0x225575(0x229)],_0x427ac9[_0x225575(0x331)],_0x427ac9['created_at'],_0x427ac9['id'],_0x427ac9['edited_at'],![],_0x427ac9);});scrollToBottom();}function showDMListView(){const _0x3437ca=_0x1744d6;messagesDiv[_0x3437ca(0x227)]='';const _0x327045=document[_0x3437ca(0x119)](_0x3437ca(0x240));_0x327045[_0x3437ca(0x295)][_0x3437ca(0x232)]=_0x3437ca(0xcf),_0x327045['style'][_0x3437ca(0x10e)]=_0x3437ca(0x128),_0x327045[_0x3437ca(0x295)]['color']=_0x3437ca(0x11d),_0x327045[_0x3437ca(0x8e)]=_0x3437ca(0x1b1),messagesDiv['appendChild'](_0x327045),input[_0x3437ca(0x22c)]=!![],input[_0x3437ca(0x29e)]=_0x3437ca(0x282),sendButton[_0x3437ca(0x22c)]=!![];}function addDateSeparatorIfNeeded(_0x3ef500){const _0x59422a=_0x1744d6,_0x19684a=new Date(_0x3ef500)['toDateString']();if(!lastDateSeparator||lastDateSeparator!==_0x19684a){lastDateSeparator=_0x19684a;const _0x5e2255=document[_0x59422a(0x119)](_0x59422a(0x240));_0x5e2255[_0x59422a(0x266)][_0x59422a(0x1cc)]('date-separator');const _0x295f8a=document[_0x59422a(0x119)]('div');_0x295f8a['classList']['add'](_0x59422a(0x238)),_0x295f8a['textContent']=formatDateForSeparator(_0x3ef500),_0x5e2255[_0x59422a(0x265)](_0x295f8a),messagesDiv[_0x59422a(0x265)](_0x5e2255);}}function formatDateForSeparator(_0x2b1883){const _0x50c509=_0x1744d6,_0x20b080=new Date(_0x2b1883),_0x2f1250=new Date(),_0x3a4a09=new Date(_0x2f1250);_0x3a4a09[_0x50c509(0x1e4)](_0x3a4a09['getDate']()-0x1);if(_0x20b080['toDateString']()===_0x2f1250[_0x50c509(0x2a3)]())return _0x50c509(0x2a7);if(_0x20b080[_0x50c509(0x2a3)]()===_0x3a4a09[_0x50c509(0x2a3)]())return _0x50c509(0x271);const _0x1d405a=Math['floor']((_0x2f1250-_0x20b080)/(0x3e8*0x3c*0x3c*0x18));if(_0x1d405a<0x7){const _0x351b95=['Sunday',_0x50c509(0x337),_0x50c509(0x204),_0x50c509(0x11b),_0x50c509(0x2e0),'Friday',_0x50c509(0x176)];return _0x351b95[_0x20b080[_0x50c509(0xd9)]()];}const _0x213e70=['Jan',_0x50c509(0xdf),_0x50c509(0x2fb),_0x50c509(0x180),_0x50c509(0x187),_0x50c509(0x113),_0x50c509(0x241),'Aug',_0x50c509(0x14a),_0x50c509(0xa3),_0x50c509(0x11c),_0x50c509(0x1f8)];return _0x213e70[_0x20b080['getMonth']()]+'\x20'+_0x20b080[_0x50c509(0x2ac)]();}function addUnreadSeparatorIfNeeded(){const _0xc0ee19=_0x1744d6,_0x3ab234=allMessages[_0xc0ee19(0x110)](_0x3459e1=>_0x3459e1['id']>lastReadMessageId&&_0x3459e1[_0xc0ee19(0x229)]!==userId);if(_0x3ab234['length']>0x0){const _0xc79e68=_0x3ab234[0x0],_0x32a916=document[_0xc0ee19(0xff)]('.unread-separator');_0x32a916&&_0x32a916['remove']();const _0x4d77b1=document['querySelector'](_0xc0ee19(0x196)+_0xc79e68['id']+'\x22]');if(_0x4d77b1){const _0x5d9f9e=document[_0xc0ee19(0x119)](_0xc0ee19(0x240));_0x5d9f9e[_0xc0ee19(0x266)][_0xc0ee19(0x1cc)](_0xc0ee19(0x20b));const _0x11feb9=document[_0xc0ee19(0x119)](_0xc0ee19(0x240));_0x11feb9['classList']['add']('unread-label'),_0x11feb9['textContent']=_0xc0ee19(0x1c5),_0x5d9f9e[_0xc0ee19(0x265)](_0x11feb9),_0x4d77b1[_0xc0ee19(0xed)][_0xc0ee19(0x2ff)](_0x5d9f9e,_0x4d77b1);}}else{const _0x5cd092=document[_0xc0ee19(0xff)](_0xc0ee19(0x2fc));_0x5cd092&&_0x5cd092[_0xc0ee19(0x268)]();}}function updateOnlineUsers(){const _0x58183d=_0x1744d6;onlineUsers[_0x58183d(0xbb)](),onlineUsers['add'](userId);const _0x5c3cf3=new Date(Date[_0x58183d(0x1f6)]()-0x5*0x3c*0x3e8);allMessages[_0x58183d(0x2f8)](_0x570057=>{const _0x46b2e6=_0x58183d,_0x331f47=new Date(_0x570057[_0x46b2e6(0x12f)]);_0x331f47>_0x5c3cf3&&onlineUsers[_0x46b2e6(0x1cc)](_0x570057[_0x46b2e6(0x229)]);});}function startPolling(){pollInterval=setInterval(checkNewMessages,0x7d0);}function showTemporaryStatus(_0x50f2ff,_0x333b4b=!![]){const _0x2f5de5=_0x1744d6;statusTimeout&&clearTimeout(statusTimeout),statusDiv[_0x2f5de5(0x8e)]=_0x50f2ff,statusDiv[_0x2f5de5(0x146)]=_0x333b4b?'status\x20connected':_0x2f5de5(0x111),statusDiv['style'][_0x2f5de5(0x178)]=_0x2f5de5(0x205),statusTimeout=setTimeout(()=>{const _0x243b9b=_0x2f5de5;statusDiv['style'][_0x243b9b(0x178)]='none';},0xbb8);}function updateTypingIndicator(){const _0x2510c6=_0x1744d6;if(typingUsers[_0x2510c6(0x12c)]===0x0){typingIndicator['style']['display']=_0x2510c6(0xf8);return;}const _0x25571d=Array[_0x2510c6(0x225)](typingUsers);if(_0x25571d[_0x2510c6(0xac)]===0x1)typingText['textContent']=_0x25571d[0x0]+_0x2510c6(0x28e);else _0x25571d[_0x2510c6(0xac)]===0x2?typingText[_0x2510c6(0x8e)]=_0x25571d[0x0]+_0x2510c6(0x226)+_0x25571d[0x1]+'\x20are\x20typing':typingText[_0x2510c6(0x8e)]=_0x25571d[_0x2510c6(0xac)]+_0x2510c6(0x2c9);typingIndicator[_0x2510c6(0x295)][_0x2510c6(0x178)]=_0x2510c6(0x205);}function clearTypingIndicator(){typingTimeout&&clearTimeout(typingTimeout),typingTimeout=setTimeout(()=>{typingUsers['clear'](),updateTypingIndicator();},0xbb8);}function sendTypingIndicator(){const _0x439036=_0x1744d6,_0x3cf6a9=Date[_0x439036(0x1f6)]();_0x3cf6a9-lastTypingTime>0x3e8&&(lastTypingTime=_0x3cf6a9,typingUsers['add'](userName),updateTypingIndicator(),clearTypingIndicator());}function setupMessageReadTracking(){const _0x38f27f=_0x1744d6,_0x2eada5=new IntersectionObserver(_0x27818c=>{const _0x491a3f=_0x25db;_0x27818c[_0x491a3f(0x2f8)](_0x1d0d96=>{const _0x1a41bb=_0x491a3f;if(_0x1d0d96[_0x1a41bb(0xa4)]){const _0x524e76=parseInt(_0x1d0d96[_0x1a41bb(0x31e)][_0x1a41bb(0x134)]('data-message-id'));_0x524e76>lastReadMessageId&&(lastReadMessageId=_0x524e76,localStorage[_0x1a41bb(0x181)](_0x1a41bb(0x1ba),lastReadMessageId),addUnreadSeparatorIfNeeded());}});},{'threshold':0.5});document['querySelectorAll'](_0x38f27f(0x20c))['forEach'](_0x24c619=>{const _0x19f24e=_0x38f27f;_0x2eada5[_0x19f24e(0x8d)](_0x24c619);});}async function checkNewMessages(){const _0x175b5c=_0x1744d6;if(!isOnline)return;try{const _0x3714ff=await serverFetch(currentServer,_0x175b5c(0x100)+lastMessageId+'&order=id.asc');if(_0x3714ff&&_0x3714ff['length']>0x0){console[_0x175b5c(0x123)](_0x175b5c(0x284)+_0x3714ff[_0x175b5c(0xac)]+_0x175b5c(0x25f)+currentServer+_0x175b5c(0x108));for(const _0xab6a6a of _0x3714ff){!allMessages[_0x175b5c(0x16f)](_0xabdd96=>_0xabdd96['id']===_0xab6a6a['id'])&&(allMessages['push'](_0xab6a6a),addMessageToServer(currentServer,_0xab6a6a),await renderMessage(_0xab6a6a[_0x175b5c(0x1e0)],_0xab6a6a[_0x175b5c(0x229)],_0xab6a6a[_0x175b5c(0x331)],_0xab6a6a[_0x175b5c(0x12f)],_0xab6a6a['id'],_0xab6a6a[_0x175b5c(0x259)],!![],_0xab6a6a),_0xab6a6a['id']>lastMessageId&&(lastMessageId=_0xab6a6a['id']));}addUnreadSeparatorIfNeeded(),_0x3714ff['length']>0x0&&console[_0x175b5c(0x123)]('\x20New\x20messages\x20loaded\x20from\x20'+currentServer+'\x20server');}}catch(_0x24074c){console[_0x175b5c(0x123)](_0x175b5c(0x249)+currentServer+_0x175b5c(0x24c),_0x24074c),isOnline=![],showTemporaryStatus('\x20'+currentServer+_0x175b5c(0x22b),![]);}}function scrollToBottom(){setTimeout(()=>{const _0x351659=_0x25db;messagesDiv[_0x351659(0x1c4)]=messagesDiv[_0x351659(0x19e)];if(allMessages[_0x351659(0xac)]>0x0){const _0x5969a6=Math[_0x351659(0x148)](...allMessages[_0x351659(0x2e3)](_0x4ebfad=>_0x4ebfad['id']));_0x5969a6>lastReadMessageId&&(lastReadMessageId=_0x5969a6,localStorage[_0x351659(0x181)](_0x351659(0x1ba),lastReadMessageId),addUnreadSeparatorIfNeeded());}},0x64);}function showError(_0x5eaba4){const _0x1adb72=_0x1744d6;errorMessage[_0x1adb72(0x8e)]=_0x5eaba4,errorMessage[_0x1adb72(0x295)][_0x1adb72(0x178)]='block',successMessage[_0x1adb72(0x295)][_0x1adb72(0x178)]=_0x1adb72(0xf8),setTimeout(()=>{const _0x3b2c94=_0x1adb72;errorMessage['style'][_0x3b2c94(0x178)]=_0x3b2c94(0xf8);},0x1388);}function showSuccess(_0x48a610){const _0x3ecf53=_0x1744d6;successMessage[_0x3ecf53(0x8e)]=_0x48a610,successMessage[_0x3ecf53(0x295)][_0x3ecf53(0x178)]='block',errorMessage['style'][_0x3ecf53(0x178)]='none',setTimeout(()=>{const _0x2d7efa=_0x3ecf53;successMessage[_0x2d7efa(0x295)]['display']=_0x2d7efa(0xf8);},0xbb8);}function applyWallpaper(_0x5bcdf0){const _0x3be7de=_0x1744d6;document[_0x3be7de(0x129)][_0x3be7de(0x295)][_0x3be7de(0x24b)]='',document[_0x3be7de(0x129)]['style']['backgroundImage']='',document[_0x3be7de(0x129)][_0x3be7de(0x295)][_0x3be7de(0x15e)]='',_0x5bcdf0[_0x3be7de(0xc0)](_0x3be7de(0x2a4))?document[_0x3be7de(0x129)][_0x3be7de(0x295)]['background']=_0x5bcdf0:document[_0x3be7de(0x129)][_0x3be7de(0x295)][_0x3be7de(0x16b)]=_0x5bcdf0,document[_0x3be7de(0x129)][_0x3be7de(0x295)][_0x3be7de(0x201)]='cover',document[_0x3be7de(0x129)][_0x3be7de(0x295)][_0x3be7de(0xdb)]=_0x3be7de(0xcf),document[_0x3be7de(0x129)][_0x3be7de(0x295)][_0x3be7de(0x239)]='fixed',localStorage[_0x3be7de(0x181)](_0x3be7de(0x2ae),_0x5bcdf0);}function initializeEmojiPicker(){const _0xa113c6=_0x1744d6;console[_0xa113c6(0x123)](_0xa113c6(0x1aa)),emojiPickerGrid[_0xa113c6(0x227)]='',availableEmojis[_0xa113c6(0x2f8)](_0x5932eb=>{const _0x478f19=_0xa113c6,_0xd5d4e=document['createElement']('div');_0xd5d4e[_0x478f19(0x266)][_0x478f19(0x1cc)](_0x478f19(0x15c)),_0xd5d4e[_0x478f19(0x8e)]=_0x5932eb,_0xd5d4e[_0x478f19(0x2b9)]=_0x5932eb,_0xd5d4e['addEventListener'](_0x478f19(0xbe),()=>{addReactionToMessage(currentReactingMessageId,_0x5932eb),emojiPickerModal['style']['display']='none';}),emojiPickerGrid[_0x478f19(0x265)](_0xd5d4e);}),emojiPickerModal[_0xa113c6(0x1a7)](_0xa113c6(0xbe),_0x1f7fb0=>{const _0x25806f=_0xa113c6;_0x1f7fb0[_0x25806f(0x31e)]===emojiPickerModal&&(emojiPickerModal['style'][_0x25806f(0x178)]='none');}),cancelEmojiBtn[_0xa113c6(0x1a7)](_0xa113c6(0xbe),()=>{const _0x39105e=_0xa113c6;emojiPickerModal[_0x39105e(0x295)]['display']=_0x39105e(0xf8);});}function showEmojiPicker(_0x56425f){const _0x50fa92=_0x1744d6;currentReactingMessageId=_0x56425f,emojiPickerModal[_0x50fa92(0x295)][_0x50fa92(0x178)]=_0x50fa92(0x205);}function saveMessageReactions(){const _0x12df70=_0x1744d6;localStorage[_0x12df70(0x181)](_0x12df70(0x139),JSON[_0x12df70(0x1be)](messageReactions));}function loadMessageReactions(){const _0x3d359e=_0x1744d6,_0x4e40fb=localStorage[_0x3d359e(0x1a0)]('messageReactions');if(_0x4e40fb)try{messageReactions=JSON[_0x3d359e(0x248)](_0x4e40fb),console['log'](_0x3d359e(0x17a),messageReactions);}catch(_0x22be25){console[_0x3d359e(0x14e)](_0x3d359e(0x2eb),_0x22be25),messageReactions={};}else messageReactions={};}function updateMessageReactions(_0x48ca56){const _0x9e48f7=_0x1744d6,_0xd2a6e3=document[_0x9e48f7(0xff)](_0x9e48f7(0x196)+_0x48ca56+'\x22]');if(!_0xd2a6e3)return;let _0x11c750=_0xd2a6e3[_0x9e48f7(0xff)]('.reactions-container');!_0x11c750?(_0x11c750=document[_0x9e48f7(0x119)]('div'),_0x11c750[_0x9e48f7(0x266)][_0x9e48f7(0x1cc)]('reactions-container'),_0xd2a6e3['querySelector'](_0x9e48f7(0xf5))[_0x9e48f7(0x265)](_0x11c750)):_0x11c750['innerHTML']='',messageReactions[_0x48ca56]&&Object['entries'](messageReactions[_0x48ca56])[_0x9e48f7(0x2f8)](([_0x19e00b,_0x2ff18e])=>{const _0x3fbe0e=_0x9e48f7;if(_0x2ff18e[_0x3fbe0e(0xac)]>0x0){const _0x9ab7c=document[_0x3fbe0e(0x119)](_0x3fbe0e(0x240));_0x9ab7c[_0x3fbe0e(0x266)]['add'](_0x3fbe0e(0x2a2));_0x2ff18e[_0x3fbe0e(0x318)](userId)&&_0x9ab7c[_0x3fbe0e(0x266)][_0x3fbe0e(0x1cc)]('self-reacted');const _0x522319=document['createElement']('span');_0x522319['textContent']=_0x19e00b;const _0x3611ec=document[_0x3fbe0e(0x119)](_0x3fbe0e(0x122));_0x3611ec['classList'][_0x3fbe0e(0x1cc)](_0x3fbe0e(0xcc)),_0x3611ec[_0x3fbe0e(0x8e)]=_0x2ff18e[_0x3fbe0e(0xac)],_0x9ab7c[_0x3fbe0e(0x265)](_0x522319),_0x9ab7c[_0x3fbe0e(0x265)](_0x3611ec),_0x9ab7c[_0x3fbe0e(0x1a7)](_0x3fbe0e(0xbe),()=>{addReactionToMessage(_0x48ca56,_0x19e00b);}),_0x11c750[_0x3fbe0e(0x265)](_0x9ab7c);}}),_0x11c750[_0x9e48f7(0x247)][_0x9e48f7(0xac)]===0x0&&_0x11c750[_0x9e48f7(0x268)]();}function startEditingMessage(_0x1a4f52,_0x43800c){const _0x297b94=_0x1744d6;editingMessageId=_0x1a4f52,input[_0x297b94(0x126)]=_0x43800c,input['focus'](),sendButton[_0x297b94(0x8e)]=_0x297b94(0x328);if(!document[_0x297b94(0x32a)]('cancel-edit-btn')){const _0x1639ed=document['createElement'](_0x297b94(0x1b9));_0x1639ed['id']=_0x297b94(0x2c4),_0x1639ed[_0x297b94(0x8e)]=_0x297b94(0x190),_0x1639ed['type']=_0x297b94(0x1b9),_0x1639ed[_0x297b94(0x295)]['backgroundColor']=_0x297b94(0x18d),_0x1639ed[_0x297b94(0x1a7)](_0x297b94(0xbe),cancelEditing),form[_0x297b94(0x265)](_0x1639ed);}}function cancelEditing(){const _0x7f16a6=_0x1744d6;editingMessageId=null,input[_0x7f16a6(0x126)]='',sendButton['textContent']=_0x7f16a6(0x152);const _0x2ef9d1=document[_0x7f16a6(0x32a)](_0x7f16a6(0x2c4));_0x2ef9d1&&_0x2ef9d1['remove']();}async function updateMessage(_0x4cc2fc,_0xaac21e){const _0x1b4312=_0x1744d6;try{const {data:_0x431946,error:_0x360142}=await serverFetch(currentServer,_0x1b4312(0x223)+_0x4cc2fc,{'method':_0x1b4312(0x1ab),'body':JSON[_0x1b4312(0x1be)]({'text':_0xaac21e,'edited_at':new Date()['toISOString']()})});if(_0x360142)throw new Error(_0x1b4312(0x1d8));const _0x2c7a33=allMessages[_0x1b4312(0x2ce)](_0x3bc0ca=>_0x3bc0ca['id']===_0x4cc2fc);_0x2c7a33!==-0x1&&(allMessages[_0x2c7a33][_0x1b4312(0x1e0)]=_0xaac21e,allMessages[_0x2c7a33][_0x1b4312(0x259)]=new Date()[_0x1b4312(0x194)]());Object['keys'](serverMessages)[_0x1b4312(0x2f8)](_0x4eec9f=>{updateMessageInServer(_0x4eec9f,{...allMessages[_0x2c7a33],'text':_0xaac21e,'edited_at':new Date()['toISOString']()});});const _0x582d1e=document[_0x1b4312(0xff)]('[data-message-id=\x22'+_0x4cc2fc+'\x22]');if(_0x582d1e){const _0x20fb83=_0x582d1e[_0x1b4312(0xff)](_0x1b4312(0x166)),_0x263c33=_0x582d1e['querySelector']('.sender-name');_0x20fb83[_0x1b4312(0x8e)]=_0xaac21e;const _0x59db8c=_0x263c33[_0x1b4312(0x8e)][_0x1b4312(0xee)]('\x20\x20')[0x0],_0x2279bd=_0x1b4312(0x10c);_0x263c33[_0x1b4312(0x8e)]=_0x59db8c+_0x1b4312(0x212)+formatTime(new Date()[_0x1b4312(0x194)]())+_0x2279bd;}return showSuccess(_0x1b4312(0x224)),cancelEditing(),_0x431946;}catch(_0x296dde){console[_0x1b4312(0x14e)]('Error\x20updating\x20message:',_0x296dde),showError(_0x1b4312(0x1fa));throw _0x296dde;}}function updateMessageInServer(_0x48a5f2,_0x432c13){const _0x2c4e5c=_0x1744d6;if(serverMessages[_0x48a5f2]){const _0x10fbee=serverMessages[_0x48a5f2]['findIndex'](_0x106a09=>_0x106a09['id']===_0x432c13['id']);_0x10fbee!==-0x1&&(serverMessages[_0x48a5f2][_0x10fbee]=_0x432c13,saveServerMessages(_0x48a5f2,serverMessages[_0x48a5f2]),console[_0x2c4e5c(0x123)](_0x2c4e5c(0xfb)+_0x48a5f2));}}async function deleteMessage(_0x304488){const _0x1068fb=_0x1744d6;if(!confirm(_0x1068fb(0x1dc)))return;try{const {error:_0xedbf1e}=await serverFetch(currentServer,_0x1068fb(0x223)+_0x304488,{'method':'DELETE'});if(_0xedbf1e)throw new Error(_0x1068fb(0x245));allMessages=allMessages[_0x1068fb(0x110)](_0x30c6f1=>_0x30c6f1['id']!==_0x304488);const _0x30d092=document[_0x1068fb(0xff)](_0x1068fb(0x196)+_0x304488+'\x22]');if(_0x30d092)_0x30d092[_0x1068fb(0x268)]();Object[_0x1068fb(0x293)](serverMessages)[_0x1068fb(0x2f8)](_0x42841c=>{removeMessageFromServer(_0x42841c,_0x304488);}),messageReactions[_0x304488]&&(delete messageReactions[_0x304488],saveMessageReactions()),showTemporaryStatus(_0x1068fb(0x1d0)),showSuccess(_0x1068fb(0x1d1));}catch(_0x1b654d){console[_0x1068fb(0x14e)](_0x1068fb(0x18b),_0x1b654d),showError(_0x1068fb(0x2bc));}}function removeMessageFromServer(_0x4144ac,_0x2af0c1){const _0x3b5f65=_0x1744d6;serverMessages[_0x4144ac]&&(serverMessages[_0x4144ac]=serverMessages[_0x4144ac][_0x3b5f65(0x110)](_0x4901a1=>_0x4901a1['id']!==_0x2af0c1),saveServerMessages(_0x4144ac,serverMessages[_0x4144ac]),console['log'](_0x3b5f65(0x311)+_0x4144ac+_0x3b5f65(0x114)+serverMessages[_0x4144ac][_0x3b5f65(0xac)]));}function startAudioCall(_0x1955ba,_0x2324e7,_0x5bf012){const _0x5da47a=_0x1744d6;console[_0x5da47a(0x123)](_0x5da47a(0x169)+_0x2324e7+'...'),showError(_0x5da47a(0x26f));}function acceptIncomingCall(){const _0x144057=_0x1744d6;console['log']('\x20Accepting\x20incoming\x20call...'),showError(_0x144057(0x26f));}function rejectIncomingCall(){const _0x397f32=_0x1744d6;console['log'](_0x397f32(0x2f3)),incomingCallModal[_0x397f32(0x295)][_0x397f32(0x178)]='none';}function endAudioCall(){const _0x31f74d=_0x1744d6;console['log'](_0x31f74d(0x304)),audioCallContainer[_0x31f74d(0x295)][_0x31f74d(0x178)]=_0x31f74d(0xf8),incomingCallModal['style']['display']=_0x31f74d(0xf8),isInCall=![],isCallInitiator=![],callTargetUserId=null,callTargetUserName=null,callTargetUserAvatar=null;}async function requestMicrophonePermission(){const _0x50e359=_0x1744d6;try{microphonePermissionModal[_0x50e359(0x295)]['display']=_0x50e359(0xf8);const _0x58a1a8=await navigator[_0x50e359(0x2c2)][_0x50e359(0x2b1)]({'name':_0x50e359(0x22a)});if(_0x58a1a8['state']===_0x50e359(0x1ce))return!![];const _0x1c29c9=await navigator['mediaDevices']['getUserMedia']({'audio':!![]});return _0x1c29c9['getTracks']()[_0x50e359(0x2f8)](_0x5838f0=>_0x5838f0['stop']()),showSuccess(_0x50e359(0x329)),!![];}catch(_0x16e02b){return console[_0x50e359(0x14e)](_0x50e359(0x263),_0x16e02b),showError('Microphone\x20access\x20is\x20required\x20for\x20audio\x20calls.'),![];}}function _0x1ac8(){const _0x707bf8=['\x20Saved\x20','Start\x20a\x20conversation\x20with\x20','dm-list','Apr','setItem','\x20Encrypted\x20Super\x20Chat\x20initialized\x20successfully','endsWith','\x20Initializing\x20Enhanced\x20Encrypted\x20Super\x20Chat...','Encryption\x20key\x20saved!','https://parsaj515.github.io/chat.html','May','visibilitychange','\x20at\x20','Server\x20\x22','Error\x20deleting\x20message:','warn','#a0aec0','delete','You\x20are\x20already\x20in\x20a\x20call','Cancel','VfLXE9JQxmGFAhfkbqklLaMdG9JEOsU9','linear-gradient(135deg,\x20#d299c2,\x20#fef9d7)','<div\x20class=\x22gif-loading\x22><span>Error\x20searching\x20GIFs</span></div>','toISOString','italic-btn','[data-message-id=\x22','<span\x20class=\x22material-icons\x22>download</span>','Please\x20enter\x20an\x20encryption\x20key','You\x20can\x20only\x20delete\x20your\x20own\x20messages','audio-call-container','cat','linear-gradient(135deg,\x20#0ba360,\x20#3cba92)','#e2e8f0','scrollHeight','messages','getItem','values','Error\x20loading\x20user\x20ranks:','document','Jan','contains','\x20messages','addEventListener','image','data','\x20Initializing\x20emoji\x20picker...','PATCH','\x22\x20has\x20been\x20deleted','You:\x20','rank-name','<span\x20class=\x22material-icons\x22>check_circle</span>','gif-sticker-btn','Select\x20a\x20user\x20from\x20the\x20DM\x20list\x20to\x20start\x20a\x20conversation','bear','cancel-emoji-btn','subtle','[class*=\x22ad\x22]','advertising','File\x20size\x20must\x20be\x20less\x20than\x2010MB','Dark\x20Space','button','lastReadMessageId','borderRadius','accept-call-btn','https://igiylouxthnackhbjdrz.supabase.co','stringify','stickerUrl','files','getTime','\x20sticker\x20','\x20Could\x20not\x20send\x20to\x20','scrollTop','Unread','charCodeAt','linear-gradient(135deg,\x20#f6d365,\x20#fda085)','fixed_height','message-container','gifUrl','\x20Loading\x20messages\x20from\x20database...','add','Started\x20DM\x20with\x20','granted','game-btn','\x20Message\x20deleted!','Message\x20deleted!','marginBottom','decrypt','focus','3px\x20solid\x20','gif','Owl','Failed\x20to\x20update\x20message','importKey','preview','Ocean','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20message?','charAt','googlesyndication.com','Mon','text','Admin','\x20Initializing\x20admin\x20panel...','encryption-key-modal','setDate','adblocker-status','Failed\x20to\x20send\x20file.\x20Please\x20try\x20again.','stickers-grid','platform','application/json','onload','.message-avatar','<span\x20class=\x22material-icons\x22>fullscreen</span>','sender_id','linear-gradient(135deg,\x20#ffecd2,\x20#fcb69f)','file-icon','Mint\x20Fresh','message-bubble','slice','download','User\x20\x22','\x20Connected!\x20Ready\x20to\x20chat','now','\x20Server\x20Response:','Dec','profile-picture-options','Failed\x20to\x20update\x20message.\x20Please\x20try\x20again.','rabbit','GET','ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()_+-=[]{}|;:,.<>?','tracking','gifs','clear-messages-btn','backgroundSize','sticker','admin-user-rank','Tuesday','flex','user-','dragover','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22message-dropdown-item\x20reaction\x22\x20data-action=\x22react\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22material-icons\x22>add_reaction</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20React\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20','querySelectorAll','admin-close-btn','unread-separator','.message-container','data-tab','encrypt','Now','selectionEnd','dm-info','\x20\x20','\x20Initializing\x20file\x20upload\x20functionality...','admin-user-controls','[FILE]\x20','\x20Initializing\x20profile\x20picture\x20functionality...','file-info','getMonth','admin-rank-controls','Welcome\x20to\x20','admin-cancel-btn','json','\x20Database\x20connection\x20failed,\x20starting\x20with\x20empty\x20chat','substring','Yesterday\x20at\x20','https://images.unsplash.com/photo-1574085975024-eaa85ec28107?w=150&h=150&fit=crop&crop=center','fontSize','profile-picture-grid','messages?id=eq.','Message\x20updated!','from','\x20and\x20','innerHTML','\x20messages\x20for\x20server:\x20','user_id','microphone','\x20server\x20offline\x20-\x20retrying...','disabled','No\x20users\x20found','****','file','block','link-url','textAlign','\x20Loaded\x20','keyLength','location','Sunset','.server-icon','date-label','backgroundAttachment','gif-sticker-item','linear-gradient(135deg,\x20#2c3e50,\x20#4ca1af)','toUpperCase','images','21553fmKvCz','Fri','div','Jul','\x20All\x20messages\x20cleared!','YOUR_GIPHY_API_KEY','padStart','Failed\x20to\x20delete\x20message','enter-key-modal','children','parse','Polling\x20error\x20for\x20','admin-user-item','background','\x20server:','Owner','indexOf','src','color','gifs-grid','drop','push','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22message-dropdown-item\x20reaction\x22\x20data-action=\x22react\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22material-icons\x22>add_reaction</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20React\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22message-dropdown-item\x20delete\x22\x20data-action=\x22delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22material-icons\x22>delete</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Delete\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20','steal-brainrot-container','https://images.unsplash.com/photo-1561731216-c3a4d99437d5?w=150&h=150&fit=crop&crop=center','Anonymous','call-user-list','edited_at','...','italic','\x20Switching\x20to\x20server:\x20','Bytes','https://images.unsplash.com/photo-1546182990-dffeafbe841d?w=150&h=150&fit=crop&crop=center','\x20new\x20messages\x20in\x20','/rest/v1/','adblocker-status\x20active','key','\x20Microphone\x20permission\x20denied:','https://cdn-icons-png.flaticon.com/512/742/742762.png','appendChild','classList','\x20Initializing\x20adblocker...','remove','https://cdn-icons-png.flaticon.com/512/742/742752.png','removeChild','admin-user-details','input','[Sticker]\x20',']</span>','Audio\x20call\x20functionality\x20is\x20not\x20fully\x20implemented\x20in\x20this\x20demo','message-content','Yesterday','height','getComputedStyle','adsystem','return=representation','\x20','Sun','home','file-upload-area','linear-gradient(135deg,\x20#ff9a9e,\x20#fad0c4)','pow','Enter\x20Fullscreen','Please\x20select\x20a\x20file\x20to\x20upload','Enter\x20your\x20name:','userProfilePicture','serverMessages_','#f7fafc','Select\x20a\x20user\x20to\x20start\x20messaging...','linear-gradient(135deg,\x20#667eea,\x20#764ba2)','\x20Found\x20','Delete','csp','\x20Error\x20searching\x20GIFs:','dataTransfer','disable-adblocker-btn','.rank-option','admin-user-name','edit','repeat(4,\x201fr)','\x20is\x20typing','Uploading...','Please\x20enter\x20a\x20URL','attachment-file','game-close','keys','Invalid\x20admin\x20password!','style','Sat','user','copy-key-btn','#e53e3e','Rabbit','Berry','#718096','Switched\x20to\x20','placeholder','1914sQOpMK','[id*=\x22banner\x22]','origin','reaction','toDateString','linear-gradient','href','\x20Failed\x20to\x20load\x20image:','Today','https://cdn-icons-png.flaticon.com/512/742/742760.png','message-dropdown','textDecoration','url(','getDate','\x20Initializing\x20audio\x20call\x20functionality...','chatWallpaper','No\x20other\x20users\x20yet','url','query','set','reject-call-btn','\x20User\x20initialized:\x20','Error\x20updating\x20name:','steal-brainrot-btn','admin','Could\x20not\x20send\x20sticker\x20to\x20','title','https://images.unsplash.com/photo-1585110396000-c9ffd4e4b308?w=150&h=150&fit=crop&crop=center','status\x20connected','Failed\x20to\x20delete\x20message.\x20Please\x20try\x20again.','has','wallpaper-options','fullscreen','bike-obby-modal','linear-gradient(135deg,\x20#ff9a9e,\x20#fecfef)','permissions','POST','cancel-edit-btn','ivLength','keydown','Super\x20Chat\x20','Fox','\x20people\x20are\x20typing','Send\x20File','width','8px','https://plus.unsplash.com/premium_photo-1661849977833-c18cd1c7e295?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8YmVhcnxlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&q=60&w=700','findIndex','admin-btn','link-display','video','No\x20other\x20users\x20in\x20the\x20chat\x20yet','toggle','online','2719056PoVfDr','catch','\x20Encrypted\x20Super\x20Chat\x20ready!','Adblocker:\x20OFF','Adblocker:\x20ON','&limit=20&rating=g','\x20<span\x20style=\x22color:\x20','fileType','maxWidth','chatUserId','toFixed','Thursday','<a\x20href=\x22$2\x22\x20target=\x22_blank\x22\x20rel=\x22noopener\x20noreferrer\x22\x20style=\x22color:\x20#5865f2;\x20text-decoration:\x20underline;\x22>$1</a>','selected','map','cancel-key-btn','\x20Sticker\x20loaded\x20successfully:','other','tagName','DELETE','https://images.unsplash.com/photo-1518717758536-85ae29035b6d?w=150&h=150&fit=crop&crop=center','0\x20Bytes','\x20Error\x20loading\x20message\x20reactions:','Updating...','.rank-option[data-rank=\x22user\x22]','#2d3748','Moderator','message-avatar','lazy','<span\x20class=\x22material-icons\x22>block</span>','\x20Rejecting\x20incoming\x20call...','onloadeddata','Escape','microphone-permission-modal','chatUserName','forEach','/search?api_key=','AES-GCM','Mar','.unread-separator','method','incoming-call-modal','insertBefore','<div\x20class=\x22gif-loading\x22><span>Loading\x20trending\x20GIFs...</span></div>','https://cdn-icons-png.flaticon.com/512/742/742758.png','adservice',';\x20font-weight:\x20bold;\x22>[','\x20Ending\x20audio\x20call...','Pink\x20Dream','\x22\x20not\x20configured.\x20You\x20need\x20to\x20create\x20a\x20new\x20Supabase\x20project\x20for\x20this\x20server.','algorithm','offsetHeight','call-user-option','\x20Last\x20message\x20ID\x20set\x20to:','https://cdn-icons-png.flaticon.com/512/742/742761.png','material-icons','fox','steal-brainrot-fullscreen','DOMContentLoaded','245834KSVhLl','\x20Removed\x20message\x20from\x20server\x20','\x20Rendering\x20','Exit\x20Fullscreen','emoji-picker-grid','.header\x20div','Wed','\x20ago','includes','content-length','100%','attachment','createObjectURL','cancel-upload-btn','target','Background\x20changed\x20to\x20','cover','metaKey','https://cdn-icons-png.flaticon.com/512/742/742757.png','audio-call-btn','Failed\x20to\x20load\x20image','fileUrl','https://cdn-icons-png.flaticon.com/512/742/742755.png','<div\x20class=\x22gif-loading\x22><span>Error\x20loading\x20GIFs</span></div>','Update','Microphone\x20access\x20granted!','getElementById','.message-dropdown-item','Adblocker\x20enabled.\x20Ads\x20will\x20be\x20blocked\x20in\x20games.','wallpaper-grid','File\x20sent\x20successfully!','active','change','user_name','<em>$1</em>','chat-app25','2970249nNljSX','submit','39533625BLGbpr','Monday','\x20GIF\x20loaded\x20successfully:','dms','user-sidebar-tag','getRandomValues','close-adblocker-btn','link-share-btn','getMinutes','data-message-id','GIF\x20sent\x20successfully!','insert_drive_file','getHours','0.7rem','message','chat-form','wallpaper-option','observe','textContent','\x20server\x20database,\x20using\x20local\x20storage','bold','Sponsor','game-container','Enter','fromCharCode','\x20Server\x20Fetch\x20error:','admin-login-btn','allow-microphone-btn','bike-obby-close','https://cdn-icons-png.flaticon.com/512/742/742754.png','typing-indicator','https://parsaj515.github.io','Bear','file-input','Failed\x20to\x20copy\x20key\x20to\x20clipboard','borderLeft','GIF','Online','.link-preview-url','Oct','isIntersecting','Failed\x20to\x20update\x20name.\x20Please\x20try\x20again.','cancel-call-btn','replace','selectionStart','clipboard','\x22?\x20This\x20will\x20remove\x20all\x20their\x20messages.','Microphone\x20access\x20is\x20required\x20for\x20audio\x20calls.','length','data-server','end-call-btn','.gif-sticker-tab','Cat','call-user-name','Key\x20generation\x20failed:','eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlnaXlsb3V4dGhuYWNraGJqZHJ6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAzNzU0MjMsImV4cCI6MjA3NTk1MTQyM30.eaNIKlRV-hs2F1rbbyK30PbL-ON99InD1IFSDwVv8pA','call-user-avatar','linear-gradient(135deg,\x20#84fab0,\x20#8fd3f4)','adblocker-status\x20inactive','Sticker\x20sent\x20successfully!','adsbygoogle','preventDefault','\x20Offline\x20mode\x20-\x20messages\x20saved\x20locally\x20only','clear','trim','img','click','lion','startsWith','[id*=\x22sponsor\x22]','owl','exportKey','type','Encryption\x20key\x20copied\x20to\x20clipboard!','security-indicator','https://cdn-icons-png.flaticon.com/512/742/742753.png','\x20Failed\x20to\x20load\x20video:','dragleave','\x20server\x20database','stopPropagation','reaction-count','iframe','objectFit','center','load','300px','Profile\x20picture\x20changed\x20to\x20','avatar','Failed\x20to\x20send\x20message.\x20Please\x20try\x20again.','\x20Video\x20loaded\x20successfully:','isArray','loading','9ADWlTF','getDay','error-message','backgroundPosition','<span\x20class=\x22material-icons\x22>cancel</span><span>Adblocker\x20is\x20currently\x20INACTIVE</span>','\x20server\x20successfully','getFullYear','Feb','7206505fWkjIO','bike-obby-btn','Offline','[id*=\x22ad\x22]','profile-picture-label','Warm\x20Fire','.gif-sticker-tab-content','generateKey','message-input','messages?order=id.asc','file-preview','stun:stun1.l.google.com:19302','fileName','parentNode','split','\x27s\x20avatar','\x20server!\x20Start\x20the\x20conversation.','alt','call-status','Make\x20Admin','google-analytics.com','.message-bubble','Sending...','\x20App\x20initialization\x20failed:','none','writeText','gif-sticker-grid','\x20Updated\x20message\x20in\x20server\x20','admin-user-list','\x20Initializing\x20GIF\x20&\x20Sticker\x20functionality\x20with\x20Giphy...','toLowerCase','querySelector','messages?id=gt.','headers','contain','<a\x20href=\x22$1\x22\x20target=\x22_blank\x22\x20rel=\x22noopener\x20noreferrer\x22\x20style=\x22color:\x20#5865f2;\x20text-decoration:\x20underline;\x22>$1</a>','raw','\x20Server\x20\x22','\x20Server\x20Request:\x20','call-user-modal','\x20server','generateProductionKey','.dm-item','profile-picture-btn','\x20-\x20Edited','contentWindow','padding','No\x20messages\x20yet.\x20Start\x20the\x20conversation!','filter','status\x20disconnected','file-name','Jun',',\x20total\x20messages:\x20','wallpaper-label','Decryption\x20failed:','send-button','\x0a\x20\x20\x20\x20<div\x20class=\x22gif-loading\x22\x20style=\x22flex-direction:\x20column;\x20text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20<span\x20style=\x22margin-bottom:\x2010px;\x22>Giphy\x20API\x20Key\x20Required</span>\x0a\x20\x20\x20\x20\x20\x20<small\x20style=\x22font-size:\x200.8rem;\x20color:\x20#666;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20Get\x20a\x20free\x20API\x20key\x20from\x20<a\x20href=\x22https://developers.giphy.com/\x22\x20target=\x22_blank\x22>developers.giphy.com</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<br>and\x20update\x20the\x20GIPHY_API_KEY\x20variable\x0a\x20\x20\x20\x20\x20\x20</small>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20','createElement','game-fullscreen','Wednesday','Nov','#666','HTTP\x20','\x20Selecting\x20DM\x20with\x20','dm-name','caller-avatar','span','log','userRanks','admin-user-info','value','rank-option','20px','body','\x20Clearing\x20all\x20messages...','contentDocument','size','user-sidebar-avatar','controls','created_at','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20ALL\x20messages\x20from\x20everyone?\x20This\x20action\x20cannot\x20be\x20undone.','https://images.unsplash.com/photo-1703248187251-c897f32fe4ec?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&q=80&w=1035','5556124lvcCMI','user-display','getAttribute','https://cdn-icons-png.flaticon.com/512/742/742756.png','enter-key-btn','\x0a\x20\x20\x20\x20\x20\x20<button\x20class=\x22message-dropdown-item\x20reaction\x22\x20data-action=\x22react\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22material-icons\x22>add_reaction</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20React\x0a\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20<button\x20class=\x22message-dropdown-item\x22\x20data-action=\x22edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22material-icons\x22>edit</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20Edit\x0a\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20<button\x20class=\x22message-dropdown-item\x20delete\x22\x20data-action=\x22delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22material-icons\x22>delete</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20Delete\x0a\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20','bold-btn','messageReactions','[class*=\x22banner\x22]','admin-panel-btn','admin-content','toString','MAC','Error\x20clearing\x20messages:','hidden','\x20Message\x20already\x20rendered,\x20skipping:','<div\x20class=\x22gif-loading\x22><span>No\x20GIFs\x20found</span></div>','\x20Using\x20local\x20ID\x20for\x20message:','Message\x20sent!','User','className','<span\x20class=\x22material-icons\x22>check_circle</span><span>Adblocker\x20is\x20currently\x20ACTIVE</span>','max','original','Sep','https://cdn-icons-png.flaticon.com/512/742/742759.png','Forest','.user-rank','error','<span\x20class=\x22material-icons\x22>fullscreen_exit</span>','#game-frame,\x20#steal-brainrot-frame,\x20#bike-obby-frame','doubleclick.net','Send','decode','\x20Error\x20loading\x20trending\x20GIFs:','Aug','name','linear-gradient(135deg,\x20#a8edea,\x20#fed6e3)','entries','\x20Loaded\x20','edit-wallpaper','\x20min','emoji-option','\x20messages\x20from\x20database','backgroundColor','setSelectionRange','data-rank','\x20No\x20saved\x20messages\x20found\x20for\x20server:\x20','encryption-key-input','150px','setAttribute','Please\x20enter\x20a\x20valid\x20URL\x20(starting\x20with\x20http://\x20or\x20https://)','.message','profile-picture-modal','self','\x20Starting\x20audio\x20call\x20with\x20','data-user-id','backgroundImage','[class*=\x22sponsor\x22]','onerror','messages?select=id','some','steal-brainrot-modal','gif-sticker-modal','status','offline','.message-container.self','steal-brainrot-close','Saturday','statusText','display','\x20Server\x20Error:','\x20Loaded\x20message\x20reactions:','owner','Message\x20'];_0x1ac8=function(){return _0x707bf8;};return _0x1ac8();}async function initApp(){const _0xdd4fe0=_0x1744d6;console[_0xdd4fe0(0x123)](_0xdd4fe0(0x184));try{initializeUser(),addNameChangeFeature(),initializeSidebar(),initializeProfilePictures(),initializeAudioCall(),initializeFileUpload(),initializeGifSticker(),initializeEmojiPicker(),initializeLinkSharing(),initializeTextFormatting(),initializeGameModals(),initializeAdminPanel(),initializeAdblocker(),loadMessageReactions();const _0x4715ba=localStorage[_0xdd4fe0(0x1a0)](_0xdd4fe0(0x2ae));_0x4715ba&&applyWallpaper(_0x4715ba),wallpapers[_0xdd4fe0(0x2f8)](_0x2c70f9=>{const _0x6ea460=_0xdd4fe0,_0x211bd5=document[_0x6ea460(0x119)](_0x6ea460(0x240));_0x211bd5[_0x6ea460(0x266)][_0x6ea460(0x1cc)](_0x6ea460(0x32d));const _0x29e41c=document[_0x6ea460(0x119)](_0x6ea460(0x240));_0x29e41c[_0x6ea460(0x266)][_0x6ea460(0x1cc)](_0x6ea460(0x8c)),_0x29e41c[_0x6ea460(0x295)][_0x6ea460(0x24b)]=_0x2c70f9['preview'];const _0x5bf374=document['createElement'](_0x6ea460(0x240));_0x5bf374[_0x6ea460(0x266)][_0x6ea460(0x1cc)](_0x6ea460(0x115)),_0x5bf374[_0x6ea460(0x8e)]=_0x2c70f9[_0x6ea460(0x156)],_0x29e41c[_0x6ea460(0x1a7)]('click',()=>{const _0x352eb1=_0x6ea460;applyWallpaper(_0x2c70f9[_0x352eb1(0x1da)]),wallpaperModal[_0x352eb1(0x295)]['display']=_0x352eb1(0xf8),showSuccess('Background\x20changed\x20to\x20'+_0x2c70f9['name']+'!');}),_0x211bd5['appendChild'](_0x29e41c),_0x211bd5[_0x6ea460(0x265)](_0x5bf374),wallpaperOptions[_0x6ea460(0x265)](_0x211bd5);}),editWallpaperBtn[_0xdd4fe0(0x1a7)](_0xdd4fe0(0xbe),()=>{const _0x409860=_0xdd4fe0;wallpaperModal[_0x409860(0x295)][_0x409860(0x178)]=_0x409860(0x205);}),wallpaperModal[_0xdd4fe0(0x1a7)]('click',_0x48950a=>{const _0x1537ef=_0xdd4fe0;_0x48950a['target']===wallpaperModal&&(wallpaperModal[_0x1537ef(0x295)][_0x1537ef(0x178)]=_0x1537ef(0xf8));}),encryptionKeyModal[_0xdd4fe0(0x1a7)](_0xdd4fe0(0xbe),_0x15419c=>{const _0x33c093=_0xdd4fe0;_0x15419c['target']===encryptionKeyModal&&(encryptionKeyModal[_0x33c093(0x295)][_0x33c093(0x178)]='none');}),enterKeyModal[_0xdd4fe0(0x1a7)]('click',_0x41254e=>{const _0x243cd3=_0xdd4fe0;_0x41254e[_0x243cd3(0x31e)]===enterKeyModal&&(enterKeyModal[_0x243cd3(0x295)]['display']='none');}),callUserModal[_0xdd4fe0(0x1a7)](_0xdd4fe0(0xbe),_0x174b0b=>{const _0x567f89=_0xdd4fe0;_0x174b0b[_0x567f89(0x31e)]===callUserModal&&(callUserModal[_0x567f89(0x295)][_0x567f89(0x178)]=_0x567f89(0xf8));}),microphonePermissionModal['addEventListener']('click',_0x36bb17=>{const _0x55583e=_0xdd4fe0;_0x36bb17[_0x55583e(0x31e)]===microphonePermissionModal&&(microphonePermissionModal[_0x55583e(0x295)][_0x55583e(0x178)]=_0x55583e(0xf8));}),linkShareModal['addEventListener'](_0xdd4fe0(0xbe),_0x460f4c=>{const _0x3e7fb6=_0xdd4fe0;_0x460f4c[_0x3e7fb6(0x31e)]===linkShareModal&&(linkShareModal[_0x3e7fb6(0x295)][_0x3e7fb6(0x178)]=_0x3e7fb6(0xf8));}),securityIndicator[_0xdd4fe0(0x1a7)](_0xdd4fe0(0xbe),showCurrentKey),loadServerMessages(currentServer),await loadMessages(),setupMessageReadTracking(),startPolling(),console['log'](_0xdd4fe0(0x182)),showTemporaryStatus(_0xdd4fe0(0x2d7));}catch(_0x2ad613){console['error'](_0xdd4fe0(0xf7),_0x2ad613),showError('Failed\x20to\x20initialize.\x20Please\x20refresh\x20the\x20page.');}}function showCurrentKey(){const _0x176eed=_0x1744d6,_0x1afca6=encryption[_0x176eed(0x109)]();encryptionKeyDisplay[_0x176eed(0x8e)]=_0x1afca6,encryptionKeyModal[_0x176eed(0x295)][_0x176eed(0x178)]=_0x176eed(0x205);}document['readyState']==='loading'?document['addEventListener'](_0x1744d6(0x30f),initApp):initApp();form[_0x1744d6(0x1a7)](_0x1744d6(0x335),async _0x32061f=>{const _0x511e01=_0x1744d6;_0x32061f['preventDefault']();const _0x4a9348=input[_0x511e01(0x126)]['trim']();if(!_0x4a9348)return;try{await sendMessage(_0x4a9348);}catch(_0x122283){}}),document[_0x1744d6(0x1a7)](_0x1744d6(0x188),()=>{const _0x2450b7=_0x1744d6;document[_0x2450b7(0x140)]?clearInterval(pollInterval):(startPolling(),checkNewMessages());}),copyKeyBtn[_0x1744d6(0x1a7)]('click',()=>{const _0x20d99f=_0x1744d6;navigator[_0x20d99f(0xa9)][_0x20d99f(0xf9)](encryptionKeyDisplay[_0x20d99f(0x8e)])['then'](()=>showSuccess(_0x20d99f(0xc5)))[_0x20d99f(0x2d6)](()=>showError(_0x20d99f(0x9e)));}),enterKeyBtn['addEventListener'](_0x1744d6(0xbe),()=>{const _0x561ef1=_0x1744d6;encryptionKeyModal['style'][_0x561ef1(0x178)]=_0x561ef1(0xf8),enterKeyModal[_0x561ef1(0x295)][_0x561ef1(0x178)]=_0x561ef1(0x205);}),confirmKeyBtn['addEventListener']('click',()=>{const _0x8f9218=_0x1744d6;encryptionKeyModal[_0x8f9218(0x295)][_0x8f9218(0x178)]='none',showSuccess(_0x8f9218(0x185));}),cancelKeyBtn[_0x1744d6(0x1a7)](_0x1744d6(0xbe),()=>{const _0x19311b=_0x1744d6;enterKeyModal[_0x19311b(0x295)]['display']='none';}),useKeyBtn['addEventListener'](_0x1744d6(0xbe),()=>{const _0x5edb3f=_0x1744d6,_0x53c20e=encryptionKeyInput[_0x5edb3f(0x126)]['trim']();if(!_0x53c20e){showError(_0x5edb3f(0x198));return;}enterKeyModal[_0x5edb3f(0x295)][_0x5edb3f(0x178)]='none',showSuccess('Encryption\x20key\x20applied!');});window[_0x1744d6(0x235)][_0x1744d6(0x2a1)]!=_0x1744d6(0x9b)&&(window['location']['href']=_0x1744d6(0x186));</script>
</body>
</html>
